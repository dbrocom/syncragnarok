//===== eAthena Script ======================================= 
//= Kiel Hyre Quest
//===== By: ================================================== 
//= L0ne_W0lf (Script), DZeroX (Timer)
//===== Current Version: ===================================== 
//= 4.6
//===== Compatible With: ===================================== 
//= eAthena SVN
//===== Description: ========================================= 
//= Quest for opening Robot Factory first and second floors.
//===== Comments: ============================================
//= See below
//===== Additional Comments: ================================= 
//= 1.0 First version, needs testing [Playtester]
//= 1.1 Copied over some changes made by -Tsuyuki- [L0ne_W0lf]
//=	Reworked variables slightly so that the permenents ones aside from the 
//=	main tracking variable, are deleted when no longer needed. Renamed
//=	several variables that handle strings to @KHInput$. [L0ne_W0lf]
//= 1.2 Removed duplicate NPCs. [Toms]
//= 1.3 More Bug fixes, fixed typo. Updated Additional comments. [L0ne_W0lf]
//= 1.4 Fixed doors not resetting in kh_kiehl01 after 30 second timer is up. [L0ne_W0lf]
//= 1.5 Another bug fixed (&& instead of ||). [L0ne_W0lf]
//= 1.6 More squashed bugs with if checking. [L0ne_W0lf]
//= 1.7 Corrected some spelling mistakes. [Balish]
//	Corrected Exploit with the pub man, giving infinite wine and money.
//	Corrected pool and map not showing text for some states of the quest.
//	Corrected Elly showing cutin but not text for some states of the quest (causing players to log off to continue).
//	Let fisherman talk to you when you have 10 fishes OR MORE.
//	Corrected not letting you enter the tombstone after finishing the quest.
//= 1.8 Elly now deletes the Iron_Box, and Kiel Hyre deletes the Pin. [L0ne_W0lf]
//= 	More security on the 5th Big Door, now makes sure no one outside of who-
//=	acticated it initially can use it. Resets after 10 minutes to make it.
//=	Made it so that you need to be at least step 84 to activate the final door.
//=	Corrected not deleting Allysia's Ring from inventory.
//= 1.9 Exit will now enable if you are just retrieving the Ring, keeps you from getting stuck. [L0ne_W0lf]
//=	Corrected "KH_Kielh02", was setting off a debug, invalid map index. Should have been "kh_Kiehl02"
//=	Made .KHQuestBusy$ into a temp global variable. $@KHQuestBusy$. 
//= 2.0 Changed the labels on the "Big Doors" to "Identifier Names" to prevent an error with using getvariableofnpc [L0ne_W0lf]
//= 2.1 Fifth door now checks for a variable HIGHER or EQUAL to 74 not 84, as pointed out by Stollen. [L0ne_W0lf]
//= 2.2 Another fix for Elly, no longer RESETS to 26 when you talk to her. [L0ne_W0lf]
//= 2.3 Should NOT have been setting .KHQuestBusy at all. It's not used or accessed anymore. Removed. [L0ne_W0lf]
//= 2.4 Lots of fixes (4ish) from Valandi. [L0ne_W0lf]
//=	Added a getmapuser check to the mapwarp in KHTimerEnd so it's not trying to warp out 0 users. [L0ne_W0lf]
//= 2.5 Fixed several small issues (and large one) such as typos in cutins, typos in dialog, etc. [L0ne_W0lf]
//=	Added some of the missing dialogs for several NPCs, and fixed a few NPC locations.
//=	ALL books can now trigger the wall.
//=	Allysia will now summon 4 (was 2) G_CONSTANTS instead of REGULAR constants.
//=	Fixed where Golden_Key and Kiel_Button are deleted.
//=	Removed KHTimerEnd, and instead use OnReset.
//=	Fixed typo in the second NPC that gives Black Keycards.
//=	Added Monster Warps. (Keeps monsters from being in dungeon quest area.) [Non-functional]
//= 2.6 Stupid mistake, accidentally had 4 copies of the same script in 1... [L0ne_W0lf the bonehead]
//= 2.7 Fixed the wrong name being displayed for Kiel Hyre in one dialog. 
//=	Removed $@KH_DoorInvoker entirely. The quest is now working like it should according to iRO.
//=	Fixed up a few more NPC headers. Facing direction fixes mostly this time.
//=	More progression changes to Kiehl Hyre. He no longer stops dialog after the agents appear.
//= 2.8 Fixed the weight checking in Vandt, and added official dialog. [L0ne_W0lf]
//=	Added weight checks for all NPCs that give items. Semi-official dialog.
//=	Got the missing portion of dialog for Mills'.
//=	Will add further proper dialogs as I get to them on the second runthrough of the quest.
//= 2.8a minor optimization with extra goto, else or empty switch [Lupus]
//= 2.9 Fixed the "enablenpc" problem with the missing spaces. No idea how it happened. [L0ne_W0lf]
//= 3.0 Fixed a typo in Elly, in her room. (was <= should have been <) [L0ne_W0lf]
//=	Added an 'end;' to the cookie basket. Kiel Hyre's final dialog will now delete all quest-related items.
//= 3.1 Moved the "delitem" for all related quest items to the proper NPC. [L0ne_W0lf]
//= 3.2 Fixed error with Allysia teling you to "Go away." maybe. [L0ne_W0lf]
//= 3.2b Fixed some typos and grammar mistakes. [SinSloth]
//= 3.3 Fixed the receiver log out bugs. [L0ne_W0lf]
//= 3.4 Fixed bug when u can't get a Yellow Keycard if u got the Blue one at first [Lupus]
//=     Note: There are many condition checks that should be omitted in the future fixed item names in item_db.txt / txt resources according the quest
//=     for items, should be used bitwise methods in a single variable. So let's fix the rest possible bugs (if they exist) and then optimize ^_-		
//= 3.5 Changed the way the Black Keycard distibuting NPCs work slighty. [L0ne_W0lf]
//= 3.6 Keil Hyre removes ALL outstanding quest items when he is talked [L0ne_W0lf]
//=	to after finishing the quest.
//= 3.7 Corrected NPC names to fall within proper restrictions. [L0ne_W0lf]
//= 3.8 Corrected some delitems. (bugreport:690) [Samuray22]
//= 3.9 Fixed a cutin not being erased. (bugreport:1539) [L0ne_W0lf]
//= 4.0 A whole bunch-a-updates to various npcs. [L0ne_W0lf]
//=     Corrected condition checks throughout the quest.
//=     Npcs no longer make use of the goto command.
//=     Uses temp npc vars now instead of temp char.
//=     Reduced the amount of variables used.
//=     Corrected some of the cutins in npcs with them.
//=     Added the missing dialogs and weight checks.
//=     Fixed many typos, and grammatical errors.
//=     NPC now names use '#<name>' instead of labels.
//=     Updated some NPC positions, and facings.
//=     Changed the way some NPCs work.
//=     Updated comments for get/delitem commands.
//= 4.1 Added an 'end;' to Kiel Hyre's dialog for the "Yes" option for if you want to confront Kiehl.
//= 4.2 Fixed some issues reported in bugreport:2129. [L0ne_W0lf]
//= 4.2a Follow up to last update. [L0ne_W0lf]
//= 4.2b Missed a condition, fixed it though. [L0ne_W0lf]
//= 4.2c More various fixes :D [L0ne_W0lf]
//= 4.3 Fixed improper condition in the Elly NPC. [L0ne_W0lf]
//=     Corrected some typos in the dialogs.
//= 4.4 Updated reviecer and robots NPC to use mobcount. (bugreport:2380) [L0ne_W0lf]
//= 4.5 Removed a delitem that was no logner needed. [L0en_W0lf]
//= 4.6 Fixed impossible condition for security guard. [L0ne_W0lf]
//============================================================ 

//============================================================================
// Kiel Hyre Quest/Robotic Lab Dungeon
//
// Script Dialog Obtained and Copied Down by L0ne_W0lf
// Timer work and some variable dances by DZeroX
// Based on [iRO Sakray] as of [03/29/2007]
//============================================================================
//----------------------------------------------------------------------------
// [Notes]
//  - Let it be noted that ALL DIALOG IS OFFICIAL TO IRO UNLESS SPECIFIED.
//  - I've fixed a few of iRO's mistakes, but I'm sure I made some of my own. 
//  - Will probably require a major optimizing.
//  - Not going to list ALL of the more usless NPCs. (Doors + Empty "Beautiful Ladies")
//  - Parties are *NOT REQUIRED* as per Doddler's Wiki information.
//
//----------------------------------------------------------------------------
// [Maps]                [Use]
//  yuno_in01 ........... Start quest in pub
//  kh_school ........... Deliver Wine here, Meet Elly
//  yuno ................ Get Delivery for/from "Little Kid"
//  lighthalzen ......... Get Delivery package for "Little Kid"
//  kh_vila ............. Kiel Hyre cottage.
//  kh_dun01 ............ Robot Factory; Save Kiel Hyre
//  kh_mansion .......... Kiel Hyre's Mansion in Lighthalzen
//  kh_kiehl01 .......... Kiehl's room/Cave
//  kh_kiehl02 .......... Kiehl's room/Boss Room
//
//----------------------------------------------------------------------------
// [Variables in Use]
//  KielHyreQuest 	- Main quest tracking variable (Quest finished at 106)
//
//  KHToastGirlEnd	- Pick up delivery if set to 1, 
//			- picked up delivery if set to 2
//			- finished if set to 3 
//			- Deleted once no longer needed.
//
//  KHCottagePoem1	- Tracks Poem 1 quest in cottage. (finished = 5)
//			- Deleted once no longer needed.
//
//  KHCottagePoem2	- Tracks Poem 2 quest in cottage. (finished = 3)
//			- Deleted once no longer needed.
//
//  .@KHInput$		- Used with "Security Guard"
//  			- Used with "Test Tube"
//  			- Used when "Elly" (inputing string in attempt to wake her)
//  			- Used with "Grave", (twice)
//  			- Used with "Heavy Door"
//  			- Used with "Mechanical Device"
//  			- Used for opening various doors in Kiehl's area.
//
//  .@KHFirstKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//  .@KHSecondKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//
//  .@KHPotionColor$	- Holds 'red', 'green', or 'yellow' depending on what wrong potion is selected.
//
//  .@KHSwords 		- Used with "Sword Hilt"
//
//  .@KHQRead		- Make sure player has asked questions to Kiel Hyre
//
//  .@KHTitle$		- Holds "Mr", "Mrs", or "Miss"
//
//  .@KHDoorPushAttempt	- Keeps track of how many times a person has attmepted to push the door open.
//
//  .@KHPryingItem$	- Used for incorrect options when prying open last door.
//
//  .KHKilled		- Tracks how many monsters have been killed. Used with "Receiver", "Robots", and "Kiehl" NPCs
//
//  .KHDoor1Open	- 0/1 Depending on if the first door is opened.
//  .KHDoor2Open	- 0/1 Depending on if the second door is opened.
//  .KHDoor3Open	- 0/1 Depending on if the third door is opened.
//  .KHDoor4Open	- 0/1 Depending on if the fourth door is opened.
//  .KHDoor5Open	- 0/1 Depending on if the fifth door is opened.
//
//  .KHKilledBoss	- 0/1 depending on if the boss has been killed.
//
//  $@KHQuestBusy	- 0/1 depending on if the boss room has been set in motion.
//
//----------------------------------------------------------------------------
// [NPCs]			 [Location]
//  Pub Master .................. yuno_in01	[ 35,178]
//  Hanie ....................... yuno_fild08	[196,196]
//  Security Guard .............. yuno_fild08	[158,194]
//  Security Guard .............. yuno_fild08	[158,183]
//  Student ..................... kh_school	[ 57,142]
//  Student ..................... kh_school	[ 57,139]
//  Lady ........................ kh_school	[176, 60]
//  Cute Student ................ kh_school	[179, 39]
//  Little Kid .................. yuno		[217,114]
//  Windmill Owner .............. lighthalzen	[365,300]
//  Cottage Keeper .............. yuno_fild02	[ 93,210]
//  Door ........................ yuno_fild02	[ 75,218]
//  Door ........................ yuno_fild02	[109,218]
//  Wall ........................ kh_vila	[191, 14]
//  Book ........................ kh_vila	[184, 20]
//  Book ........................ kh_vila	[181, 20]
//  Book ........................ kh_vila	[178, 20]
//  Book ........................ kh_vila	[175, 19]
//  Letter ...................... kh_vila	[179, 11]
//  Box ......................... kh_vila	[ 16,175]
//  Apple Box ................... kh_vila	[ 30,184]
//  Map ......................... kh_vila	[ 44,125]
//  Pot ......................... kh_vila	[ 33,148]
//  Calabash .................... kh_vila	[ 14, 55]
//  Pool ........................ kh_vila	[ 39, 39]
//  Vicious Dog ................. kh_vila 	[180,178]
//  Drawer ...................... kh_vila 	[115,186]
//  Box ......................... kh_vila 	[107,126]
//  Bookshelf ................... kh_vila 	[181,138]
//  Sword Hilt .................. kh_vila 	[136, 69]
//  Test Tube ................... kh_vila	[179, 69]
//  Test Tube ................... kh_vila	[185, 69]
//  Window ...................... yuno_fild08	[ 69,185]
//  Elly ........................ kh_school	[178,180]
//  Cookie Basket ............... kh_school	[175,175]
//  Window ...................... kh_school	[188,185]
//  Grave ....................... yuno_fild08	[ 72,170]
//  Heavy Door .................. kh_dun01	[236, 48]
//  Beautiful lady .............. kh_school	[119,149]
//  Beautiful lady .............. kh_school	[122,186]
//  Signboard ................... kh_dun01	[163,223]
//  Mechanical Device ........... kh_dun01	[166,223]
//  Mechanical Device ........... kh_dun01	[162,206]
//  Kiel_Hyre_Door .............. kh_dun01	[224,232]
//  Steward ..................... kh_mansion	[ 78, 55]
//  Kiel Hyre ................... kh_mansion	[ 22, 27]
//  Allysia ..................... kh_mansion	[ 22, 27]
//  Abduction_trigger ........... lighthalzen	[188,200]
//  Mysterious Woman ............ kh_mansion	[ 25, 79]
//  Odd Granma .................. yuno		[250,132]
//  Old Lady .................... yuno 		[250,132]
//  Rosimmir_Entrance ........... yuno		[273,141]
//  Table ....................... kh_rossi	[ 23, 23]
//  Shelf ....................... kh_rossi	[ 92, 40]
//  Desk ........................ kh_rossi	[144,146]
//  Bookshelf ................... kh_rossi	[144,146]
//  Bed ......................... kh_rossi	[154,286]
//  Old Fisherman ............... yuno_fild12	[232,222]
//  Wooden Board ................ yuno_fild09	[158,217]
//  Kiehl_Room_Warp ............. kh_mansion	[ 29, 27]
//  Entrance Device#KHEntry1 .... kh_dun01	[ 44, 20]
//  Entrance Device#KHEntry2 .... kh_dun01	[ 44,203]
//  Security Guard .............. yuno_fild08	[158,194]
//  Receiver .................... kh_kiehl01	[ 17, 39]
//  Flower Vase ................. kh_kiehl01	[ 13, 40]
//  Box ......................... kh_kiehl01	[ 19, 25]
//  Big Door .................... kh_kiehl01	[ 44, 33]
//  Big_Door_1_Warp ............. kh_kiehl01	[ 43, 33]
//  Big Door .................... kh_kiehl01	[174, 40]
//  Big_Door_2_Warp ............. kh_kiehl01	[174, 39]
//  Big Door .................... kh_kiehl01	[ 77,108]
//  Big_Door_3_Warp ............. kh_kiehl01	[ 68,108]
//  Big Door .................... kh_kiehl01	[ 41,177]
//  Big_Door_4_Warp ............. kh_kiehl01	[ 78,177]
//  Robots ...................... kh_kiehl01	[ 15,181]
//  Big Door .................... kh_kiehl01	[166,187]
//  Big_Door_5_Warp ............. kh_kiehl01	[166,186]
//  Kiehl_Room_Trap ............. kh_kiehl02	[ 49, 15]
//  Kiehl#Original .............. kh_kiehl02	[ 50, 52]
//  KiehlRoom ................... kh_kiehl02	[  1,  1]
//  Mitchell#KiehlRoom .......... kh_kiehl02	[ 49, 55]
//  Agent#KHAgent1 ....   ....... kh_kiehl02	[ 53, 52]
//  Agent#KHAgent2 .............. kh_kiehl02	[ 51, 49]
//  Agent#KHAgent3 .............. kh_kiehl02	[ 47, 50]
//  Agent#KHAgent4 .............. kh_kiehl02	[ 46, 53]
//  Kiehl#Copy .................. kh_kiehl02	[ 48, 53]
//  Kiehl_Roomn_Exit ............ kh_kiehl01	[ 50, 59]
//
//----------------------------------------------------------------------------
// [Functions]
//  None
//
//----------------------------------------------------------------------------
// [Conflicts]
//   Resolved
//
//============================================================================

//============================================================================
// Affiliated NPCs
//============================================================================

//----------------------------------------------------------------------------
// Juno Pub Master/Starting point.
//----------------------------------------------------------------------------
yuno_in01,35,179,4	script	Pub Master#kh	46,5,5,{
	if (checkweight(7487,1) == 0) {
		mes "[Vandt]";
		mes "¡Un momento! En este";
		mes "instante trae muchos items";
		mes "en su inventario. Es mejor que";
		mes "guarde todo en Kafra";
		mes "o no va a poder";
		mes "recoger cualquier cosa nueva...";
		close;
	}
	if (KielHyreQuest == 0) {
		mes "[Vandt]";
		mes "Hola, bienvenido";
		mes "a mi taberna. Digame,";
		mes "¿Qué desea tomar?";
		next;
		switch(select("Beer, please.","A cocktail, please.","Soju, please.","Maybe later.")) {
		case 1:
			mes "[Vandt]";
			mes "Muy bien, dejeme traerle";
			mes "un vaso de cerveza de";
			mes "barril. Ahí tiene, éste";
			mes "es nuestro especial Cerveza Schwaltz.";
			next;
			mes "^3355FF*Gulp gulp gulp*^000000";
			percentheal 5,-5;
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Ahhh, es realmente";
			mes "bueno! Esto realmente";
			mes "está bueno!";
			close;
		case 2:
			mes "[Vandt]";
			mes "Lo siento, pero tengo que";
			mes "entregar todos los ingredientes";
			mes "de nuestros cocteles a otros clientes.";
			mes "Talvez tenga suficiente para hacerte";
			mes "algo la próxima vez, ¿okay?";
			close;
		case 3:
			mes "[Vandt]";
			mes "¿S-soju? Lo siento,,";
			mes "pero no servimos eso";
			mes "aquí. Es más que una";
			mes "bebida de machos para mí...";
			close;
		case 4:
			mes "[Vandt]";
			mes "Claro, tome";
			mes "su tiempo, relajese";
			mes "y ordene algo";
			mes "cuando esté listo.";
			close;
		}
	}
	if (KielHyreQuest == 1) {
		mes "[Vandt]";
		mes "Hola, bienvenido";
		mes "a mi taberna. ¿Así que";
		mes "que te gustaría tomar?";
		next;
		switch(select("Beer, please:A cocktail, please:Soju, please.:You look worried, what's up?:Cancel")) {
		case 1:
			mes "[Vandt]";
			mes "Muy bien, permiteme traerte";
			mes "un vaso de cerveza de";
			mes "barril. Aquí tienes, está es";
			mes "nuestra cerveza especial Schwaltz.";
			next;
			mes "^3355FF*Gulp gulp gulp*^000000";
			percentheal 5,-5;
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Ahhh, Realmente es";
			mes "buena! Es realmente";
			mes "buena!";
			close;
		case 2:
			mes "[Vandt]";
			mes "Lo siento, pero tengo que";
			mes "entregar todos los ingredientes";
			mes "de nuestros cocktails a otros clientes.";
			mes "Talvez tendré suficiente para hacerte";
			mes "algo la proxima vez, okay?";
			close;
		case 3:
			mes "[Vandt]";
			mes "S-soju? Lo siento,";
			mes "pero no servimos eso";
			mes "aquí. Es mucho más";
			mes "que una bebida de machos para mi..";
			close;
		case 4:
			mes "[Vandt]";
			mes "Ah, ¿Escuchó por casualidad?";
			mes "Lo siento, es solo que";
			mes "uno de mis empleados tubo un";
			mes "accidente y sufrio heridas graves,";
			mes "asi que no tengo a nadie que pueda";
			mes "entregar esta mercancía.";
			next;
			mes "[Vandt]";
			mes "Tengo una orden urgente";
			mes "que necesito enviar a";
			mes "la Academia Kiel Hyre,";
			mes "pero no puedo encontrar a alguien";
			mes "que esté disponible para ésta";
			mes "clase de trabajo temporal.";
			next;
			switch(select("I'm sorry to hear that:Do you want me to help you?")) {
			case 1:
				mes "[Vandt]";
				mes "Bueno, estoy seguro que se me";
				mes "va a ocurrir algo.";
				mes "¿Conoces usted a alguien";
				mes "que podría estar interesado en";
				mes "un trabajo de media jornada?";
				close;
			case 2:
				mes "[Vandt]";
				mes "¿En serio? ¡Estupendo!";
				mes "Pero primero, creo que es justo";
				mes "decirle que este trabajo puede";
				mes "que no sea tan simple como piensas.";
				mes "Espero que completes la";
				mes "entrega, pase lo que pase.";
				next;
				switch(select("Sure I'll do it:Wait, let me think about it...")) {
				case 1:
					mes "[Vandt]";
					mes "Me alegra oir eso.";
					mes "Bueno entonces, por favor lleva";
					mes "esta botella de Culinary Wine a";
					mes "Mrs. ^ff0000Lecollane^000000 en la Academia";
					mes "Kiel Hyre. Te pagaré";
					mes "una vez termines el trabajo, ¿okay?";
					getitem 7487,1; //Tavern_Wine
					set KielHyreQuest,2;
					close;
				case 2:
					mes "[Vandt]";
					mes "Claro. Realmente necesito";
					mes "hacer ésta entrega, así que";
					mes "si no puedes hacerla, pero conoces a";
					mes "alguien capaz y responsable";
					mes "que pueda, entonces por favor";
					mes "hablales acerca de mi situación.";
					close;
				}
			}
		case 5:
			mes "[Vandt]";
			mes "Seguro, solo toma";
			mes "tu tiempo, relajate,";
			mes "y ordena algo";
			mes "cuando estés listo.";
			close;
		}
	}
	else if ((KielHyreQuest >= 2) && (KielHyreQuest < 6)) {
		mes "[Vandt]";
		mes "Por favor entrega esa botella";
		mes "de Vino que te dí a Mrs.";
		mes "Mrs. ^ff0000Lecollane^000000, quien debería estar";
		mes "dentro de la Academia Kiel Hyre.";
		mes "Apresurate y llévasela antes de que";
		mes "pueda quejarse acerca de la entrega.";
		close;
	}
	else if (KielHyreQuest == 6) {
		if (countitem(7487) == 0) {
			mes "[Vandt]";
			mes "Oh, has regresado.";
			mes "Gracias por hacer esa";
			mes "entrega. Solo dame";
			mes "un momento, y entonces podré";
			mes "pagarte en zeny, ¿okay?";
			next;
			select("Necesito más vino...");
			mes "[Vandt]";
			mes "Oh, ¿necesitas entregar";
			mes "otra botella? Muy bien,";
			mes "dejame echar un vistazo, y";
			mes "te daré el vino y";
			mes "el pago por la entrega.";
			next;
			mes "^3355FFBuscando Buscando^000000";
			mes "^3355FFBuscando Buscando^000000";
			next;
			mes "[Vandt]";
			mes "¡Ya está!";
			mes "Muchas gracias";
			mes "por ayudarme~";
			getitem 7487,1; //Tavern_Wine
			set zeny,zeny+1000;
			close;
		}
		else {
			mes "[Vandt]";
			mes "¡Heh! Muchas gracias";
			mes "por ayudarme esa";
			mes "última vez. Sabía que te pregunte";
			mes "inesperadamente, pero";
			mes "¡terminaste siendo un salvador!";
			mes "Realmente lo aprecio!";
			close;
		}
	}
	else {
		mes "[Vandt]";
		mes "Realmente eres un buen";
		mes "trabajador, sabías eso?";
		mes "Confiable, responsable,";
		mes "dispuesto a ayudar a otros y";
		mes "proactivo también! creo que";
		mes "llegarás lejos en la vida, chico, de verdad lo creo~";
		close;
	}

//OnTouch2:
OnTouch:
	if (KielHyreQuest < 1) {
		mes "[Vandt]";
		mes "Arrrggghhh....";
		mes "Esto no puede ser bueno...";
		mes "¡Esto no esta bien definitivamente!";
		mes "¿Qué se supone debo hacer?";
		set KielHyreQuest,1;
		close;
	} 
}

//----------------------------------------------------------------------------
// Juno Toast Sales Girl.
//----------------------------------------------------------------------------
yuno,217,114,6	script	Little Kid#kh	96,{
	if (KielHyreQuest < 6) {
		mes "[Cezu]"; 
		mes "¡Tostada fresca y crujiente!";
		mes "Si quieres un poco, ¡ven";
		mes "y toma algo de tostaaaada!";
		close;
	}
	else if (KielHyreQuest == 6) {
		if (KHToastGirlEnd < 1) {
			mes "[Cezu]"; 
			mes "¡Tostada fresca y crujiente!";
			mes "Si quieres un poco, ¡ven";
			mes "y come algo de tostaaaada!";
			mes "Oh! Hi hi~ ¿Quería comprar";
			mes "algo de tostada?";
			next;
			switch(select("I'm here for Elly:No, thanks")) {
			case 1:
				mes "[Cezu]"; 
				mes "Ah, ya veo. Elly debe";
				mes "haber gastado de nuevo";
				mes "otro lote de ingredientes. Bueno,";
				mes "ella es una cliente regular,";
				mes "La verdad quisiera ayudar, pero";
				mes "en realidad no puedo hacer nada.";
				next;
				mes "[Cezu]"; 
				mes "Como puedes ver,";
				mes "me quede sin ingredientes!";
				mes "Pero no puedo irme";
				mes "a conseguir más. ¿Qué sí";
				mes "la gente quiere comprar tostada?";
				mes "Escucha, puedes ayudarme?";
				next;
				mes "[Cezu]"; 
				mes "Podrias ir a conseguirme";
				mes "algo de harina y huevos";
				mes "del ^3355FFLighthalzen Windmill^000000";
				mes "Luego, cuando regreses, puedo";
				mes "dividir los ingredientes, y";
				mes "podras enviarle unos a Elly.";
				next;
				mes "[Cezu]"; 
				mes "Se que básicamente te";
				mes "estoy enviando a hacer todo";
				mes "por ti mismo, pero porfavor";
				mes "trata de entender que mis manos";
				mes "estan atadas. No preguntes";
				mes "porque, solo lo estan!";
				set KHToastGirlEnd,1;
				close;
			case 2:
				mes "[Cezu]";
				mes "Okay Okay~";
				mes "¡Por favor ven cuando gustes!";
				close;
			}
		}
		else if (KHToastGirlEnd == 1) {
			mes "[Cezu]";
			mes "Podrías ir a";
			mes "Lighthalzen Windmill";
			mes "y decirles que Cezu necesita";
			mes "mucha harina y muchos huevos!";
			mes "Luego, traeme todas las cosas";
			mes "a mi lo mas pronto posible~";
			close;
		}
		else if (KHToastGirlEnd == 2) {
			mes "[Cezu]";
			mes "Hey, regresaste con los";
			mes "ingredientes! Muchas Gracias,";
			mes "enverdad los necesitaba!";
			mes "Ahora ve y dale la harina";
			mes "y los huevos a Elly, y";
			mes "dale mis saludos. Nos vemos~";
			delitem 7488,1; //Delivery_Package
			getitem 7488,1; //Delivery_Package
			set KHToastGirlEnd,3;
			close;
		}
	}
	else if ((KielHyreQuest >= 6) || (KHToastGirlEnd == 3)) {
		//KHToastGirlEnd no longer needed-- deleting.
		set KHToastGirlEnd,0;
		mes "[Cezu]";
		mes "Caliente, fresco y";
		mes "cruuuujiente pan tostado!";
		mes "Vengan por su pan tostado!";
		close;
	}
}

//----------------------------------------------------------------------------
// Lighthalzen WindMill Owner.
//----------------------------------------------------------------------------
lighthalzen,366,299,4	script	Windmill Owner#kh	46,{
	if (checkweight(7488,1) == 0) {
		mes "[Mills]";
		mes "Hey, ahora mismo traes";
		mes "muchas cosas contigo. ";
		mes "Pon tu basura en Kafra Storage";
		mes "si esperas que te de algo.";
		mes "Para eso viniste";
		mes "o ¿no?";
		close;
	}
	if (KHToastGirlEnd < 1) {
		mes "[Mills]";
		mes "¿Hey, que quieres?";
		mes "Estoy muy ocupada";
		mes "ahora, asi que podrias venir";
		mes "más tarde? Entonces hablaremos.";
		close;
	}
	else if (KHToastGirlEnd == 1) {
		mes "[Mills]";
		mes "¿Hey, que quieres?";
		mes "Justo acabas de";
		mes "agarrarme en un buen momento,";
		mes "pero si necesitas algo,";
		mes "sera mejor que me lo digas ya";
		mes "antes que las cosas se pongan agitadas otra vez.";
		next;
		switch(select("I'm here for Cezu:......")) {
		case 1:
			mes "[Mills]";
			mes "Oh, Cezu del";
			mes "puesto de Pan? Okay,";
			mes "Tengo todo lo que";
			mes "Kid necesita.";
			mes "Hay huevos adentro,";
			mes "asi que se muy cuidadoso con eso.";
			mes "Está listo para ti...";
			next;
			mes "[Mills]";
			mes "Kid es un cliente muy regular,";
			mes "asi que no tienes que";
			mes "pagarme,";
			mes "o algo por el estilo. Yeah,";
			mes "sé como la gente trata";
			mes "a los aventureros. Bueno, nos vemos.";
			getitem 7488,1; //Delivery_Package
			set KHToastGirlEnd,2;
			close;
		case 2:
			mes "[Mills]";
			mes "......";
			mes "Um, okay, bueno, si";
			mes "necesitas algo,";
			mes "solo grita, supongo.";
			mes "Cuts, Cutz dondé estas?";
			mes "Espero y no estes metiendo la pata!";
			close;
		}
	}
	else if (KHToastGirlEnd >= 2) {
		mes "[Mills]";
		mes "Ese Cutz es un";
		mes "pequeño bribon. El tipo";
		mes "cree que puede hacerse el tonto";
		mes "por ahi cuando tiene tiempo..!";
		mes "Ah bueno.. el sabe que no puedo";
		mes "encontrar un mejor asistente. Ya aprenderá..";
		close;
	}
}

lighthalzen,366,289,2	script	Windmill Owner's Helper	97,{
	if (KHToastGirlEnd < 1) {
		mes "[Cutz]";
		mes "¿Hombre, porqué siempre";
		mes "estamos tan ocupados?";
		mes "Porque Mills tiene que";
		mes "hacerme trabajar a morir?";
		mes "Eh, es un vivo, supongo..";
		close;
	}
	else if (KHToastGirlEnd >= 2) {
		mes "[Cutz]";
		mes "Q-Que te hace";
		mes "pensar que meto la pata,";
		mes "Mills? Mira, mira,";
		mes "mis manos estan ocupadas,";
		mes "Estoy ocupado, estoy trabajando!";
		close;
	}
	else {
		mes "[Cutz]";
		mes "Hey, tu eres del";
		mes "Puesto de Pan de Cezu,";
		mes "no? ¿Cómo está";
		mes "la pequena Cezu?";
		close;
	}
}

//============================================================================
//Kiel Hyre Academy NPCs
//============================================================================

//----------------------------------------------------------------------------
// Girl (Talks about the academy)
//----------------------------------------------------------------------------
yuno_fild08,196,196,5	script	Hanie#kh1	102,{
	mes "[Hanie]";
	mes "Oh, desearia poder estudiar";
	mes "en la Academia Kiel Hyre...";
	mes "Todos los graduados tienen";
	mes "un buenos trabajos! Estoy muy";
	mes "celoso de los estudiantes!";
	next;
	select("¿Academia Kiel Hyre?");
	mes "[Hanie]";
	mes "Oh,la Academia Kiel Hyre";
	mes "es una escuela fundada por Kiel";
	mes "Hyre, un inventor que se hizó";
	mes "rico con sus extranas máquinas.";
	mes "Decidio retribuirle a la sociedad";
	mes "contruiendo ésta academia privada.";
	next;
	mes "[Hanie]";
	mes "Pero, la escuela solo";
	mes "acepta huerfanos que son";
	mes "demasiado pobres como para pagar otras";
	mes "escuelas. A veces, me hace";
	mes "desear que fuera huerfano!";
	mes "Bueno, no realmente, pero me entiendes..";
	close;
}


//----------------------------------------------------------------------------
// Academy Security Guards
//----------------------------------------------------------------------------
yuno_fild08,158,194,6	script	Security Guard#1::KHAGuard	852,{
	if ((KielHyreQuest < 2) || (KielHyreQuest > 31)) { 
		mes "[Security Guard]";
		mes "Lo siento, si no estas";
		mes "asociado con esta institución,";
		mes "entonces no estas autorizado para";
		mes "entrar a la^FF0000Academia Kiel Hyre^000000.";
		mes "Porfavor retirese si no";
		mes "tiene una cita con el Staff.";
		close;
	}
	else if (KielHyreQuest == 2) { 
		mes "[Security Guard]";
		mes "Lo siento, si no estas";
		mes "asociado con esta institución,";
		mes "entonces no estas autorizado para";
		mes "entrar a la ^FF0000 Academia Kiel Hyre ^000000.";
		mes "Porfavor retirese si no tiene";
		mes "una cita con el Staff.";
		next;
		switch(select("I'm here for a delivery.:......")) {
		case 1:
			mes "[Security Guard]";
			mes "¿Estas aquí para entregar";
			mes "algo? Ok, solo dame";
			mes "el nombre del ^FF0000destinatario^000000,";
			mes "seguido del ^FF0000item^000000 que";
			mes "entregas, y lo verificaré";
			mes "antes de dejarte entrar.";
			next;
			input .@KHDelivery$;
			if (.@KHDelivery$ != "Lecollane") {
				mes "[Security Guard]";
				mes "Estas aqui para entregar";
				mes "Vino a.. a quién? ¿Cuál era";
				mes "el nombre?...no creo que";
				mes "haiga una persona que";
				mes "se llame asi en la academia. "+.@KHDelivery$+"";
				close;
			}
			input .@KHDelivery$ ;
			if (.@KHDelivery$ != "Culinary Wine") {
				mes "[Security Guard]";
				mes "¿Así que estas aqui para";
				mes "entregarle un paquete a Mrs. Lecollane?";
				mes "¿Qué es lo que trajisté";
				mes "para ella? Algo ^3355FF"+.@KHDelivery$+"^000000?";
				next;
				mes "[Security Guard]";
				mes "Dejame llamarle primero,";
				mes "y revisar que ella te";
				mes "esté esperando.";
				mes "Veamos ahora...";
				next;
				mes "......";
				mes ".........";
				mes "............";
				next;
				mes "[Security Guard]";
				mes "Huh!. Mrs Lecollane";
				mes "esta esperando un paquete";
				mes "pero no es lo";
				mes "que dijiste que traes para";
				mes "ella. Talvez quisieras revisar";
				mes "si esta todo bien...";
				close;
			}
			mes "[Security Guard]";
			mes "Muy bien...";
			mes "¿Así que estas aquí";
			mes "para entregar una botella";
			mes "de Vino a Mrs. Lecollane?";
			mes "Dejame llamarla, y";
			mes "confirmar rápido.";
			next;
			mes "......";
			mes ".........";
			mes "............";
			next;
			mes "[Security Guard]";
			mes "Ok, todo parece estar";
			mes "en orden. Mrs. Lecollane";
			mes "ha estado esperandote.";
			mes "Supongo que ya puedes entrar.";
			close2;
			warp "kh_school",71,155;
			end;
		case 2:
			mes "[Security Guard]";
			mes "Si no tienes";
			mes "una cita, entonces";
			mes "no estes vagando";
			mes "por la academia!";
			close;
		}
	}
	else if (KielHyreQuest < 32) { 
		mes "[Security Guard]";
		mes "¿Oh, tienes otra";
		mes "cosa que hacer";
		mes "en la academia? Te recuerdo";
		mes "de antes, así que";
		mes "no debería de haber ningun problema";
		mes "dejandote entrar de nuevo...";
		close2;
		warp "kh_school",71,155;
		end;
	}
}

yuno_fild08,158,183,7	duplicate(KHAGuard)	Security Guard#2	852

//----------------------------------------------------------------------------
// Gossiping Teenagers/Story NPCs
//----------------------------------------------------------------------------
kh_school,57,142,6	script	Student#kha	893,3,3,{
	mes "[Laci]";
	mes "Oh, wow! Normalmente";
	mes "no tenemos visitantes en";
	mes "el campus! ¿Em, no eres";
	mes "un nuevo miembro de la facultad, o si?";
	close;

OnTouch:
	mes "[Laci]";
	mes "Hey, Nesha....!";
	mes "has escuchado el porque";
	mes "¿Aaci no ha estado viniendo";
	mes "a clases desde hace tiempo?";
	next;
	mes "[Gui Nesha]";
	mes "Cierto, no he visto";
	mes "a Aaci hace tiempo.";
	mes "¿Pasó algo?";
	next;
	mes "[Laci]";
	mes "Es porque...";
	mes "¡Aaci vió un fantasma!";
	mes "Es cien por ciento";
	mes "cierto! Escuché acerca de eso,";
	mes "bueno, tu sabes, mis contactos.";
	next;
	mes "[Gui Nesha]";
	mes "¿...Qué...?";
	mes "Oh vamos,";
	mes "sal del pueblo.";
	close;
}

kh_school,57,139,0	script	Student#khb	893,{
	mes "[Gui Nesha]";
	mes "¿Acaso no somos un";
	mes "poco grandes para hablar de";
	mes "este tipo de cosas?";
	mes "¿Tu sabes, rumores e historias de fantasmas";
	mes "que no tienen sentido?";
	mes "Ah vamos!";
	emotion e_swt2;
	close;
}

//----------------------------------------------------------------------------
// Mrs. Lecollane
//----------------------------------------------------------------------------
kh_school,176,60,4	script	Lady#kh	101,{
	if (KielHyreQuest < 2) {
		mes "[Mrs. Lecollane]";
		mes "¿Algun problema?";
		mes "Los extraños no tienen permitido";
		mes "entrar aquí, así que porfavor retirate.";
		close;
	}
	else if (KielHyreQuest == 2) { 
		mes "[Mrs. Lecollane]";
		mes "Oh, hola. Ah!";
		mes "¿has venido a";
		mes "entregar mi vino? El";
		mes "guardia llamó";
		mes "y dijo que venías.";
		next;
		switch(select("Yes, that's right!:Er, s-sorry!")) {
		case 1:
			mes "[Mrs. Lecollane]";
			mes "Bueno, has llegado un poco mas";
			mes "tarde de lo que pensaba, pero";
			mes "supongo que no se puede hacer nada.";
			mes "Creo que la espera a";
			mes "aumentado mi expectativa";
			mes "por esta botella de vi--";
			next;
			mes "^3355FF*'¡Cling! ¡Crrrack!*^000000";
			next;
			mes "[Mrs. Lecollane]";
			mes "¿Elly? ¿Elly acaso";
			mes "rompiste algo otra vez?";
			mes "¡Tienes que ser mas cuidadosa!";
			mes "Si no terminas de hornear esas";
			mes "galletas para el final del día, tus";
			mes "calificaciones semestrales sufrirán!";
			next;
			mes "[Elly]";
			mes "P-Pero yo sólo..";
			next;
			mes "[Mrs. Lecollane]";
			mes "^FF0000Elly ^000000!!";
			next;
			mes "[Elly]";
			mes "......";
			mes "Si, Mrs. Lecollane.";
			next;
			mes "[Mrs. Lecollane]";
			mes "*Ahem* Disculpe.";
			mes "¿Podría dejarme";
			mes "el vino aquí? Ya";
			mes "puede irse, y porfavor";
			mes "no este vagando sin necesidad";
			mes "por la academia.";
			delitem 7487,1; //Tavern_Wine
			set KielHyreQuest,4;
			close;
		case 2:
			mes "[Mrs. Lecollane]";
			mes "Hm....?";
			mes "Supongo que me";
			mes "estoy equivocando, lo";
			mes "siento, pense que tu";
			mes "eras otra persona.";
			close;
		}
	}
	else if (KielHyreQuest == 4) {
		mes "[Mrs Lecollane]";
		mes "Bueno, nuestro trabajo esta";
		mes "completo, asi que podrias";
		mes "porfavor dejar el Campus";
		mes "lo mas pronto que puedas? *Suspiro*";
		mes "No puedo creer que nuestro futuro";
		mes "este en las manos de esta niña...";
		close;
	}
}

//----------------------------------------------------------------------------
// Elly (In school)
//----------------------------------------------------------------------------
kh_school,179,39,0	script	Cute Student#kh	895,{
	if (checkweight(908,200) == 0) {
		mes "[Elly]";
		mes "¿Lo siento, pero podrías";
		mes "poner algunas de tus cosas en";
		mes "el Kafra Storage?";
		mes "No puedo ayudarte";
		mes "cuando estas llevando ";
		mes "tantas cosas.";
		close;
	}
	cutin "kh_elly01",2;
	if (KielHyreQuest < 4) { 
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "W-wah! Oh....!";
		mes "^333333*Phew*^000000 Eso estuvo cerca,";
		mes "Por poco y las tiro ";
		mes "de nuevo! ¿Porqué tengo tantos";
		mes "problemas cargando ingredientes?";
	}
	else if (KielHyreQuest == 4) { 
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "¿Oh no, que debo";
		mes "hacer? ^333333*Sollozo*^000000 ¿Q-Qué";
		mes "es lo que voy hacer? ^333333*Llanto*^000000";
		next;
		switch(select("What happened?:......")) {
		case 1:
			mes "[Elly]";
			mes "Debo terminar de hornear";
			mes "este lote de galletas antes del";
			mes "fin de la tarde, pero derramé";
			mes "todos los ingredientes en el";
			mes "piso. No sé como podré";
			mes "hornear esas galletas ahora...";
			next;
			switch(select("What can I do to help you?:Oh, I'm so sorry.")) {
			case 1:
				cutin "kh_elly02",2;
				mes "[Elly]";
				mes "¿Qué dijisté...?";
				mes "¿De verdad me";
				mes "ayudarás? Maraviloso!";
				mes "¡Gracias! ¡Muchisimas Gracias!";
				next;
				break;
			Case 2:
				mes "[Elly]";
				mes "¿Espera, no pertecenes a";
				mes "esta escuela verdad?";
				mes "¿E-eres uno de";
				mes "esos aventureros, cierto?";
				next;
				select("Si, es cierto.");
				mes "¿Escucha, se que";
				mes "probablemente tienes tus propios";
				mes "planes, pero crees que";
				mes "puedas ayudarme con este";
				mes "enorme problema que tengo?";
				next;
				switch(select("Accept:Decline")) {
				case 1:
					cutin "kh_elly02",2;
					mes "¡Que maravilla!";
					mes "Gracias! Muchas gracias!";
					mes "Se supone que debería";
					mes "terminar de hornear este montón de";
					mes "galletas pronto, pero derramé";
					mes "todos los ingredientes...";
					next;
					break;
				case 2:
					mes "["+strcharinfo(0)+"]";
					mes "Me largo de aquí.";
					next;
					cutin "kh_elly04",2;
					mes "[Elly]";
					mes "E-espera...!";
					mes "Regresa,  no";
					mes "p-puedes...! Realmente";
					mes "necesito algo de ayuda!";
					emotion e_sob;
					close2;
					cutin "",255;
					end;
				}
			}
			cutin "kh_elly01",2;
			mes "[Elly]";
			mes "Bueno, supongo que la única forma";
			mes "de que hornee estas galletas es";
			mes "conseguir nuevos ingredientes.";
			mes "Siento ser tanta carga,";
			mes "pero si no te ofrecieras a ayudarme,";
			mes "no tendría a nadie a quien pedirle el favor!";
			next;
			cutin "kh_elly04",2;
			mes "[Elly]";
			mes "No entiendes lo importante";
			mes "que es que hornee";
			mes "estas galletas... Si no termino";
			mes "esta asignación, entonces";
			mes "Mrs. Crank me reprobará";
			mes "el semestre entero!";
			next;
			mes "[Elly]";
			cutin "kh_elly01",2;
			mes "Ok, necesito calmarme.";
			mes "Creo que puedo hacer";
			mes "esto con tu ayuda.";
			mes "¿Podrías hacerme";
			mes "este gran favor y traerme";
			mes "los siguientes ingredientes?";
			next;
			mes "[Elly]";
			mes "^3355FF1 Wine^000000,";
			mes "^3355FF7 Milks^000000,";
			mes "^3355FF5 Cacaos^000000,";
			mes "^3355FF2 Cheeses^000000,";
			mes "^3355FF1 Egg^000000, y";
			mes "^3355FF1 Bag of Flour^000000.";
			next;
			mes "[Elly]";
			mes "Veamos... Puedes conseguir";
			mes "el Wine de un bar en";
			mes "Juno, Cacaos cazando";
			mes "Yoyos, y puedes conseguir Flour";
			mes "y Eggs de esa chica que";
			mes "atiende el Puesto de Tostadas en Juno.";
			next;
			mes "[Elly]";
			mes "Buena suerte consiguiendo";
			mes "todo, espero que";
			mes "vuelvas pronto con";
			mes "esos ingredientes para las galletas";
			mes "tan rápido como puedas, okay?";
			set KielHyreQuest,6;
			break;
		case 2:
			mes "[Elly]";
			mes "*Sollozo*...";
			break;
		}
	}
	else if (KielHyreQuest == 6) {
		if ((countitem(519) < 7) || (countitem(548) < 2) || (countitem(7182) < 5) || (countitem(7487) < 1) || (countitem(7488) < 1)) {
			mes "[Elly]";
			mes "¿Veamos, te gustaría";
			mes "recordarme que";
			mes "ingredientes necesito?";
			mes "Por favor trae estas cosas";
			mes "tan rápido como puedas para que";
			mes "pueda hornear rápidamente las galletas~";
			next;
			mes "[Elly]";
			mes "^3355FF1 Wine^000000,";
			mes "^3355FF7 Milks^000000,";
			mes "^3355FF5 Cacaos^000000,";
			mes "^3355FF2 Cheeses^000000,";
			mes "^3355FF1 Egg^000000, y";
			mes "^3355FF1 Bag of Flour^000000.";
			next;
			cutin "kh_elly01",2;
			mes "[Elly]";
			mes "Veamos... Puedes conseguir";
			mes "Wine de un bar en";
			mes "Juno, Cacaos cazando";
			mes "Yoyos, y puedes conseguir Flour";
			mes "y Eggs de esa chica que";
			mes "atiende el Puesto de Tostadas en Juno.";
		}
		else {
			cutin "kh_elly02",2;
			mes "[Elly]";
			mes "Hurraa! Finalmente, tengo";
			mes "todo lo que necesito! ¡Esto es";
			mes "grandioso! ¿Oh, podrías por favor";
			mes "darme un momento mientras horneo";
			mes "estas galletas? No debería tardarme";
			mes "mucho, espera un poco.";
			delitem 519,7; //Milk
			delitem 548,2; //Cheese
			delitem 7182,5; //Cacao
			delitem 7487,1; //Tavern_Wine
			delitem 7488,1; //Delivery_Package
			set KielHyreQuest,8;
			//KHPubMasterEnd no longer needed-- deleting.
			set KHPubMasterEnd,0;
			emotion e_ho;
		}
	}
	else if (KielHyreQuest == 8) {
		mes "[Elly]";
		mes "Tadah! Lo logré!";
		mes "¡Finalmente están listas!";
		mes "Las galletas especiales de Elly.";
		mes "Quisiera regalarte algunas";
		mes "como agradecimiento por tu gran ayuda.";
		next;
		mes "[Elly]";
		mes "Lo siento, pero estaba";
		mes "tan preocupada horneando";
		mes "estas galletas que ni siquiera";
		mes "te pregunté tu nombre. Me llamo";
		mes "^FF0000Ellyja^000000, pero todos me dicen";
		mes "''Elly.'' ¿Cómo te llamas?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^3355FF"+strcharinfo(0)+"^000000.";
		mes "Me llamo ^3355FF"+strcharinfo(0)+"^000000.";
		next;
		cutin "kh_elly02",2;
		mes "[Elly]";
		mes ""+strcharinfo(0)+"?";
		mes "...ese nombre! Es maravilloso!";
		getitem 538,5; //Well_Baked_Cookie
		set KielHyreQuest,10;
	}
	else if (KielHyreQuest == 10) {
		mes "[Elly]";
		mes "Lo siento, pero tengo";
		mes "otro favor que pedirte";
		mes "si no tienes problemas en ayudarme";
		mes "otra vez. No te preocupes,";
		mes "no tendrás que apurarte";
		mes "tanto como lo hiciste la última vez.";
		next;
		switch(select("What do you need?:Sorry, but I'm pretty busy...")) {
		case 1:
			mes "[Elly]";
			mes "¿Sabes esas galletas";
			mes "que me ayudaste a cocinar?";
			mes "Es la primera vez que puedo hacerlas";
			mes "sin quemarlas!";
			mes "Se que el Abuelo";
			mes "estaría tan orgulloso de mí!";
			next;
			mes "[Elly]";
			mes "Realmente quiero que él";
			mes "pruebe estas galletas que horneé,";
			mes "pero ya estarán duras";
			mes "para el momento en el que pueda dejar";
			mes "el campus. ¿Puedes entregarle estas";
			mes "galletas a mi abuelo por mi?";
			next;
			switch(select("Sure:I'm busy.")) {
			case 1:
				cutin "kh_elly02",2;
				mes "[Elly]";
				mes "Oh, "+strcharinfo(0)+"!";
				mes "Muchísimas gracias, sabía";
				mes "que entenderías! Podrías";
				mes "por favor llevarle las galletas";
				mes "al ^FF0000Kiel Hyre's cottage^000000?";
				next;
				mes "[Elly]";
				mes "Ah, cierto! Son muy cuidados";
				mes "con los visitantes y";
				mes "mantienen a los desconocidos fuera de la propiedad,";
				mes "pero si mencionas";
				mes "mi nombre, te dejarán entrar.";
				mes "Perfecto entonces, nos vemos~";
				set KielHyreQuest,12;
				break;
			case 2:
				cutin "kh_elly03",2;
				mes "[Elly]";
				mes "Oh, um...";
				mes "Okay, siento";
				mes "haberte molestado...";
				break;
			}
			break;
		case 2:
			cutin "kh_elly03",2;
			mes "[Elly]";
			mes "Oh, um...";
			mes "Okay, siento";
			mes "haberte molestado...";
			break;
		}
	}
	else if (KielHyreQuest == 12) {
		mes "[Elly]";
		mes "Oh, no sabes donde";
		mes "queda el Kiel Hyre's cottage?";
		mes "Está al norte de esta";
		mes "academia. Por favor entregale mis";
		mes "galletas al abuelo, y";
		mes "dejale saber que realmente lo extraño.";
	}
	else if (KielHyreQuest == 14) {
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "Hm? Mi abuelo ni está";
		mes "en casa? Eso es extraño, el";
		mes "no menciono nada acerca";
		mes "de ningun viaje de negocios. Yo pensé";
		mes "que él estaría en casa todo el dia...";
		next;
		cutin "kh_elly04",2;
		mes "[Elly]";
		mes "Regresarías a su";
		mes "casa de campo una vez más? Toma,";
		mes "puedes usar ésta Cottage Key.";
		mes "De esa manera, puedes entrar";
		mes "y hablar con él~";
		getitem 7489,1; //Villa_Spare_Key
		set KielHyreQuest,16;
	}
	else if ((KielHyreQuest >= 14) && (KielHyreQuest < 20)) {
		mes "[Elly]";
		mes "Eso es muy raro...";
		mes "Pense que mi abuelo";
		mes "dijó que estaría en";
		mes "casa todo el día....";
	}
	else if (KielHyreQuest == 20) {
		mes "[Elly]";
		mes "Hmm....?";
		mes "Qué es esto,,";
		mes "una carta para mi?";
		next;
		mes "^3355FFElly abrio el sobre";
		mes "y comenzo a leer la carta.^000000";
		next;
		mes "^333333Querida Elly,";
		mes " ";
		mes "Tengo algo que discutir";
		mes "con mi hijo Kiehl, así que";
		mes "me voy a reunirme con él.";
		mes "Su sabes nada de mi";
		mes "después de 7 días de que yo haya escrito";
		mes "ésta carta, entonces debes escapar";
		mes "de la academia tan pronto";
		mes "como te sea posible,  y recuperar";
		mes "algo dentro de nuestro ";
		mes "estudio de la casa de campo.";
		mes " ";
		mes "Si tienes un amigo en el que";
		mes "puedas confiar, pidele";
		mes "que siga mis huellas en la";
		mes "casa de campo. Yo podría estar en peligro,";
		mes "y en necesidad urgente de rescate.";
		mes " ";
		mes "Elly, no confies en nadie";
		mes "de la academia, ni en tus";
		mes "compañeros de clases, ya que pueden";
		mes "estar influenciados por Kiehl.";
		mes " ";
		mes "Ten cuidado, y te amo.";
		mes " ";
		mes "--Abuelo^000000";
		next;
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "Qué? Oh no, han pasado";
		mes "10 días desde que escribió";
		mes "esta carta! Ah, esto";
		mes "significa que está en peligro?!";
		mes "Oh no, qué debería hacer?";
		delitem 7490,1; //Letter_to_Elly
		set KielHyreQuest,22;
	}
	else if (KielHyreQuest == 22) {
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "......";
		mes ".........";
		mes "............";
		next;
		switch(select("About your grandpa:Tell me about Kiehl:What's with this academy?")) {
		case 1:
			mes "[Elly]";
			mes "Oh! Mi abuelo es";
			mes "Kiel Hyre, fundador y";
			mes "CEO de la fundación";
			mes "Kiel Hyre. Él se ve";
			mes "estricto y frío de corazón,";
			mes "pero de hecho él es muy agradable!";
			next;
			mes "[Elly]";
			mes "No estamos emparentados";
			mes "por la sangre, pero él ha cuidado";
			mes "de mi desde que";
			mes "perdí a mis padres. Oh,";
			mes "Abuelo, dondé estas?";
			mes "Me estoy preocupando mucho!";
			break;
		case 2:
			mes "[Elly]";
			mes "Kiehl? Ese es el";
			mes "hijo de mi abuelo...";
			mes "No lo conosco";
			mes "muy bien, y solo lo ví";
			mes "una vez en un evento en la academia.";
			next;
			mes "[Elly]";
			mes "Mmm, él es un tipo de buen ver";
			mes "de piel pálida, cabello plateado,";
			mes "y ésta fria, fiera mirada";
			mes "fija. Muchos de mis compañeros de clases";
			mes "adoran a Kiehl porque él";
			mes "también es un genio de los negocios~";
			next;
			mes "[Elly]";
			mes "Es raro piensé...";
			mes "No tengo idea de porque mi";
			mes "abuelo y Kiehl no se";
			mes "llevan bien. Ambos son";
			mes "muy buenos en lo que hacen...";
			break;
		case 3:
			mes "[Elly]";
			mes "Bueno, se que la seguridad";
			mes "aquí es realmente estricta, pero";
			mes "eso es porque aquí todo";
			mes "es muy lujoso y";
			mes "caro, tu sabes~";
			next;
			mes "[Elly]";
			mes "Nosotros también tenemos un";
			mes "curriculum muy especial en donde";
			mes "aprendes más de lo que";
			mes "quieres. Personalmente, yo quiero";
			mes "llegar a ser una gran mujer de profesión";
			mes "como ^0000FFMs. Allysia^000000. Heh heh~";
			next;
			mes "[Elly]";
			mes "Éste lugar ciertamente";
			mes "no es como otras escuelas.";
			//mes "You already know that only";
			mes "Yeah, todo está hecho para";
			mes "ajustarse a las necesidades de cada estudiante.";
			next;
			mes "[Elly]";
			mes "Recientemente, creo?";
			mes "Algunas cosas raras";
			mes "han estado pasando. Todos mis";
			mes "compañeros de clases tienen miedo de";
			mes "salir solos.";
			next;
			cutin "kh_elly02",2;
			mes "[Elly]";
			mes "Pero estará bien!";
			mes "Tu estarás ahi para";
			mes "rescatarme del peligro,";
			mes "verdad, "+strcharinfo(0)+"?";
			next;
			switch(select("Who is Ms. Allysia?:Strange incidents?")) {
			case 1:
				mes "[Elly]";
				mes "Oh, Ms. Allysia es la";
				mes "secretaria de mi Abuelo~";
				mes "Ella es tan bella, y";
				mes "mi abuelo realmente";
				mes "le confia todo.";
				break;
			case 2:
				cutin "kh_elly04",2;
				mes "[Elly]";
				mes "Bueno, "+strcharinfo(0)+"...";
				mes "Se supone que no debería decirselo";
				mes "a nadie de fuera de la escuela,";
				mes "pero puedo confiar en ti! Ya ves...";
				mes "Somos cazados por un fantasma!";
				next;
				mes "[Elly]";
				mes "Se que suena loco,";
				mes "pero éste fantasma vaga por el";
				mes "campus, y maldice a sus victimas,";
				mes "haciendolas tan frias y sin vida.";
				mes "Eso le pasó a mi compañera de cuarto,";
				mes "Mayo. Es como si fuera una estatua...";
				next;
				mes "[Elly]";
				mes "Yo entré a hurtadillas al";
				mes "consultorio para verla, y ella...";
				mes "Ella no podía hacer nada!";
				mes "Qué pasaría si el";
				mes "fantasma decidiera maldecirme?!";
				next;
				cutin "kh_elly02",2;
				mes "[Elly]";
				mes "Sabes que...?";
				mes "Si alguna vez fuera maldecida";
				mes "por un fantasma, solo grita";
				mes "''^FF0000Wake up, Elly!^000000''";
				mes "Eso seguro me despertará!";
				set KielHyreQuest,24;
				break;
			}
		}
	}
	else if (KielHyreQuest >= 24 && KielHyreQuest <= 26) {
		cutin "kh_elly04",2;
		mes "[Elly]";
		mes "Argh, estoy en un apuro!";
		mes "Tengo que terminar mi";
		mes "tarea antes del vencimiento!";
		mes "Yeah, tengo que ir a ver a";
		mes "Mrs. Lecollane ahora.";
		next;		
		mes "[Elly]";
		mes "Di, "+strcharinfo(0)+",";
		mes "si está bien, podrías";
		mes "ir a buscar lo que mi";
		mes "abuelo dejó para mi";
		mes "en el ^FF0000estudio de la casa de campo^000000? Tu eres";
		mes "el único en quien puedo confiar!";
		next;
		mes "[Elly]";
		mes "De cualquer forma, te veré más tarde";
		mes "en la noche! Por favor entra";
		mes "por mi ^FF0000dormitorio^000000. Um, los";
		mes "dormitorios están en la iglesia justo";
		mes "detras de la academia. okay?";
		next;
		mes "[Elly]";
		mes "Mi cuarto está atras,";
		mes "y está en el ^FF0000segundo piso^000000";
		mes "^FF0000en el lado izquierdo^000000. Por favor usa";
		mes "la escalera para subir, okay?";
		mes "Dejaré mi ventana abierta";
		mes "para ti, solo entra, okay?";
		next;
		mes "[Elly]";
		mes "Rapido, rapido, la";
		mes "ya viene la maestra!";
		set KielHyreQuest,26;
	}
	else {
		mes "[Elly]";
		mes "Rapido, rapido,";
		mes "ya viene la maestra!";
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Elly's Window 
//----------------------------------------------------------------------------
yuno_fild08,69,185,0	script	Window#kh	111,{
	if (KielHyreQuest < 29) {
		mes "^3355FFPuedes ver una cortina";
		mes "decorada con un lindo";
		mes "diseño atraves de la";
		mes "ventana de éste cuarto,";
		mes "que probablemente";
		mes "es usado por una chica joven.^000000";
		close;
	}
	else if (KielHyreQuest== 29) {
		mes "^3355FFÉste debe ser el cuarto de  Elly.";
		mes "Suena como si no hubiera nadie";
		mes "dentro, así que probablemente";
		mes "no ha regresado. Por ahora, tu";
		mes "deberías tratar de encontrar lo que";
		mes "su abuelo dejó para ella en el";
		mes "Estudio de la casa de campo.^000000";
		close;
	}
	else if ((KielHyreQuest >= 30) && (KielHyreQuest <= 45)) {
		mes "^3355FFEsta ventana ligeramente abierta";
		mes "debe conducir al cuarto de Elly.";
		mes "Aunque ella te pidió que";
		mes "buscarás una escalera para entrar";
		mes "en su ventan, tu probablemente no";
		mes "encontrarás una. Tu debes ser capaz";
		mes "de escalar por esa tuberia de agua...^000000";
		next;
		switch(select("Climb Water Pipe:Find Another Way")) {
		case 1:
			if (rand(1,3) == 2) {
				mes "^3355FFEscalaste por la tuberia";
				mes "de agua, y entraste a hurtadillas";
				mes "en el cuarto de Elly exitosamente.^000000";
				close2;
				warp "kh_school",185,185;
				end;
			}
			else {
				mes "^3355FFTratas de escalar";
				mes "por la tuberia de agua, pero";
				mes "terminas cayendo y";
				mes "golpeandote la cabeza.^000000";
				percentheal -10,0;
				close;
			}
		case 2:
			mes "^3355FFDebe haber otra";
			mes "forma de entrar al";
			mes "cuarto de Elly, aparte de";
			mes "escalar por la tuberia de agua...^000000";
			close;

		}
	}
	else {
		mes "^3355FFNo puedes subir";
		mes "a esa ventana abierta.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Elly (In Dormitory)
//----------------------------------------------------------------------------
kh_school,178,180,4	script	Elly	895,{
	if (checkweight(908,200) == 0) {
		mes "^3355FFEspera un segundo...";
		mes "Llevas mucho";
		mes "items contigo";
		mes "ahora mismo, necesitarás";
		mes "liberar más";
		mes "espacio en tu Inventario primero...^000000";
		close;
	}
	if (KielHyreQuest < 30) {
		mes "[Elly]";
		mes "Quién diablos eres tu?";
		mes "S-se supone que no";
		mes "seas capaza de entrar!";
		mes "Sal de aquí ahora mismo!";
		close2;
		percentheal -99,0;
		warp "yuno_fild08",100,100;
		end;
	}
	else if (KielHyreQuest < 32) {
		mes "[Elly]";
		mes "......";
		mes ".........";
		mes "............";
		close;
	}
	else if (KielHyreQuest == 32) {
		mes "[Elly]";
		mes "......";
		mes ".........";
		mes "............";
		next;
		mes "^3355FFElly parece haber";
		mes "sido maldecida, y está";
		mes "completamente silenciosa y";
		mes "sin vida. Tienes que";
		mes "itentar algo, pero qué?^000000";
		next;
		switch(select("Wake her up by shaking.:Wake her up by yelling.:Ignore")) {
		case 1:
			mes "^3355FFAgarras a Elly por los";
			mes "hombros, e intentas hacer que";
			mes "responda agitando";
			mes "violentamente todo su cuerpo.^000000";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Elly? Elly! No..!";
			mes "Regresa con nosotros!";
			next;
			mes "^3355FFElly no está respondiendo...^000000";
			close;
		case 2:
			input .@KHInput$;
			if (.@KHInput$ == "Wake up, Elly!") {
				mes "[Elly]";
				mes ".............";
				next;
				mes "^3355FFTan rapido como dices esas";
				mes "palabras, una ^000000Small Golden Key^3355FF";
				mes "y un ^000000Button^3355FF caen de las manos de";
				mes "Elly. Parece que ella despertó,";
				mes "pero solo por un instante.^000000";
				getitem 7493,1; //Golden_Key
				getitem 7494,1; //Kiel_Button
				set KielHyreQuest,34;
				close;
			}
			else {
				mes "[Elly]";
				mes "......";
				mes ".........";
				mes "............";
				next;
				mes "^3355FFElly no está respondiendo...^000000";
				close;
			}
		case 3:
			mes "^3355FFBien...";
			mes "Pero tarde o temprano";
			mes "tu tratarás de romper";
			mes "la maldición puesta a Elly.^000000";
			close;
		}
	}
	else if (KielHyreQuest == 34) {
		if (countitem(7491) < 1) {
			//Missing text, needs another run through.
			mes "^3355FFTlavez la golden key^000000";
			mes "desbloque algo en la^000000";
			mes "Casa de Campo. Hechemos otro vistazo.^000000";
			close;
		}
		else {
			mes "^3355FFParece que la Golden Key";
			mes "de Elly podría entrar";
			mes "en la cerradura de la";
			mes "Grey Box que encontraste dentro";
			mes "de la Casa de Campo de Kyle Hyre.^000000";
			next;
			mes "^3355FFTu abriste exitosamente la";
			mes "Grey Box con la Golden Key,";
			mes "y encontraste una Blue Keycard, junto con";
			mes "una nota doblada, dentro de la";
			mes "Grey Box. Tu rapidamente lees";
			mes "el contenido de la nota...^000000";
			next;
			mes "Querida Elly,";
			mes "Kiehl finalmente rompió el taboo,";
			mes "y trato de transformar unos chicos";
			mes "en algo horrible.";
			mes "^FFFFFF_^000000";
			mes "Para cuando leas esto,";
			mes "mi vida probablemente estará en peligro.";
			mes "Mi vida depende de ti.";
			mes "^FFFFFF_^000000";
			mes "Tu ya aprendisté si";
			mes "conociste a Puppet, pero quiero decirtelo";
			mes "por mi mismo: tu no eres humano.";
			mes "Aprenderás los detalles si";
			mes "entras en la fabrica usando la";
			mes "entrada cerca de la tumba";
			mes "junto a la iglesia. Entonces, Yo quiero";
			mes "que encuentres a Allysia dentro";
			mes "del cuarto secreto de la fabrica.";
			mes "He registrado tu nombre en";
			mes "su sistema de seguridad, así que";
			mes "no te preocupes. Esperemos que, Allysia";
			mes "entonces vendrá a salvarme...";
			mes "^FFFFFF_^000000";
			mes "Lo siento por eso,";
			mes "Abuelo";
			getitem 7495,1; //Blue_Key_Card
			delitem 7491,1; //Iron_Box
			set KielHyreQuest,36;
			close;
		}
	}
	else if (KielHyreQuest >= 36) {
		mes "^3355FFEsto es en donde";
		mes "descubriste la note";
		mes "encerrada dentro de la Grey Box.";
		mes "El siguiente mensaje fue";
		mes "escrito en la nota por el abuelo";
		mes "de Elly, Kiel Hyre.^000000";
		next;
		mes "Querida Elly,";
		mes "Kiehl finalmente rompió el taboo,";
		mes "e intento transformar unos chicos";
		mes "en algo horrible.";
		mes "^FFFFFF_^000000";
		mes "Para el momento que leas esto,";
		mes "mi vida probablemente estará en peligro.";
		mes "Mi vida depende de ti.";
		mes "^FFFFFF_^000000";
		mes "Tu ya aprendisté si";
		mes "conociste a Puppet, pero yo quiero decirtelo";
		mes "por mi mismo: tu no eres un humano.";
		mes "Aprenderás los detalles si";
		mes "entras a la fabrica usando la";
		mes "entrada cerca de la tumba junto";
		mes "a la iglesia. Entonces, yo quiero";
		mes "encontrar a Allysia dentro";
		mes "del cuarto secreto de la fabrica.";
		mes "He registrado tu nombre en";
		mes "su sistema de seguridad, así que";
		mes "no te preocupes. Esperemos que, Allysia";
		mes "entonces vendra a salvarme...";
		mes "^FFFFFF_^000000";
		mes "Lo siento por eso,";
		mes "Abuelo";
		close;
	}
}

//----------------------------------------------------------------------------
// Cookie Basket
//----------------------------------------------------------------------------
kh_school,175,176,0	script	Cookie Basket#kh	111,{
	if (KielHyreQuest < 30) {
		mes "^3355FFEs una canasta";
		mes "de galletas llenada con";
		mes "deliciosas galletas.^000000";
		close;
	}
	else if (KielHyreQuest == 30) {
		mes "^3355FFÉsta debe ser";
		mes "la canasta de galletas de Elly.";
		mes "Parece ser que ahi hay";
		mes "un trozo de una nota doblada";
		mes "entre las galletas.^000000";
		next;
		switch(select("Read Note:Ignore")) {
		case 1:
			mes ""+strcharinfo(0)+", auxilio!";
			mes "Hay un individuo vestido de";
			mes "negro que está caminando alrededor,";
			mes "y echando un hechizo!";
			mes "Él es el que ha estado poniendo";
			mes "a las personas frias y sin vida como";
			mes "marionetas! Me estoy asustando!";
			mes "^FFFFFF_^000000";
			mes "Espero que recibas ésta nota...";
			mes "Él corrió tras de mi, pero me encerré";
			mes "en mi cuarto. Voy a dejar";
			mes "mi ventana abierta así";
			mes "todavia podras encontrarme. Espero que";
			mes "él no eche su maldición sobre mi!";
			set KielHyreQuest,32;
			close;
		case 2:
			mes "^3355FFEsa nota probablemente";
			mes "fue escrita justo";
			mes "para ti, de cualquier forma.^000000";
			close;
		}
	}
	else if (KielHyreQuest < 108) {
		mes "^3355FFÉstas galletas no sean";
		mes "puesto duras todavia, pero ya no están";
		mes "calientes. Si no están";
		mes "a la temperatura del cuarto,";
		mes "entonces están un poco frias.^000000";
		close;
	}
	else if (KielHyreQuest == 108) {
		mes "^3355FFComo miraste la";
		mes "canasta de galletas, el viento de";
		mes "la ventana la empujó,";
		mes "revelando una carta que";
		mes "fue puesta debajo.";
		mes "Probablemente fue escrita";
		mes "por Elly para que la leas.^000000";
		next;
		mes "^333333Querido "+strcharinfo(0)+",";
		mes " ";
		mes "My maestro usualmente me grita";
		mes "desde que cometo tantos errores,";
		mes "peo hoy Mrs. Lecollane me dió";
		mes "un premio por mi deliciosas galletas!";
		mes "Es todo gracias a ti, mi amigo.";
		mes "Estoy tan felíz de habernos conocido:";
		mes "tu me haz enseñado que hay";
		mes "personas buenas en el mundo.";
		mes "Y se que a mi Abuelo le agradarás,";
		mes "creo, no se";
		mes "donde podría estár...";
		mes " ";
		mes "Algun dia, espero llegar a ser";
		mes "una persona agradable como eres tu.";
		mes "Mantengamonos en contacto y seamos";
		mes "realmente buenos amigos, okay?";
		mes " ";
		mes "Tuya, Elly^000000";
		next;
		mes "^3355FFSe siente como que puedes";
		mes "todavia sentir el calor y";
		mes "la amabilidad de la";
		mes "canasta de galletas de Elly. Tu sacas";
		mes "una galleta, y la pones en";
		mes "tu boca. Estaba";
		mes "deliciosamente agridulce.";
		set KielHyreQuest,109;
		next;
		input .@input$;
		mes "["+strcharinfo(0)+"]";
		mes ""+.@input$+"";
		mes "Es hora de regresar. No puedo";
		mes "quedarme aqui más tiempo.";
		close2;
		warp "yuno_fild08",69,183;
		end;
	}
	else {
		mes "^3355FFTodas las galletas";
		mes "en ésta canasta están";
		mes "duras! Bueno, no debería";
		mes "ser una sorpresa.";
		mes "Ha pasado mucho tiempo";
		mes "desde que fueron horneadas.^000000";
		close;
	}
	end;
}

//----------------------------------------------------------------------------
// Elly's Window (In Dormitory)
//----------------------------------------------------------------------------
kh_school,188,185,0	script	Window#kh2	111,{
	warp "yuno_fild08",69,183;
	end;
}

//----------------------------------------------------------------------------
// Grave/Kiel Hyre dungeon entry
//----------------------------------------------------------------------------
yuno_fild08,71,170,0	script	Grave#kh	111,{
	if (KielHyreQuest < 36) {
		mes "^3355FFSolo es una tumba.";
		mes "Podría ser importante";
		mes "para ti después, pero por ahora";
		mes "no es realmente tan";
		mes "de ayuda para ti.^000000";
		close;
	}
	else if (KielHyreQuest == 36) {
		if (countitem(7492) < 1) {
			mes "^3355FFSolo es una tumba.";
			mes "Podría ser importante";
			mes "para ti después, pero por ahora";
			mes "no es realmente tan";
			mes "de ayuda para ti.^000000";
			close;
		}
		else {
			mes "^3355FFHay una puerta secreta";
			mes "cerca de está tumba. Parece";
			mes "como si hubiera algún tipo de";
			mes "ranura y un bloc numérico";
			mes "instalado en la puerta.^000000";
			next;
			mes "^3355FFQué deberías";
			mes "insertar en la ranura?^000000";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "Yellow Keycard") {
				mes "^3355FFUn repique de confirmación";
				mes "electronica suena una vez que insertas";
				mes "la Yellow Keycard, seguida por";
				mes "una voz automática que pide:^000000";
				next;
				mes "[Security System]";
				mes "Por favor ponga el password.";
				next;
				input .@KHInput$;
				next;
				if (.@KHInput$ == "4772961") {
					mes "[Security System]";
					mes "Password confirmado.";
					mes "Bienvenido Kiel Hyre.";
					next;
					mes "^3355FFEscuchas otro ";
					mes "agradable bip, y";
					mes "un camino secreto se abre.^000000";
					set KielHyreQuest,38;
					close;
				}
				else {
					mes "[Security System]";
					mes "Password Incorrecto.";
					mes "Por favor intenta otra vez.";
					close;
				}
			}
			else {
				mes "^3355FFLoque sea que estás intentando";
				mes "insertar en la ranura";
				mes "no está funcionando en lo absoluto...^000000";
				close;
			}
		}
	}
	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 106)) {
		mes "^3355FFLa puerta hacia la fabrica";
		mes "está completamente abierta.^000000";
		next;
		switch(select("Enter:Cancel")) {
		case 1:
			warp "kh_dun01",3,230;
			end;
		case 2:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}

	else if (KielHyreQuest >= 106) {
		if (countitem(7509) < 1) {
			mes "^3355FFLa entrada secreta";
			mes "ha sido ahora sellada.^000000";
			close;
		}
		else {
			mes "Ya que te acercas a la";
			mes "tumba, comienza a";
			mes "emitir destellos y luces.^000000";
			next;
			switch(select("Use the ^0000FFLuxurious Keycard^000000:Ignore")) {
			case 1:
				mes "Una vez que usas la";
				mes "Luxurious Keycard";
				mes "un camino secreto se abre^000000";
				next;
				switch(select("Enter:cancel")) {
				case 1:
					warp "kh_dun01",3,230;
					end;
				case 2:
					mes "......";
					mes ".........";
					mes "............";
					close;
				}
			case 2:
				mes "......";
				mes ".........";
				mes "............";
				close;
			}
		}
	}
}

//============================================================================

//============================================================================
//Kiel Hyre Cottage NPCs
//============================================================================

//----------------------------------------------------------------------------
// Cottage Keeper
//----------------------------------------------------------------------------
yuno_fild02,93,210,4	script	Cottage Keeper#kh	85,{
	if ((KielHyreQuest < 12) || (KielHyreQuest > 12)) {
		mes "[Cottage Keeper]";
		mes "Esto es propiedad privada,";
		mes "así que por favor no entres a ésta";
		mes "area a menos que estes autorizado.";
		close;
	}
	else if (KielHyreQuest == 12) {
		mes "[Cottage Keeper]";
		mes "Esto es propiedad privada,";
		mes "así que por favor no entres a ésta";
		mes "area a menos que estes autorizado.";
		next;
		switch(select("I have an appointment with Kiel Hyre.:Alright.")) {
		case 1:
			mes "[Cottage Keeper]";
			mes "Tienes una";
			mes "cita con";
			mes "Master Kiel Hyre?.";
			mes "Um, estas seguro?";
			next;
			switch(select("Yes:No")) {
			case 1:
				mes "[Cottage Keeper]";
				mes "Debe haber algún tipo";
				mes "de error. El Sr. Hyre";
				mes "no debería haberse ido si él";
				mes "se supone tendría";
				mes "una cita...";
				set KielHyreQuest,14;
				close;
			case 2:
				mes "[Cottage Keeper]";
				mes "Bueno a menos que tengas";
				mes "una cita. No creo";
				mes "que puedas";
				mes "entrevistarte con el Señor Hyre.";
				close;
			}
		case 2:
			mes "[Cottage Keeper]";
			mes "Adios.";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (left)
//----------------------------------------------------------------------------
yuno_fild02,75,218,0	script	Door#kh2	111,{
	if (KielHyreQuest < 16) {
		mes "^3355FFÉsta puerta está cerrada.";
		mes "Si alguien dentro no la";
		mes "abrirá por ti, entonces tu";
		mes "necesitarás la llave correcta para desbloquearla.";
		close;
	}
	if (KielHyreQuest == 16) {
		mes "^3355FFLa puerta está cerrada.";
		mes "Si alguien dentro no la";
		mes "abrirá por ti, entonces tu";
		mes "necesitarás la llave correcta para desbloquearla.";
		next;
		switch(select("Unlock:Cancel")) {
		case 1:
			mes "^3355FFAbriste la puerta con la";
			mes "llave que Elly te dio, y";
			mes "al empujarla, una nota";
			mes "doblada calló de la cima de la";
			mes "puerta. Las siguientes palabras";
			mes "están escritas en ésta cruda nota.";
			next;
			mes "6 Adelante.";
			mes "3 Izquierda,";
			mes "3 Adelante,";
			mes "4 Izquierda";
			close2;
			set KielHyreQuest,18;
			warp "kh_vila",188,18;
			end;
		case 2:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}
	else {
		mes "^3355FFLa puerta está abierta.^000000";
		next;
		switch(select("Enter:Cancel")) {
		case 1:
			warp "kh_vila",188,18;
			end;
		case 2:
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (Right)
//----------------------------------------------------------------------------
yuno_fild02,109,218,0	script	Door#kh1	111,{
	if (KielHyreQuest != 16) {
		mes "^3355FFÉsta puerta esta cerrada.";
		mes "Si alguien dentro no la";
		mes "abrirá por ti, entonces tu";
		mes "necesitarás la llave correcta para abrirla.";
		close;
	}
	if (KielHyreQuest == 16) {
		mes "^3355FFÉsta puerta está cerrada.";
		mes "Si alguien dentro no la";
		mes "abre por ti, entonces tu";
		mes "necesitarás la llave correcta para abrirla.";
		next;
		switch(select("Open:Cancel")) {
		case 1:
			mes "^3355FFTu no tienes la";
			mes "llave que puede";
			mes "abrir está puerta.^000000";
			close;
		case 2:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}
}


//----------------------------------------------------------------------------
// Store room interior; Wall
//----------------------------------------------------------------------------
kh_vila,191,14,0	script	Wall#kh	139,1,1,{
	if (KielHyreQuest < 28) {
		mes "^3355FFSolo es una pared.";
		mes "No está particularmente";
		mes "parada en tu camino.^000000";
		close;
	}
	if (KielHyreQuest >= 28) {
		mes "^3355FFLa pared está ahora";
		mes "abierta, revelando";
		mes "un camino secreto..^000000";
		next;
		switch(select("Enter:Cancel")) {
		case 1:
			warp "kh_vila",17,177;
			end;
		case 2:
			close;
		}
	}

OnOpenDoor:
	misceffect 316;
	end;
}

//----------------------------------------------------------------------------
// Store room interior; books
//----------------------------------------------------------------------------
kh_vila,184,20,0	script	Book#kh1::BookKHQ1	111,{
	if (KielHyreQuest != 26) {
		mes "^3355FFÉste estante está^000000";
		mes "^3355FFatiborrado con tantos^000000";
		mes "^3355FFlibros largos de pasta dura^000000";
		close;
	}
	else if (KielHyreQuest == 26) {
		if (rand(1,10) == 8) {
			mes "^3355FFSin pensar, tu";
			mes "alcanzas un libro del";
			mes "estante. Al";
			mes "jalarlo hacia ti, las";
			mes "paredes se deslizan abriendose";
			mes "para revelar un camino secreto.^000000";
			donpcevent "Wall#kh::OnOpenDoor";
			set KielHyreQuest,28;
			close;
		}
		else {
			mes "^3355FFÉste estante está";
			mes "atiborrado con tanto";
			mes "libros largo de pasta dura.^000000";
			close;
		}

	}

}

kh_vila,181,20,0	duplicate(BookKHQ1)	Book#kh2	111

kh_vila,178,20,0	duplicate(BookKHQ1)	Book#kh3	111

kh_vila,175,19,0	duplicate(BookKHQ1)	Book#kh4	111

//----------------------------------------------------------------------------
// Store room interior; Letter to Elly on the floor.
//----------------------------------------------------------------------------
kh_vila,179,11,0	script	Letter#kh	-1,1,1,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 18) {
		if (checkweight(7490,1) == 0) {
			mes "^3355FFUn momento...!";
			mes "Hay algo en el";
			mes "piso aquí, pero tu";
			mes "no puedes levantarlo porque";
			mes "estás cargando muchos";
			mes "items ahora.^000000";
			close;
		}
		mes "^3355FFHas encontrado una carta";
		mes "en el piso. Naturalmente,";
		mes "la levantaste, apesar";
		mes "del hecho de que no";
		mes "está dirigida a ti.^000000";
		getitem 7490,1; //Kyll_Hire_Letter
		set KielHyreQuest,20;
		close;
	} 
	else{
		mes "^3355FFEntraste al cuarto.^000000";
		close;
	}
	end; 
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Box (Pet Food vending machine)
//----------------------------------------------------------------------------
kh_vila,16,175,0	script	Box#khp1	111,{
	mes "^FFFFFF##^000000*Tasty-Nutricious-Delicious*";
	mes "*Cute Pet Doof Vending Machine*";
	mes "La mejor comida para tu Linda Mascota";
	mes "que es superior a la comida para macotas";
	mes "que puedes comprar en el mercado!";
	mes "^FFFFFF_^000000";
	mes "Precio: 1,100 zeny (barato!)";
	next;
	switch(select("Buy!:Cancel")) {
	case 1:
		if (zeny < 1100) {
			mes "^3355FFDesafortunadamente, no";
			mes "no tienes suficiente";
			mes "zeny para insertar en";
			mes "la vending machine.^000000";
			close;
		}
		else {
			mes "^3355FFOh no....!^000000";
			mes "^3355FF1,100 zeny se ve algo";
			mes "caro para Comida de Mascotas,";
			mes "pero es mejor que la";
			mes "comida normal, podría";
			mes "valer un tiro.^000000";
			next;
			mes "^3355FFOh no....!";
			mes "No hay nada";
			mes "especial en ello";
			mes "en lo absoluto! Solo es";
			mes "Comida normal de Mascotas!";
			set zeny,zeny-1100;
			getitem 537,1;	//Pet_Food
			close;
		}
	case 2:
		mes "^3355FFÉsta vending machine";
		mes "se ve realmente sombría y";
		mes "sospechosa por alguna razón.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Apple Box (Useless?)
//----------------------------------------------------------------------------
kh_vila,30,184,0	script	Apple Box#khp1	111,{
	mes "^3355FFEncuentras una caja llena con";
	mes "deliciosas y maduras manzanas.^000000";
	next;
	switch(select("Take the box:Leave it")) {
	case 1:
		mes "^3355FFNo...! Espera!";
		mes "Algo está mal!";
		mes "Loquesea que hagas,";
		mes "no tomes ésta caja!^000000";
		next;
		mes "^3355FFY así, tu voz";
		mes "interna, tu sombra";
		mes "Jungian como si quisierá,";
		mes "prevenirte de";
		mes "tomar esa caja.^000000";
		close;
	case 2: 
		mes "^3355FFAlgo está mal";
		mes "con ésta caja de manzanas.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, dining room; Map
//----------------------------------------------------------------------------
kh_vila,44,126,0	script	Map#khp1	111,{
	if ((KHCottagePoem1 < 2) && (KielHyreQuest < 30)) {
		mes "^3355FFUn magnifico mapa del mundo,";
		mes "detallando el reino de Rune-Midgarts";
		mes "la República de Schwaltzvalt,";
		mes "así como otro país hacia el";
		mes "oeste cuyo nombre no es familiar";
		mes "para ti, está pegado a esta pared.^000000";
		next;
		mes "^3355FFAl examinar el mapa";
		mes "del mundo más de cerca,";
		mes "encuentras que algo ha";
		mes "sido escondido debajo.^000000";
		switch(select("Ignore:Examine")) {
		case 1:
			mes "^3355FFCualquier cosa podría estár";
			mes "escondida detrás de éste";
			mes "mapa probablemente no es";
			mes "suficientemente importante";
			mes "como para investigarlo.^000000";
			close;
		case 2:
			mes "^3355FFDesafortunadamente, no puedes";
			mes "ver lo que está debajo del mapa";
			mes "ya que está pegado a la pared.";
			mes "Necesitarás encontrar alguna";
			mes "manera de despegar el pegamento";
			mes "sin dañar el mapa...^000000";
			set KHCottagePoem1,1;
			close;
		}
	}
	else  if ((KHCottagePoem1 == 2) && (KielHyreQuest < 30)) {
		mes "^3355FFTu traes la olla de";
		mes "hirviente líquido caliente";
		mes "cerca del mapa.";
		mes "Ya que el pegamento en la pared";
		mes "se humedece, el mapa lentamente";
		mes "se levanta.^000000";
		next;
		mes "^3355FFEl mapa levantantado revela";
		mes "un pedazo de papel doblado";
		mes "escondido debajo. Tu";
		mes "tomas el papel, y alisas";
		mes "el mapa para adherirlo a la";
		mes "pared otra vez. Un mesaje está";
		mes "escrito en el pedazo de papel.^000000";
		next;
		mes "^0000FFElla estará en un lugar";
		mes "tan frío como los polos.";
		mes "Cuando el pozo esté seco";
		mes "y la tierra esté agrietada,";
		mes "el camino de su corazón, un";
		mes "corazón tan transparente como";
		mes "cristal, se abrirá.^000000";
		next;
		mes "^3355FFYo tendré que luchar con cuatro";
		mes "serpientes con cuatro espadas";
		mes "para encontrarla. La primera espada";
		mes "es amor. La segunda espada";
		mes "es desesperación. La tercera espada";
		mes "es ira. La cuarta espada es";
		mes "esperanza. Para encontrarla, para rescatarla.^000000";
		next;
		mes "^3355FF................................";
		mes "El profundo significado";
		mes "de éste poema, si siquiera existe";
		mes "elude a ti.^000000";
		set KHCottagePoem1,3;
		close;
	}
	else  if ((KHCottagePoem1 > 2) || (KielHyreQuest >= 30)) {
		mes "^3355FFAquí es donde encontraste";
		mes "el papel en donde el";
		mes "poema fue escrito. Talvez";
		mes "sería buena idea";
		mes "refrescar tu memoria y";
		mes "leer ese poema otra vez.^000000";
		next;
		switch(select("Read:Cancel")) {
		case 1:
			mes "^0000FFElla estará en un lugar";
			mes "tan frío como los polos.";
			mes "Cuando el pozo esté seco";
			mes "y la tierra agrietada,";
			mes "el camino a su corazón, un";
			mes "corazón tan trasparente como";
			mes "el cristal, se abrira.^000000";
			next;
			mes "^3355FFYo tendré que luchar con cuatro";
			mes "serpientes con cuatro espadas";
			mes "para encontrarla. La primer espada";
			mes "es amor. La segunda espada";
			mes "es desesperación. La tercer espada";
			mes "es ira. La cuarta espada es";
			mes "esperanza. Para encontrarla, para rescatarla.^000000";
			next;
			mes "^3355FF................................";
			mes "El profundo significado";
			mes "de éste poema, si es que";
			mes "existe, elude a ti.^000000";
			close;
		case 2:
			mes "^3355FFNo hay necesidad para ti";
			mes "de releer éste poema.";
			mes "Eres un maldito genio!^000000";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Pot
//----------------------------------------------------------------------------
kh_vila,33,184,0	script	Pot#khp1	111,{
	if (KHCottagePoem1 < 1) {
		mes "^3355FFHas encontrado una olla";
		mes "llena con líquido hirviente,";
		mes "echando vapor.^000000";
		close;
	}
	else if (KHCottagePoem1 == 1) {
		mes "^3355FFHaz encontrado una olla";
		mes "llena con líquido hirviendo,";
		mes "echando vapor.";
		mes "Vapor... Eso podrías";
		mes "usar para aflojar el pegamento en";
		mes "el mapa... Eres un genio!^000000";
		next;
		switch(select("Try it.:That? That won't work!")) {
		case 1:
			mes "^3355FFHaz levantado la";
			mes "la olla hirviente, pero";
			mes "ligeramente quemaste tus";
			mes "manos por accidente.";
			set KHCottagePoem1,2;
			close;

		case 2:
			mes "^3355FFNo, no..";
			mes "Mejor probaramos";
			mes "algo más.^000000";
			close;
		}
	}
	else if ((KHCottagePoem1 > 1) || (KielHyreQuest >= 30)){
		mes "^3355FFAquí es donde tu";
		mes "levantasté la olla llena";
		mes "con líquido hirviente echando vapor.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, fire place; Calabash
//----------------------------------------------------------------------------
kh_vila,14,55,0	script	Calabash#khp1	111,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		if (checkweight(7329,1) == 0) {
			mes "^3355FFEsa es una vasija de";
			mes "buen ver. Hasta podrías";
			mes "obtener algo de ella..";
			mes "Pero primero, mejor te";
			mes "quitas todo el peso extra.";
			mes "Y por peso, quiero decir items.^000000";
			close;
		}
		mes "^3355FFEs una vasija";
		mes "de apariencia cara--";
		mes "o en palabras menos";
		mes "elegantes, un \"cántaro.\"";
		mes "¿Qué harás?^000000";
		next;
		switch(select("Break Open Calabash:Look Inside Calabash:Ignore")) {
		case 1:
			mes "^3355FFNo puedes romper";
			mes "la vasija...";
			mes "Eres un héroe, no un vandalo.";
			mes "Ahora, si éste acto de vandalismo";
			mes "pudiera ser considerado un acto de";
			mes "heroismo, entonces estaría bien.^000000";
			close;
		case 2:
			mes "^3355FFTiernamente metes";
			mes "tu mano en la";
			mes "vasija, y gentilmente";
			mes "tocas alrededor con tus";
			mes "dedos hasta obtener";
			mes "una Old Bronze Key.^000000";
			getitem 7329,1; //Old_Bronze_Key
			close;
		case 3:
			mes "^3355FFProbablemten no hay";
			mes "nada dentro.^000000";
			close;
		}
	}
	else {
		mes "^3355FFÉsta es la vasija";
		mes "de apareciencia costosa";
		mes "la cual obtuviste";
		mes "la Old Bronze Key.";
		mes "Es inútil para ti por ahora.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, garden; Pool
//----------------------------------------------------------------------------
kh_vila,39,41,0	script	Pool#khp1	111,{
	if ((KHCottagePoem1 < 3) && (KielHyreQuest < 30)) {
		mes "^3355FFEncontrasté una lujosa piscina";
		mes "llena con agua fresca.^000000";
		close;
	}
	else if ((KHCottagePoem1 == 3) && (KielHyreQuest < 30)) {
		mes "^3355FFEncontraste una lujosa piscina";
		mes "llena con agua fresca,";
		mes "junto con una estatua";
		mes "conspicua de león con dos manijas.^000000";
		next;
		switch(select("Pull Handles:Cancel")) {
		case 1:
			mes "Cúal manija te gustaría";
			mes "jalar pimero?";
			next;
			switch(select("Right Handle:Left Handle")) {
			case 1:
				mes "^3355FFJalaste la manija derecha,";
				mes "haciendo que el agua";
				mes "botre de la boca del";
				mes "león. Se ve muy bonito~^000000";
				close;
			case 2:
				mes "^3355FFTan rapido como jalas la";
				mes "manija izquierda, el agua en la";
				mes "piscina es drenada. La";
				mes "piscina se vacia, y puedes";
				mes "ver una capa de musgo verde";
				mes "cubriendo el fondo de la piscina.^000000";
				next;
				switch(select("Ignore:Investigate")) {
				case 1:
					mes "^3355FFDecides que la";
					mes "piscina es poco más";
					mes "que un agujero sin";
					mes "agua para llenarlo.^000000";
					close;
				case 2:
					mes "^3355FFAl ver atravez";
					mes "del musgo mojado en el";
					mes "fondo de la piscina,";
					mes "tropiezas sobre un";
					mes "pequeño, peculiar botón.^000000";
					next;
					switch(select("Press button:Don't Press Button")) {
					case 1:
						mes "^3355FFPresionas el botón.";
						mes "que parece poner en funcionamiento";
						mes "un extraño sonido provenie";
						mes "de las escaleras en el pasillo.^000000";
						set KHCottagePoem1,4;
						close;
					case 2:
						mes "^3355FFMejor no presionaras";
						mes "éste botón. Tus enemigos";
						mes "deben haberlo escondido cuidadosamete";
						mes "para que lo encuentres: debe ser";
						mes "algun tipo de trampa infame.^000000";
						close;
					}
				}
			}
		case 2:
			mes "^3355FFDecidisté no";
			mes "jalar ninguna manija.^000000";
			close;
		}
	}
	else if ((KHCottagePoem1 > 3) || (KielHyreQuest >= 30)) {
		mes "^3355FFAquí es donde presionaste";
		mes "el pequeño botón que causó";
		mes "algunos sonidos extraños que";
		mes "venían de las escaleras cerca del pasillo.";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Vicious Dog
//----------------------------------------------------------------------------
kh_vila,181,178,4	script	Vicious Dog#khp1	81,7,3,{
//OnTouch2:
OnTouch:
	mes "*Grrr..~*";
	next;
	mes "^3355FFUn perro de";
	mes "apariencia extremadamente salvaje te";
	mes "está deslumbrando. Realmente puedes";
	mes "pasar por está criatura sin";
	mes "salir herido?^000000";
	next;
	switch(select("March forward:Run away")) {
	case 1:
		if (countitem(537) >= 1) {
			mes "^3355FFEspera! Tallvez puedas";
			mes "usar comida para calmar a la";
			mes "bestia salvaje. Por qué no";
			mes "lo alimentas con algo de tu Pet Food";
			mes "y ves que pasa?^000000";
			next;
			switch(select("Give Pet Food:It won't work!")) {
			case 1:
				mes "^3355FFCautelosamente tiras el";
				mes "Pet Food hacia el perro";
				mes "Su cola se sacude violentamente al";
				mes "devorar la comida. Mejor";
				mes "pasas al perro ahora";
				mes "mientras tienes oportunidad!^000000";
				delitem 537,1; //Pet_Food
				close2;
				warp "kh_vila",173,182;
				end;
			case 2:
				break;
			}
		}
		mes "^3355FFTe aproximas al perro";
		mes "lentamente, pero no deja";
		mes "de gruñirte.";
		mes "Tratas de correr por delante del";
		mes "perro, pero bloquea todos";
		mes "tus movimientos. Qué hacer?^000000";
		next;
		mes "[Vicious Dog]";
		mes "BOW! WOW!";
		mes "BOW! WOW!";
		mes "BOW! WOW! WOW!";
		next;
		mes "^3355FFEl perro te persigue";
		mes "por las escaleras como el";
		mes "como el tonto que eres.^000000";
		close2;
		warp "kh_vila",126,70;
		end;
	case 2:
		mes "^3355FFLarguemonos de aquí!^000000";
		close2;
		warp "kh_vila",126,70;
		end;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Drawer, first room nightstand
//----------------------------------------------------------------------------
kh_vila,115,186,0	script	Drawer#khp1	111,{
	if (checkweight(7492,1) == 0) {
		mes "^3355FFHay algo dentro de";
		mes "éste cajón, pero no puedes";
		mes "tomarlo ya que estás llevando";
		mes "demasiados items contigo. Talvez";
		mes "debas pagar una visita a tu";
		mes "confiable Kafra Storage primero.^000000";
		close;
	}
	if ((countitem(7492) < 1) && (KielHyreQuest <= 36)) {
		mes "^3355FFEncontraste un viejo cajón";
		mes "^que ha estado cerrado.";
		mes "^si lo abres, entonces";
		mes "^´podrías encontrar algo";
		mes "^dentro. O podría estár";
		mes "^vacío. Quíen sabe?^000000";
		next;
		switch(select("Open Drawer:Ignore")) {
		case 1:
			mes "^3355FFObtienes una Yellow";
			mes "Keycard de dentro del";
			mes "cajón. Abrir el cajón";
			mes "resultó ser útil.^000000";
			getitem 7492,1; //Yellow_Key_Card
			close;
		case 2:
			mes "^3355FFOlvida abrir ese";
			mes "cajón. Quiero decir, vamos,";
			mes "cuál sería el punto?^000000";
			close;
		}
	}
	else {
		mes "^3355FFAquí es donde";
		mes "encontraste la Yellow Keycard.";
		mes "Éste cajón está vacío.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Box
//----------------------------------------------------------------------------
kh_vila,107,126,0	script	Box#khp2	111,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "^3355FFUna caja sólida está tirada";
		mes "en el piso en la cual";
		mes "una pequeña, caja sellada";
		mes "ha sido puesta dentro.^000000";
		close;
	}
	else if ((countitem(7329) >= 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "^3355FFUna caja sólida está tirada";
		mes "en el piso en la cual";
		mes "una pequeña, caja sellada";
		mes "ha sido puesta dentro.";
		mes "Talvez puedas usar tu";
		mes "Old Bronze Key para abrirla.^000000";
		next;
		switch(select("Use Old Bronze Key:No, it'll never work.")) {
		case 1:
			mes "^3355FFTu corazonada merció la pena!";
			mes "The Old Bronze Key realmente";
			mes "abrio la caja! Abres";
			mes "la caja interna y";
			mes "obtienes la Green Keycard";
			mes "que estaba sellada dentro.";
			getitem 7516,1; //Green_Key_Card
			delitem 7329,1; //Old_Bronze_Key
			close;
		case 2:
			mes "^3355FFQué...?";
			mes "Qué? Usar una llave";
			mes "para abrir un sello?";
			mes "Vamos, eso es";
			mes "una conversación sin sentido!^000000";
			close;
		}
	}
	else {
		mes "^3355FFÉsta es la caja de";
		mes "de la cual obtuviste";
		mes "la Green Keycard.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Bookshelf.
//----------------------------------------------------------------------------
kh_vila,181,138,0	script	Bookshelf#khp1	111,{
	if ((countitem(7491) < 1) && (countitem(7329) >= 1) || (countitem(7516) >= 1)) {
		mes "^3355FFUno de los libros en";
		mes "éste estante abarrotado";
		mes "está marcado con una nota,";
		mes "''Para Elly.'' Esto debe haber sido";
		mes "dejado por su abuelo.^000000";
		next;
		switch(select("Examine Book:Ignore")) {
		case 1:
			mes "^3355FFHojeas las páginas";
			mes "del libro, y no encuentras";
			mes "nada particularmente";
			mes "interesante. Sin embargo, notas";
			mes "una superficie de acero detrás del";
			mes "estante al regresar el libro.^000000";
			next;
			switch(select("Examine the steel surface:Ignore")) {
			case 1:
				mes "^3355FFRemueves más de los";
				mes "libros del estante para descubrir";
				mes "que la superficie de acero es";
				mes "parte de un seguro oculto detrás del";
				mes "estante. Hay dos";
				mes "cerraduras en el seguro de acero.^000000";
				next;
				switch(select("Try all your keys:Cancel")) {
				case 1:
					mes "^3355FFCuál llave";
					mes "introducirás en la";
					mes "primera cerradura?^000000";
					next;
					if (countitem(7329) >= 1) {
						select("Old Bronze Key.:Cottage Key.");
						mes "^3355FFCuál llave";
						mes "introducirás en la";
						mes "segunda cerradura?^000000";
						next;
						select("Old Bronze Key.:Cottage Key.");
					}
					else if (countitem(7516) >= 1) {
						switch(select("Green Keycard:Cottage Key")) {
						case 1:
							set .@KHFirstKeyhole,1;
							break;
						case 2:
							set .@KHFirstKeyhole,2;
							break;
						}
						mes "^3355FFCuál llave";
						mes "introducirás en la";
						mes "segunda cerradura?^000000";
						next;
						switch(select("Green Keycard:Cottage Key")) {
						case 1:
							set .@KHSecondKeyhole,1;
							break;

						case 2:
							set .@KHSecondKeyhole,2;
							break;

						}
						if (.@KHFirstKeyhole == 2) && (.@KHSecondKeyhole == 1) {
							mes "^3355FFEl seguro se abre con";
							mes "un click, y ves";
							mes "una Grey Box dentro.";
							mes "Tomas la Grey Box,";
							mes "esperando que llegue a";
							mes "ser útil después.^000000";
							delitem 7489,1; //Villa_Spare_Key
							delitem 7516,1; //Green_Key_Card
							getitem 7491,1; //Iron_Box
							close;
						}

					}
					mes "^3355FFEl seguro no abrirá.^000000";
					close;
				case 2:
					mes "^3355FFProbablemente es mejor";
					mes "idea investigar la";
					mes "casa de campo por las";
					mes "llaves que abrirán éste seguro...^000000";
					close;
				}
			case 2:
				mes "^3355FFPones los libros de";
				mes "regreso en el estante.^000000";
				close;
			}
		case 2:
			mes "^3355FFProbablemente puedes";
			mes "encontrar mejores pistas";
			mes "en algún lugar";
			mes "alrededor de aquí.^000000";
			close;
		}
	}
	else {
		mes "^3355FFHas encontrado un";
		mes "estante que está";
		mes "atiborrado con libros.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Desk
//----------------------------------------------------------------------------
kh_vila,118,144,0	script	Desk#khp1	111,{
	if (KHCottagePoem2 < 1) {
		mes "^3355FFHay una pila de papeles";
		mes "y libros amontonados sobre";
		mes "el escritorio cubriendo temas";
		mes "como poder artificial, investigación";
		mes "de Sage Varmundt, robotización";
		mes "de fábrica, y pergaminos magicos...^000000";
		next;
		mes "^3355FFMientras hurgas en los";
		mes "libros y papeles, encuentras";
		mes "un pedazo de papel con";
		mes "el sello oficial de la Fundación";
		mes "Kiel Hyre. Decides que";
		mes "podría volverse útil algún día.^000000";
		next;
		mes "^3355FFHas obtenido";
		mes "un pedazo blanco de";
		mes "papel con el sello de la";
		mes "Fundación Kiel Hyre.^000000";
		set KHCottagePoem2,1;
		close;
	}
	else if (KHCottagePoem2 >= 1) {
		mes "^3355FFHay pilas de papeles";
		mes "y libros, cubriendo varios";
		mes "temas científicos y de magia,";
		mes "apilados sobre el escritorio.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Medicine Chest
//----------------------------------------------------------------------------
kh_vila,123,170,0	script	Medicine Chest#khp1	111,{
	if ((KHCottagePoem2 < 1) && (KielHyreQuest < 30)) {
		mes "^3355FFÉste gabinete médico";
		mes "está lleno con botes de";
		mes "varios colores. Qué tipo";
		mes "de medicina puede ser encontrada aquí?^000000";
		close;
	}
	else if ((KHCottagePoem2 == 1) && (KielHyreQuest < 30)) {
		mes "^3355FFÉste gabinete médico";
		mes "está lleno de botes de";
		mes "varios colores. Qué tipo";
		mes "medicina puede ser encontrada aquí?^000000";
		next;
		mes "^3355FFEspera, tienes un pedazo en blanco";
		mes "de papel con el sello de la Fundación";
		mes "Kiel Hyre! Es extraño";
		mes "que el sello fue puesto en un pedazo de";
		mes "papel en blanco. Talvez algo";
		mes "está escrito en el con tinta especial?^000000";
		next;
		mes "^3355FFEs una corazonada loca, pero";
		mes "tal vez, solo tal vez, puedes";
		mes "usar algo dentro de éste";
		mes "gabinete médico que revelará";
		mes "cualquier tinta invisible";
		mes "escrita en éste documento!^000000";
		next;
		switch(select("What? That's crazy!:Of course! Let's try it!")) {
		case 1:
			mes "^3355FFLo siento.";
			mes "Pensé que";
			mes "era una buena idea...^000000";
			close;
		case 2:
			switch(select("Try Red Liquid:Try Blue Liquid:Try Yellow Liquid:Try Green Liquid:Cancel")) {
			case 1:
				set .@KHPotionColor$,"red";
				break;
			case 2:
				mes "^3355FFFuncionó!";
				mes "El líquido azul está";
				mes "revelando un pequeño texto";
				mes "escrito en el papel.";
				mes "Parece algún tipo";
				mes "de poema largo...^000000";
				next;
				mes "[Poem]";
				mes "The first snake is made of";
				mes "steel, but I used my rage";
				mes "to destroy it. The second";
				mes "snake is made of magic,";
				mes "but my love pierced its heart.";
				next;
				mes "[Poem]";
				mes "The third snake is flesh";
				mes "and blood, but my hope";
				mes "defeated it in the end.";
				mes "However, the fourth and";
				mes "final snake is formless, and";
				mes "no one knows its appearance.";
				next;
				mes "[Poem]";
				mes "I cast my despair to the air,";
				mes "but nobody knows if it killed";
				mes "the snake. I am merely ^0000FFa little";
				mes "lost devil^000000 with four swords and";
				mes "four snakes, searching for that";
				mes "girl in the darkness.";
				next;
				mes "^3355FFÉste es un poema";
				mes "muy extraño. Qué podría";
				mes "significar?^000000";
				set KHCottagePoem2,2;
				close;
			case 3:
				set .@KHPotionColor$,"yellow";
				break;
			case 4:
				set .@KHPotionColor$,"green";
				break;
			case 5:
				mes "^3355FFNo importa.";
				mes "Ésta idea suena";
				mes "demasiado loca para funcionar...";
				mes "como poner un hombre";
				mes "en la luna. Puedes";
				mes "creer esa tontería?^000000";
				close;
			}
			mes "^3355FFIntentas rociando";
			mes "el "+.@KHPotionColor$+" líquido desde el";
			mes "gabinete médico a el";
			mes "papel en blanco con el";
			mes "sello de la fundación Kiel Hyre.";
			mes "Sin embargo, no pasó nada...^000000";
			close;
		}
	}
	else if ((KHCottagePoem2 >= 2) || (KielHyreQuest >= 30)) {
		mes "^3355FFAquí es donde vertiste";
		mes "algo de líquido azul para leer";
		mes "un poema escrito con tinta";
		mes "invisible en el pedazo de papel en blanco";
		mes "con el sello de la Fundación Kiel Hyre.";
		mes "Te gustaría leerlo?^000000";
		next;
		switch(select("No time!:Read")) {
		case 1:
			mes "^3355FFEstás fuera de";
			mes "tiempo!. Por ahora, sería";
			mes "mejor para ti buscar";
			mes "en cada pulgada de esta casa de campo.^000000";
			close;
		case 2:
			mes "[Poem]";
			mes "The first snake is made of";
			mes "steel, but I used my rage";
			mes "to destroy it. The second";
			mes "snake is made of magic,";
			mes "but my love pierced its heart.";
			next;
			mes "[Poem]";
			mes "The third snake is flesh";
			mes "and blood, but my hope";
			mes "defeated it in the end.";
			mes "However, the fourth and";
			mes "final snake is formless, and";
			mes "no one knows it's appearance.";
			next;
			mes "[Poem]";
			mes "I cast my despair to the air,";
			mes "but nobody knows if it killed";
			mes "the snake. I am merely a ^3355FFlittle^000000";
			mes "^3355FFlost devil^000000 with four swords and";
			mes "four snakes, searching for that";
			mes "girl in the darkness.";
			close;

		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, stair case; Sword hilt
//----------------------------------------------------------------------------
kh_vila,136,68,0	script	Sword Hilt#kh	111,{
	if ((KHCottagePoem1 < 3) || (KHCottagePoem2 < 2) && (KielHyreQuest < 30)) {
		mes "^3355FFHay cuatro espadas";
		mes "de elaborado diseño, posicionadas";
		mes "junto a cuatro esculturas de serpientes de";
		mes "horripilante apariencia.^000000";
		close;
	}
	else if ((KHCottagePoem1 <= 4) || (KHCottagePoem2 <= 2) && (KielHyreQuest < 30)) {
		mes "^3355FFHay cuatro espadas";
		mes "de elaborado diseño, posicionadas";
		mes "junto a cuatro esculturas de serpientes de";
		mes "horripilante apariencia. Espera!";
		mes "Tal vez están relacionadas con";
		mes "ese poema que leíste anteriormente...";
		next;
		switch(select("No way!:Of course!")) {
		case 1:
			mes "^3355FFImposible...";
			mes "Debe ser algún";
			mes "tipo de coincidencia...^000000";
			close;
		case 2:
			mes "^3355FFPor supuesto! Y Mira!";
			mes "Hay un agujero arriba";
			mes "de la cabeza de escultura de";
			mes "cada serpiente. Estos agujeros se ven";
			mes "suficientemente grande para insertar cada";
			mes "una de las espadas ornamentales...^000000";
			next;
			switch(select("Ignore:Insert Ornamental Swords")) {
			case 1:
				mes "^3355FFImposible....^000000";
				mes "^3355FFEsto debe ser algún^000000";
				mes "^3355FFtipo de coincidencia...^000000";
				close;
			case 2:
				if (KHCottagePoem1 != 4) {
					mes "^3355FFNo puedo... Sacar...";
					mes "la Espada Debe estar";
					mes "atorada en el piso de alguna";
					mes "manera, o sellada";
					mes "algún tipo de fuerza extraña!^000000";
					close;
				}
				else {
					mes "^3355FFTu deberias tratar";
					mes "probablemente de insertar cada espada";
					mes "en la serpiente correcta.";
					mes "Primero, por favor selecciona la";
					mes "serpiente en la cual";
					mes "insertarás la primer espada.^000000";
					next;
					switch(select("First Snake:Second Snake:Third Snake:Fourth Snake")) {
					default:
						break;
					case 2:
						set .@KHSwords,.@KHSwords+1;
						break;
					}
					next;
					mes "^3355FFAhora, por favor elige";
					mes "la serpiente en la cual";
					mes "insertarás la segunda espada^000000";
					next;
					switch(select("First Snake:Second Snake:Third Snake:Fourth Snake")) {
					default:
						break;
					case 4:
						set .@KHSwords,.@KHSwords+1;
						break;
					}
					next;
					mes "^3355FFSiguiente, por favor elige";
					mes "la serpiente en la cual";
					mes "insertarás la tercer espada.^000000";
					next;
					switch(select("First Snake:Second Snake:Third Snake:Fourth Snake")) {
					case 1:
						set .@KHSwords,.@KHSwords+1;
						break;
					default:
						break;
					}
					next;
					mes "^3355FFPor último, por favor elige";
					mes "la serpiente en la que";
					mes "insertarás la cuarta espada.^000000";
					next;
					switch(select("First Snake:Second Snake:Third Snake:Fourth Snake")) {
					default:
						break;
					case 3:
						set .@KHSwords,.@KHSwords+1;
						break;
					}

					if (.@KHSwords == 4) {
						mes "^3355FFTus oidos son repentinamente";
						mes "llenados con un sonido bajo,";
						mes "y tu mente";
						mes "y cuerpo se sienten como si hubieran";
						mes "sido llevados...^000000";
						set KHCottagePoem1,5;
						set KHCottagePoem2,3;
						close2;
						warp "kh_vila",178,72;
						end;
					}

					else {
						mes "^3355FFNo sucede nada...";
						mes "Probablemente no";
						mes "insertaste las espadas en";
						mes "la serpiente correcta. Por ahora,";
						mes "deberías devolver la espada,";
						mes "y entonces intentarlo más tarde.^000000";
						close;
					}
				}
			}
		}
	}
	else if ((KHCottagePoem1 == 5) && (KHCottagePoem2 == 3) || (KielHyreQuest >= 30)) {
		mes "^3355FFAquí hay un camino";
		mes "escondido que lleva a";
		mes "el laboratorio secreto.^000000";
		next;
		switch(select("Enter:Cancel")) {
		case 1:
			warp "kh_vila",178,72;
			end;
		case 2:
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, Secret Room; left test tube
//----------------------------------------------------------------------------
kh_vila,179,68,0	script	Test Tube#khp2	111,{
	mes "^3355FFÉste tubo de ensayo contiene";
	mes "a un hombre joven vestido con";
	mes "un uniforme de la Academia Kiel";
	mes "Hyre. De alguna manera, tienes";
	mes "sensación de que lo has";
	mes "visto en algún lugar.^000000";
	close;
}


//----------------------------------------------------------------------------
// Cottage interior, Secret Room; Right test tube
//----------------------------------------------------------------------------
kh_vila,185,68,0	script	Test Tube::TestTubeKHQ2	111,{
	if (KielHyreQuest > 28) {
		mes "^3355FFUn viejo y arrugado hombre de";
		mes "apariencia extraña está";
		mes "retenido dentro del tubo de ensayo.^000000";
		close;
	}
	else if (KielHyreQuest == 28) {
		mes "^3355FFUn viejo y arrugado hombre de";
		mes "apariencia extraña está";
		mes "retenido dentro del tubo de ensayo.";
		mes "Hay un pequeño boton rojo";
		mes "justo debajo del tubo de ensayo.^000000";
		next;
		switch(select("Press Button:Investigate Further")) {
		case 1:
			mes "[???]";
			mes "H-hola...? P-pueden";
			mes "oirme? No te reconosco...";
			mes "Pero... Tal vez olvidé?";
			mes "Espera, espera. Si tu eres mi amigo,";
			mes "entonces sabes como llamarme,";
			mes "correcto? Tu sabes que soy yo?";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "little lost devil") {
				mes "[???]";
				mes "Heh.... Heh heh...";
				mes "El sabe...Hey, tienes";
				mes "que recordar estos";
				mes "numeros. okay? N-no lo";
				mes "olvides, serán importantes...";
				mes "^FF00004^000000, ^FF00007^000000, ^FF00007^000000, ^FF00002^000000, ^FF00009^000000, ^FF00006^000000, ^FF00001^000000. Muy Bien...";
				next;
				mes "^3355FF4772961^000000";
				mes "^3355FFQué podrían^000000";
				mes "^3355FFsignificar^000000";
				mes "^3355FFestos números?^000000";
				//KHCottagePoem1 and KHCottagePoem2 no longer needed-- deleting
				set KHCottagePoem1,0;
				set KHCottagePoem2,0;
				set KielHyreQuest,30;
				close;
			}
			else {
				mes "[???]";
				mes "No.... No....";
				mes "Eso no es correcto.";
				mes "No creo que";
				mes "fueramos amigos. No...";
				close;
			}
		case 2:
			mes "^3355FFInvestiguemos";
			mes "un poco más está área";
			mes "primero.^000000";
			close;
		}
	}
	else if (KielHyreQuest >= 30) {
		if ((countitem(7491) > 0) && (countitem(7492) > 0)){
			mes "^3355FFQúe podría significar";
			mes "el número";
			mes " 4772961? Por ahora, has";
			mes "encontrado todo lo";
			mes "que necesitas de esté lugar,";
			mes "así que deberías regresar con Elly.^000000";
			close;
		}
		else {
			mes "^3355FFQúe podría significar";
			mes "el número";
			mes "4772961? Por ahora, mejor";
			mes "buscas en esta casa de campo";
			mes "por cualquier pista que puedas encontrar...^000000";
			close;
		}
	}
	end;
}

//============================================================================

//============================================================================
// Robot Factory NPCs
//============================================================================

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door
//----------------------------------------------------------------------------
kh_dun01,235,48,0	script	Heavy Door#kh1::HeavyDoorKHQ1	111,{
	if (KielHyreQuest < 38) {
		mes "^3355FFHay una larga y pesada";
		mes "puerta frente a ti.^000000";
		next;
		switch(select("Open Door:Cancel")) {
		case 1:
			input .@KHInput$;
			mes "^3355FFTratas de abrir la";
			mes "puerta empujando con todo";
			mes "tu poder, pero fracasas";
			mes "al hacerla mover.^000000";
			close;
		case 2:
			mes "^3355FFdecides dejar ésta";
			mes "puerta hasta que";
			mes "resuelvas como";
			mes "abrirla^000000";
			close;
		}
	}
	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "^3355FFHay una larga y pesada";
		mes "puerta frente a ti.^000000";
		next;
		switch(select("Open Door:Cancel")) {
		case 1:
			input .@KHInput$;
			if (.@KHInput$ == "Blue Keycard") {
				mes "^3355FFHas abierto exitosamente";
				mes "ésta puerta.";
				close2;
				warp "kh_school",119,144;
				end;
			}
			else {
				mes "^3355FFTratas de abrir la";
				mes "puerta empujandola con todo";
				mes "tu poder, pero fracasas";
				mes "al hacerla mover.^000000";
				close;
			}
		case 2:
			mes "^3355FFDecides dejar ésta";
			mes "puerta hasta";
			mes "que puedas resolver";
			mes "como abrirla.^000000";
			close;
		}
	}
	else {
		mes "^3355FFÉsta es una puerta";
		mes "increiblemente pesada que está fuertemente";
		mes "cerrada. No serás capaz de";
		mes "abrirla atravez de la fuerza bruta.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door (These doors don't seem to serve any purpose)
//----------------------------------------------------------------------------
kh_dun01,76,233,0	script	Heavy Door::HeavyDoorKHQ2	111,{
	if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "^3355FFHay una larga y pesada";
		mes "puerta frente a ti.^000000";
		next;
		switch(select("Open Door:Cancel")) {
		case 1:
			input .@KHInput$;
			mes "^3355FFTratas de abrir la";
			mes "puerta empujandola con todo";
			mes "tu poder, pero fallas";
			mes "al hacerla mover.^000000";
			close;
		case 2:
			mes "^3355FFdecides dejar la";
			mes "la puerta hasta que";
			mes "resuelvas";
			mes "como abrirla^000000";
			close;
		}
	}
	else {
		mes "^3355FFHay una larga y pesada";
		mes "puerta frente a ti^000000";
		close;
	}
}

kh_dun01,106,233,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh3	111
kh_dun01,6,164,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh4	111
kh_dun01,6,133,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh5	111
kh_dun01,6,60,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh6	111
kh_dun01,6,30,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh7	111
kh_dun01,6,18,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh8	111
kh_dun01,235,70,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh9	111
kh_dun01,235,92,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh10	111
kh_dun01,235,114,0	duplicate(HeavyDoorKHQ2)	Heavy Door#kh11	111

//----------------------------------------------------------------------------
// Beautiful Lady and Beautiful Lady copies.
//----------------------------------------------------------------------------
kh_school,119,149,4	script	Beautiful Lady#kh1::BeatifulLadyKHQ1	894,{
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 40) {
		mes "[Allysia]";
		mes "Hm? No creo";
		mes "conocerte. Kiel Hyre";
		mes "solo ha autorizado a Elly,";
		mes "y a un amigo de confianza que";
		mes "puede estar ayudandola, para";
		mes "ser admitida en ésta área.";
		next;
		mes "[Allysia]";
		mes "No puedo ver a ^FF0000Elly^000000.";
		mes "Ella tambien ha sido atacada?";
		mes "Tu eres ^FF0000el amigo de Elly^000000?";
		next;
		mes "[Allysia]";
		mes "No veo a Elly en ningular";
		mes "por aquí. Solo puedo dejarte";
		mes "entrar si puedes identificarte";
		mes "como amigo de Elly.";
		mes "Hay algo que puedas";
		mes "presentarme como prueba?";
		next;
		switch(select("Yellow Keycard:Blue Keycard:Golden Key:Carved Button:...?")) {
		default:
			break;
		case 3:
			mes "[Allysia]";
			mes "Ah, no es está la";
			mes "llave que Kiel Hyre le dio";
			mes "a Elly? Si, estoy convencido";
			mes "de que tú has estado ayudandola.";
			mes "Te he estado esperando, así";
			mes "que dejame guiarte a mi cuarto.";
			close2;
			cutin "",255;
			warp "kh_school",120,180;
			end;
		case 4:
			mes "[Allysia]";
			mes "Es-ese es el sello";
			mes "de Kiel. El te envió";
			mes "aquí por mi?! No estoy";
			mes "tomando ninguna oportunidad!";
			close2;
			cutin "",255;
			monster "kh_school",117,144,"Bomb",1745,1;
			monster "kh_school",117,144,"Bomb",1745,1;
			monster "kh_school",117,144,"Bomb",1745,1;
			monster "kh_school",117,144,"Bomb",1745,1;
			end;
		case 5:
			mes "[Allysia]";
			mes "......";
			mes "........";
			mes "...........";
			close2;
			cutin "",255;
			end;
		}
		mes "[Allysia]";
		mes "Hm? Esto realmente no pruebra";
		mes "que Elly realmente confia en ti...";
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest >= 40) {
		mes "[Allysia]";
		mes "Por favor sigueme.";
		close2;
		cutin "",255;
		warp "kh_school",120,180;
		end;
	}
}


kh_school,117,149,4	script	Beautiful lady#kh2::BeatifulLadyKHQ2	894,{
	end;
}
kh_school,118,149,4	duplicate(BeatifulLadyKHQ2)	Beautiful lady#kh3	894
kh_school,120,149,4	duplicate(BeatifulLadyKHQ2)	Beautiful lady#kh4	894
kh_school,121,149,4	duplicate(BeatifulLadyKHQ1)	Beautiful lady#kh5	894

//----------------------------------------------------------------------------
// Beautiful Lady "Allysia"
//----------------------------------------------------------------------------
kh_school,122,186,4	script	Beautiful Lady#kh6	894,{
	if (checkweight(7496,1) == 0) {
		mes "^3355FFUn momento...";
		mes "Estas cargando";
		mes "muchos items contigo,";
		mes "así que primero necesitarás";
		mes "liberar más espacio";
		mes "en tu inventario...^000000";
		close;
	}
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 38) {
		mes "[??????]";
		mes "Esto es propiedad privada.";
		mes "Por favor vete inmediatamente!";
		close2;
		cutin "kh_ellisia",255;
		warp "yuno_fild08",73,172;
		end;
	}
	else if (KielHyreQuest <= 38) {
		mes "[Allysia]";
		mes "Amigo del prototipo Elly,";
		mes "te doy la bienvenida. Como has";
		mes "notado, necesito tu";
		mes "ayuda. Kiel Hyre ha sido retenido";
		mes "en algún lugar dentro de esta fábrica.";
		next;
		mes "[Allysia]";
		mes "Es imperativo que";
		mes "busques a Kiel Hyre";
		mes "y lo rescates tan pronto como";
		mes "te sea posible!";
		next;
		switch(select("What is this factory?:What happened to ^FF0000Kiel Hyre^000000?")) {
		case 1:
			mes "[Allysia]";
			mes "Esta fábrica es parte de";
			mes "los negocios secretos de la";
			mes "Fundación Kiel Hyre en donde";
			mes "robots humanoides son manufacturados. Yo mismo,";
			mes "y todos los estudiantes de la academia somos";
			mes "en realidad robots, no humanos.";
			next;
			mes "[Allysia]";
			mes "La meta de la Fundación Kiel";
			mes "Hyre es desarrollar";
			mes "robots superiores que ayudarán";
			mes "a la sociedad humana. Como robots, podemos";
			mes "manejar tareas que son demasiado";
			mes "peligrosas o difíciles para humanos.";
			break;
		case 2:
			mes "[Allysia]";
			mes "^3355FFKiehl^000000 ha procedido a";
			mes "perform abnormal modifications";
			mes "a los robots humanoides. Esto";
			mes "ha sido reportado a Kiel Hyre,";
			mes "quien ha dejado de detener a Kiehl.";
			mes "Sin embargo, Hyre no  ha regresado.";
			next;
			mes "[Allysia]";
			mes "Temiendo que Kiehl me";
			mes "rompiera, Kiel Hyre trajo";
			mes "una copia de mi en su lugar todavía puedo";
			mes "detectar los latidos de Kiel Hyre,";
			mes "así que debería estar bien, pero su";
			mes "propio hijo podría lastimarlo pronto.";
			next;
			mes "[Allysia]";
			mes "Toma esta Keycard";
			mes "que te permitirá";
			mes "entrar a las areas secretas";
			mes "dentro de la fábrica.  Si";
			mes "localizas a Kiel Hyre, por favor";
			mes "dejame saberlo inmediatamente.";
			getitem 7496,1; //Red_Key_Card
			set KielHyreQuest,40;
			break;
		}
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest == 40) {
		mes "[Allysia]";
		mes "Todavía puedo detectar";
		mes "el latido de Kiel Hyre,";
		mes "pero su hijo Kiehl podría";
		mes "hacerle algo desesperado";
		mes "pronto. Por favor localiza a Kiel";
		mes "Hyre antes de que eso suceda!";
		close2;
		cutin "",255;
		warp "kh_dun01",22,216;
		end;
	}
	else if (KielHyreQuest == 42) {
		mes "[Allysia]";
		mes "Ya has localizado";
		mes "a Kiel Hyre?";
		next;
		mes "^3355FFLe dices a Allysia en donde^000000";
		mes "^3355FFen donde Kiel Hyre ha sido encerrado,^000000";
		mes "^3355FFy le das el fragmento de^000000";
		mes "^3355FFmetal que Kiel Hyre te^000000";
		mes "^3355FFentregó. Ella tomó el fragmento^000000";
		mes "^3355FFy se lo pusó alrededor de su muñeca.^000000";
		next;
		mes "[Allysia]";
		mes "...Kiel Hyre codigo secreto";
		mes "confirmado. Área B_2_3";
		mes "Signos vitales están normales.";
		mes "Sobre receivedó. Enviando";
		mes "Diseños de Títere modificados...";
		next;
		mes "[Allysia]";
		mes "Correcto, He recibidó";
		mes "las ordenes de Kiel Hyre, y";
		mes "debo llevarlas a cabo...";
		delitem 7497,1; //Steel_Piece
		set KielHyreQuest,44;
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest == 44) {
		mes "[Allysia]";
		mes "Correcto, tengo una misión";
		mes "que llevar a cabo para Kiel Hyre,";
		mes "y no tengo mucho tiempo.";
		mes "Dejame darte algunas instrucciones";
		mes "específicas muy rápido.";
		next;
		mes "[Allysia]";
		mes "Primero, necesito tomar tus";
		mes "keycards por razones de seguridad.";
		mes "Segundo, veme en la mansión de";
		mes "Kiel Hyre en Lighthalzen.";
		mes "Presenta la Golden Key para";
		mes "ser admitido al edifcio.";
		delitem 7492,1; //Yellow_Key_Card
		delitem 7495,1; //Blue_Key_Card
		delitem 7496,1; //Red_Key_Card
		set KielHyreQuest,46;
		next;
		mes "[Allysia]";
		mes "Entiendo que esto";
		mes "es repentino, y no te estoy";
		mes "una explicación";
		mes "completa, pero algo";
		mes "horrible pasará si yo no me";
		mes "marcho tan rápido como sea posible.";
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest >= 44) {
		mes "[Allysia]";
		mes "Entiendo que esto";
		mes "es repentino, y no estoy";
		mes "dando una explicación";
		mes "completa, pero algo";
		mes "horrible pasará si yo no";
		mes "me marcho tan rápido como sea posible.";
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
}

//----------------------------------------------------------------------------
// Signboard (another useless NPC?)
//----------------------------------------------------------------------------
kh_dun01,163,223,4	script	Signboard#kh	857,{
	mes "[Notice]";
	mes "Cute Pets están prohibidos";
	mes "en ésta área. (Cute Pets que";
	mes "proporcionan asistencia especial";
	mes "a los discapacitados visuales están";
	mes "exentos de ésta regla.)";
	close;
}

//----------------------------------------------------------------------------
// Mechanical Devices for accessing restricted area
//----------------------------------------------------------------------------
kh_dun01,166,223,0	script	Mechanical Device#kh::KHKeyardReader	111,{
	if ((KielHyreQuest <= 38) || (KielHyreQuest >= 44)) {
		mes "^3355FFEncontraste";
		mes "un dispositivo mecánico.";
		mes "Parece que puede ser";
		mes "operado insertando la";
		mes "keycard correcta en la ranura.^000000";
		close;
	}
	else if ((KielHyreQuest == 40) && (countitem(7496) >= 1)) {
		mes "^3355FFEncontraste";
		mes "un dispositivo mecánico.";
		mes "Parece que puede ser";
		mes "operado insertando la";
		mes "la keycard correcta en la ranura.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "Red Keycard") {
			mes "^3355FFLa puerta se abrio una vez";
			mes "que insertaste la Red Keycard.^000000";
			close2;
			warp "kh_dun01",170,227;
			end;
		}
		else {
			mes "^3355FFNada sucede.^000000";
			close;
		}
	}
}

kh_dun01,162,206,0	duplicate(KHKeyardReader)	Mechanical Device	111

//----------------------------------------------------------------------------
// Keep monsters out of the quest area.
// Silly really since the rest of it's a dungeon
//----------------------------------------------------------------------------
//kh_dun01,180,220,0	script	Monster Warp#kh1::KHMobWarp	-1,5,20,{
//OnTouchNPC:
//	warp "kh_dun01",178,138;
//	end;
//}

//kh_dun01,190,220,0	duplicate(KHMobWarp)	Monster Warp#kh2	-1,5,20
//kh_dun01,200,250,0	duplicate(KHMobWarp)	Monster Warp#kh3	-1,5,20
//kh_dun01,210,220,0	duplicate(KHMobWarp)	Monster Warp#kh4	-1,5,20
//kh_dun01,220,220,0	duplicate(KHMobWarp)	Monster Warp#kh5	-1,5,10

//----------------------------------------------------------------------------
// Kiel Hyre - OnTouch
//----------------------------------------------------------------------------
kh_dun01,224,233,0	script	Factory B Area Door	-1,5,5,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 40) {
		if (checkweight(7497,1) == 0) {
			mes "^3355FFUn momento...";
			mes "Ahora mismo estas";
			mes "llevando demasiados items";
			mes "contigo, así que primero";
			mes "necesitarás liberar más";
			mes "espacio en tu Inventario...^000000";
			close;
		}
		mes "^3355FFPuedes sentir ligeramente una";
		mes "voz de el otro";
		mes "lado de ésta puerta.^000000";
		next;
		mes "[????]";
		mes "^333333...Kiehl....";
		mes "...Cómo te atreves...!^000000";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Mister Kiel Hyre!?";
		mes "Está usted aquí?";
		next;
		mes "[Kiel Hyre]";
		mes "Qu.quién está ahi?";
		mes "Identificate!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Yo soy...Yo soy...";
		next;
		mes "^3355FFExplicaste tu historia";
		mes "a la voz detrás de";
		mes "la puerta, y le dijisté lo que";
		mes "le sucedio a Elly y Allysia.^000000";
		next;
		mes "[Kiel Hyre]";
		mes "^333333...Sí... Soy yo.";
		mes "Yo soy Kiel Hyre, atrapado";
		mes "aquí. El fue muy lejos";
		mes "como para modificar a Elly, eh?";
		mes "...............................^000000";
		next;
		mes "[Kiel Hyre]";
		mes "^333333Rápido, lleva éste";
		mes "módulo a Allysia!";
		mes "Ella sabrá que hacer";
		mes "con el. Sí, ya estás";
		mes "ayudandonos, entonces ella tendrá";
		mes "algunas instrucciones para ti tambien.^000000 ";
		next;
		mes "^3355FFKiel Hyre desliza";
		mes "un extraño pedazo";
		mes "de metal por el";
		mes "espacio entre la";
		mes "puerta y el piso.^000000";
		getitem 7497,1; //Steel_Piece
		set KielHyreQuest,42;
		close;
	}

	else if (KielHyreQuest >= 42) {
		mes "[Kiel Hyre]";
		mes "......";
		close;
	}
}

//----------------------------------------------------------------------------
// Robot Factory Second Floor Entrances
//----------------------------------------------------------------------------
kh_dun01,44,203,0	script	Entrance Device#khd2::KHAccess	111,{
	if (countitem(7509) < 1) {
		mes "^3355FFEncontraste";
		mes "un dispositivo mecánico.";
		mes "Parece que puede ser";
		mes "operado insertando la";
		mes "keycard correcta en la ranura.^000000";
		close;
	}
	else {
		mes "^3355FFEncontraste";
		mes "un dispositivo mecánico.";
		mes "Parece que puede ser";
		mes "operado insertando la";
		mes "keycard correcta en la ranura.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "Luxurious Keycard") {
			mes "^3355FFAl insertar";
			mes "la Luxurious Keycard";
			mes "en la ranura de la keycard,";
			mes "la puerta oscila abierta";
			mes "para revelar el largo vuelo";
			mes "estrellas descendiendo.^000000";
			next;
			switch(select("Descend Stairs:Cancel")) {
			case 1:
				warp "kh_dun02",41,198;
				end;
			case 2:
				mes "^3355FFParece que ésta puerta";
				mes "se ha cerrado automáticamente";
				mes "después de que el tiempo";
				mes "límite programado ha transcurrido.^000000";
				close;
			}
		}
		else {
			mes "^3355FFTratas de abrir la";
			mes "puerta empujando con todo";
			mes "tu poder, pero fracasas";
			mes "al hacerla mover.^000000";
			close;
		}
	}
}

kh_dun01,36,195,0	duplicate(KHAccess)	Entrance Device#khd1	111

//============================================================================

//============================================================================
// Kiel Hyre Mansion NPCs, and Kiehl's Room NPCs
//============================================================================

//----------------------------------------------------------------------------
// Kiel's Steward
//----------------------------------------------------------------------------
kh_mansion,78,55,5	script	Steward#kh	109,{
	if (KielHyreQuest < 46) {
		mes "[Steward]";
		mes "Ésta es una residencia privada,";
		mes "por favor marchate.";
		close2;
		warp "lighthalzen",188,201;
		end;
	}
	if ((KielHyreQuest >= 46) && (KielHyreQuest < 50)) {
		mes "[Steward]";
		mes "Saludos.";
		mes "Has sido invitadó";
		mes "por el dueño de";
		mes "ésta mansión?";
		next;
		switch(select("Present Golden Key:????")) {
		case 1:
			mes "[Steward]";
			mes "Ah, Maestro "+strcharinfo(0)+".";
			mes "He estado esperando su";
			mes "arrivo. Por favor, por aquí.";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[Steward]";
			mes "Si no has sido";
			mes "invitado por el dueño de";
			mes "ésta mansión, entonces me";
			mes "temo que debo insistir en";
			mes "su partida inmediata!";
			close2;
			warp "lighthalzen",188,201;
			end;
		}
	}
	if ((KielHyreQuest >= 50) && (KielHyreQuest < 64) || (KielHyreQuest >= 70)) {
		mes "[Steward]";
		mes "Ah, Maestro "+strcharinfo(0)+".";
		mes "Es un placer";
		mes "recibir su compañía";
		mes "una vez más. Te gustaría";
		mes "ver a mi maestro?";
		next;
		switch(select("Yes:No")) {
		case 1:
			mes "[Steward]";
			mes "Muy bien.";
			mes "Por aquí~";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[Steward]";
			mes "Muy bien.";
			mes "Por favor pongase";
			mes "cómodo.";
			close;
		}
	}
	if ((KielHyreQuest == 52) || (KielHyreQuest == 54) || (KielHyreQuest >= 64) && (KielHyreQuest <= 70)) {
		mes "[Steward]";
		mes "Ah, Maestro "+strcharinfo(0)+".";
		mes "Es un placer";
		mes "recibir su compañía";
		mes "una vez más. Te gustaría";
		mes "ver a mi maestro, o...?";
		next;
		switch(select("^FF0000Kiel Hyre^000000:^3355FFMitchell^000000")) {
		case 1:
			mes "[Steward]";
			mes "Muy bien.";
			mes "Por aquí~";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[Steward]";
			mes "Oh...? Tu debes";
			mes "estár aquí para traer";
			mes "buenas noticias. Disculpa...";
			next;
			mes "^3355FFThe Steward furtivamente^000000";
			mes "^3355FFmiró alrededor para chekar^000000";
			mes "^3355FFsi alguien lo esta observando.^000000";
			next;
			mes "[Steward]";
			mes "Yo creo que sería";
			mes "suficientemente seguro para dejarte";
			mes "ir a verlo ahora...";
			mes "Por favor, rápido por aquí.";
			close2;
			warp "kh_mansion",20,87;
			end;
		}
	}
}

//----------------------------------------------------------------------------
// Kiel Hyre
//----------------------------------------------------------------------------
kh_mansion,22,28,4	script	Kiel Hyre#kh	903,{
	if (checkweight(908,200) == 0) {
		mes "^3355FFUn momento...";
		mes "Ahora mismo estas llevando";
		mes "demasiados items";
		mes "contigo, así que necesitarás";
		mes "liberar más espacio";
		mes "en tu Invetario primero...^000000";
		close;
	}

	cutin "kh_kyel01",2;
	if (KielHyreQuest < 46) {
		mes "[Kiel Hyre]";
		mes ".........";
		mes ".........";
		mes "............";
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest == 46) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Ah, tu debes ser "+strcharinfo(0)+".";
		mes "Me gustaría agradecerte por salvar";
		mes "mi vida. Debes tener muchas";
		mes "preguntas que hacerme, así que";
		mes "haré mi mejor esfuerzo por darte una respuesta.";
		next;
		while(1) {
			switch(select("Robots?:^3355FFKiehl^000000?:^FF0000Elly^000000's button?")) {
			case 1:
				mes "[Kiel Hyre]";
				mes "He estado investigando";
				mes "robotica por treinta y dos";
				mes "años. Estoy orgulloso de";
				mes "decir que he tenido éxito";
				mes "en donde el gran Sage";
				mes "Varmundt no.";
				next;
				mes "[Kiel Hyre]";
				mes "Ha sido mi sueño";
				mes "desarrollar robots humanoides";
				mes "a partir de humanos. Esos Guardianes";
				mes "podrían ser robots tambien, pero ellos";
				mes "no operan usando el libre albedrío.";
				next;
				mes "[Kiel Hyre]";
				mes "Si quisieras saber más";
				mes "en concreto acerca de";
				mes "robotica, por qué no hablas";
				mes "con ^3355FFAllysia^000000? Ella puede explicar";
				mes "todo mucho más resumido";
				mes "de lo que yo puedo. Yo tiendo a divagar...";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			case 2:
				mes "[Kiel Hyre]";
				mes "^3355FFKiehl^000000 mi único hijo,";
				mes "pero el amor de mi vida";
				mes "murió después de darlo a";
				mes "luz. Admito que él es";
				mes "un genio en diseño";
				mes "mecánico y desarrollo.";
				next;
				mes "[Kiel Hyre]";
				mes "Él es responsable en gran parte";
				mes "por la creación de la Third";
				mes "Generation de robots como Elly.";
				mes "Desafortunadamente, él está tratando de";
				mes "modificar sus creaciones por";
				mes "algún proposito siniestro.";
				next;
				mes "[Kiel Hyre]";
				mes "Yo traté de detenerlo,";
				mes "pero terminé siendo";
				mes "encerrado dentro de la fábrica.";
				mes "No se por que él quiere";
				mes "hacer esto. Todavía no tengo";
				mes "pista alguna...";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			case 3:
				mes "[Kiel Hyre]";
				mes "Ese botón que Elly estaba";
				mes "sosteniendo tenía ^3355FFel emblema de Kiehl^000000";
				mes "gravado en el. A, y ese";
				mes "hombre de negro amenazando a los";
				mes "estudiantes? Ese probablemente erá";
				mes "^3355FFKaiser^000000, el guardaespaldas de Kiehl.";
				next;
				mes "[Kiel Hyre]";
				mes "Kaiser....";
				mes "Yo no se";
				mes "nada sobre él.";
				mes "Ni siquiera he visto su";
				mes "cara! Kiehl solo lo contrató";
				mes "sin dejarme saberlo...";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			}
			if (.@KHQRead == 3) {
				mes "[Kiel Hyre]";
				mes "Si no tienes";
				mes "ninguna otra pregunta para mi,";
				mes "entonces me dejarías descansar";
				mes "por favor? Todavía no me";
				mes "siento bien desde el tiempo";
				mes "que fui encerrado en la fábrica.";
				delitem 7493,1; //Golden_Key
				delitem 7494,1; //Kiel_Button
				set KielHyreQuest,48;
				break;
			}
		}
	}
	else if (KielHyreQuest == 48) {
		mes "[Kiel Hyre]";
		mes "Ah, casi lo olvido.";
		mes "Por favor, toma esto como";
		mes "una pequeña recompensa por";
		mes "salvar mi vida.";
		getitem 12105,1; //Taming_Gift_Set
		getexp 70000,0;
		set KielHyreQuest,50;
	}
	else if ((KielHyreQuest >= 50) && (KielHyreQuest < 64)) {
		mes "[Kiel Hyre]";
		mes "Si no tienes";
		mes "ninguna otra pregunta para mi";
		mes "entonces por favor me";
		mes "dejarías descansar?? Todavía no me";
		mes "siento bien desde el tiempo";
		mes "que estuve encerrado en la fábrica.";
	}
	else if (KielHyreQuest == 64) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Hm? Tenías";
		mes "algo que";
		mes "querías";
		mes "preguntarme?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Todavía no tengo";
		mes "suficiente evidencia concreta,";
		mes "pero podría tener algunas";
		mes "preguntas pronto.";
	}
	else if (KielHyreQuest == 68) {
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "Ah "+strcharinfo(0)+".";
		mes "Eres tú. Así que como puedo";
		mes "ayudarte el día de hoy?";
		next;
		select("Acerca de ^3355FFAllysia^000000...");
		mes "["+strcharinfo(0)+"]";
		mes "Sabes, estuve buscando";
		mes "a través de ésta casa";
		mes "en Juno, y descubrí";
		mes "un viejo retrato de una mujer que";
		mes "se ve como Allysia.";
		next;
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "Oh....";
		mes "Eso es todo?";
		mes "Pensé que tenías";
		mes "preguntas sobre robotica.";
		next;
		cutin "kh_Kyel03",2;
		mes "[Kiel Hyre]";
		mes "De cualquier forma, es una";
		mes "extraña coincidencia.";
		mes "Bueno, supongo que no es";
		mes "tan extraño encontrar";
		mes "alguien que se paresca a otra persona..";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "No creo que sea solo";
		mes "una coincidencia. La mujer";
		mes "en ese retrato de 30 años";
		mes "tambien era llamada Allysia, y";
		mes "trabajó en la calle Orisimier";
		mes "en Juno. Eso suena una campana?";
		next;
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "......";
		mes ".........";
		mes "............";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "Entonces yo pienso que esa";
		mes "Allysia debe haber sido la";
		mes "mujer que amaste, y";
		mes "que basaste la apariencia de tus";
		mes "robots en ella.";
		next;
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "............";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "Yo pienso que esto es lo que pasó:";
		mes "cuando tú eras pobre hombre";
		mes "joven, te enamorasté de";
		mes "Allysia. Sin embargo, ella estaba";
		mes "de Rosimier, quien";
		mes "era rico y poderoso.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Sin embargo, Rosimier estaba";
		mes "comprometido con alguna otra";
		mes "mujer, y terminó";
		mes "casandose con su prometida, esto";
		mes "rompió el corazón de Allysia.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Sintiendose traicionada, con su";
		mes "corazón roto, Allysia salto";
		mes "al río. Entonces tu decidisté";
		mes "vengarte de Rosimier, así que";
		mes "terminaste uniendo a la";
		mes "Corporación Rekenber!";
		next;
		cutin "kh_Kyel03",2;
		mes "[Kiel Hyre]";
		mes "Hahahahahahaha!!!";
		mes "Oh, que imaginación~";
		mes "Eso es muy ridiculo...";
		mes "Pensé, Yo admito, tal vez";
		mes "yo diseñe a Allysia después";
		mes "de ver a esa mujer años atras.";
		next;
		mes "[Kiel Hyre]";
		mes "Casi me habia olvidado";
		mes "de ella! Yo pienso que";
		mes "eramos amigos... Sin embargo,";
		mes "de donde sacaste esa idea";
		mes "de que yo pode haber";
		mes "estado enamorado de ella?";
		next;
		select("Revelar el retrato de Kiel de la Cabaña");
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "Qu-qué...";
		mes "Cómo pudiste...";
		mes "Dondé...?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Kiel Hyre, yo encontré éste";
		mes "retrato de ti como un hombre";
		mes "joven de la casa del";
		mes "hombre que compró el anillo de Allysia.";
		mes "Hasta hablé con el pescador";
		mes "que descubrió el cuerpo de Allysia.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Pagasté una horrorosa cantidad";
		mes "de dinero para comprar el anillo de Allysia.";
		mes "Cómo puedes decirme";
		mes "que no la amabas?";
		next;
		cutin "kh_Kyel03",2;
		mes "[Kiel Hyre]";
		mes "*Suspiro...*";
		mes "Me atrapaste, me atrapaste.";
		mes "No quería que supieras";
		mes "la verdad. Estás en lo cierto.";
		mes "Amaba a Allysia, y diseñe";
		mes "mi robot para que se vea como ella.";
		next;
		mes "[Kiel Hyre]";
		mes "Nunca podría olvidarla.";
		mes "Nunca. Pero nunca";
		mes "haría nada para dañar a los";
		mes "Rosimiers! Soy un cientifico!";
		mes "Lo odiaba cuando era joven,";
		mes "pero es diferente ahora!";
		next;
		mes "[Kiel Hyre]";
		mes "No derramé lagrimas cuando los";
		mes "Rosimiers cayeron, pero no era";
		mes "responsable. Además, no tenía";
		mes "los recursos o la";
		mes "capasidad para causarlo...";
		next;
		cutin "kh_kyel02",2;
		mes "["+strcharinfo(0)+"]";
		mes "Temo que la";
		mes "evidencia muestre lo contrario.";
		next;
		select("Mostrar retrato de los Rosimiers");
		mes "["+strcharinfo(0)+"]";
		mes "Mira bien";
		mes "este retrato que";
		mes "encontré en la vieja casa";
		mes "de los Rosimiers. ¿Notas";
		mes "algo... incriminante?";
		next;
		cutin "kh_Kyel03",2;
		mes "[Kiel Hyre]";
		mes "Aparte de";
		mes "James Rosimier";
		mes "No! No veo";
		mes "nada malo en";
		mes "este retrato.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Mira bien";
		mes "el reloj de bolsillo";
		mes "en el retrato. Es";
		mes "el mismo que estás";
		mes "usando hoy, ¿o no?";
		next;
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "...!!!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Tal vez no causaste";
		mes "la caída de los Rosimiers";
		mes "tú solo, pero con la ayuda de";
		mes "la Rekenber Corporation,";
		mes "diría que fué totalmente posible!";
		next;
		cutin "kh_Kyel03",2; 
		mes "[Kiel Hyre]";
		mes "Bien hecho, aventurero.";
		mes "Bien hecho. No me arrepiento";
		mes "de lo que hice: ellos mataron a";
		mes "mi Allysia! Si James no la hubiera";
		mes "traicionado, si solo no la hubiera";
		mes "conducido al suicidio...";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ahí es donde te equivocas!";
		mes "Allysua fue asesinada, no se";
		mes "suicidó. Mira bien";
		mes "esta nota que tengo aquí!";
		next;
		mes "[Kiel Hyre]";
		mes "Qué!?!?";
		next;
		select("Mostrar nota de James.");
		mes "[Kiel Hyre]";
		mes "Qué prueba esto?";
		mes "Esto no demuestra que";
		mes "James no traiciono a Allysia.";
		mes "Cómo modifica algo esto?";
		mes "Está muerta, y nada de lo que haga";
		mes "me la va a devolver con vida.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Nunca dije que James no";
		mes "la traicionara. Mira la fecha";
		mes "en la nota. James hizo planes";
		mes "para escapar con ella el 20 de Agosto.";
		mes "Sin embargo, su cuerpo fue";
		mes "encontrado el mismo dá.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ergo, Allysia debe";
		mes "haber muerto en 19 de Agosto. Si";
		mes "planeaba escapar con";
		mes "su amado al día siguiente, no";
		mes "tenía razon para suicidarse!";
		next;
		mes "[Kiel Hyre]";
		mes "No, eso no es cierto!";
		mes "Probablemente no pudo";
		mes "confiar en mi! Se debe de";
		mes "haber dado cuenta que no era nada";
		mes "más que otro juguete para él!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ah si? Yo digo que saltó";
		mes "al río porque tú";
		mes "te encontraste con ella ese día. Ahora,";
		mes "mira bien esto!";
		next;
		select("Mostrar nota de K.H.");
		mes "["+strcharinfo(0)+"]";
		mes "Esta nota fue escrita por";
		mes "un hombre con tus iniciales,";
		mes "K.H.. Estas iniciales tambien estaban";
		mes "en su retrato. Tu";
		mes "debes haber escrito esta nota:";
		mes "hay demasiadas coincidencias!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "De acuerdo con esta nota,";
		mes "le dijiste a Allysia que";
		mes "querías verla de nuevo";
		mes "en el lugar que se conocieron.";
		mes "Pienso que la volviste a ver...";
		mes "el 19 de Agosto, el día que ella murió!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Estoy asumiendo que el lugar";
		mes "en donde ustedes dos se vieron por primer vez fue cerca del";
		mes "río. Ya no más de tus mentiras:";
		mes "¡Dime lo que en verdad sucedió!";
		next;
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "............";
		mes ".........";
		mes "......";
		next;
		cutin "kh_Kyel03",2;
		mes "[Kiel Hyre]";
		mes "Hah... Ha ha ha....";
		mes "Si... Esa noche...";
		mes "Esa horrible noche.";
		mes "La recuredo bien...";
		mes ".....................";
		next;
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "Es noche, cuando ella vinó";
		mes "al río a encontrarse conmigo como";
		mes "como se lo pedí. le rogué";
		mes "que huyerá conmigo, en lugar";
		mes "de esperar por ese James.";
		next;
		mes "[Kiel Hyre]";
		mes "Ella insistió en que James";
		mes "nunca la traicionó, y que él";
		mes "prometió llevarsela";
		mes "con el al siguiente día. ¿Puedes";
		mes "imagina como me hizó sentir";
		mes "eso? Yo era nada para ella.";
		next;
		mes "[Kiel Hyre]";
		mes "!Mis sentimientos no le importaron";
		mes "en lo absoluto! Ella se mantuvo moviendo ese";
		mes "anillo nerviosamente....Yo perdí el control";
		mes "y traté de quitarle ese maldito";
		mes "anillo, y";
		mes "tirarlo al río...";
		next;
		mes "[Kiel Hyre]";
		mes "Pero sabes que?";
		mes "Ella luchó, ella de hecho";
		mes "me dio pelea! Fue una pequeña";
		mes "pelea, pero entonces, antes de que lo supiera,";
		mes "el piso debajo de nosotros";
		mes "colapso y... las gotas...";
		next;
		select(".........");
		mes "[Kiel Hyre]";
		mes "No estoy seguro de que";
		mes "fue. La lluvia debilitó";
		mes "el piso, algo estuvo";
		mes "mal....y ella solo... solo";
		mes "El río se la tragó...";
		mes "Me sentí vacío. Ella se fue. ";
		delitem 7499,1; //Family_Portrait
		delitem 7500,1; //Elysia_Portrait
		delitem 7501,1; //Kyll_Hyre_Letter2
		delitem 7502,1; //Piece_Memo_Of_James
		delitem 7503,1; //Man_Portrait
		set KielHyreQuest,70;
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest <= 70) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Ya sabes que";
		mes "ella fue encontrada muerta al";
		mes "día siguiente. Pero lo que realmente";
		mes "rompió mi corazón fue que";
		mes "ella sostuvo ese anillo tan fuertemente";
		mes "en su mano, aún en la muerte...";
		next;
		cutin "kh_kyel03",2;
		mes "[Kiel Hyre]";
		mes "Su familia tiene todo";
		mes "mientras yo tengo nada. Y";
		mes "él tiene el atrevimiento de alejar";
		mes "a Allysia de mi?!";
		mes "¿Cómo podría eso ser correcto?";
		next;
		mes "[Kiel Hyre]";
		mes "Aunque ella haya fallecido,";
		mes "todavía quiero probarle a";
		mes "Allysia que tipo de fea";
		mes "persona era James realmente.";
		mes "Eso fue cuando yo me uní a la";
		mes "Corporación Rekenber.";
		next;
		mes "[Kiel Hyre]";
		mes "Yo diseñe la primera de la";
		mes "First Generation Robot, a la cual";
		mes "nombre Allysia, y vendí los";
		mes "diseños a Rekenber. I les dí sus";
		mes "robots, y ellos me dieron dinero,";
		mes "poder, subordinados obedientes.";
		next;
		mes "[Kiel Hyre]";
		mes "Por supuesto, yo sabía que usarían";
		mes "mis robots para spiar y matar!";
		mes "Pero sabes que? No me";
		mes "importa en tanto ellos me den";
		mes "los medios para mi venganza. Era";
		mes "la asociación perfecta, de verdad.";
		next;
		mes "[Kiel Hyre]";
		mes "Acertates en donde";
		mes "me quieres.";
		mes "Para quién estas trabajando,";
		mes "que quieres";
		mes "exactamente? ¿Mis diseños?";
		mes "¡Mi muerte? ¿Todo...?";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "En realidad, yo solo quiero";
		mes "preguntarte acerca de la naturaleza";
		mes "de tu relación";
		mes "profesinal con la";
		mes "Corporación Rekenber.";
		mes "Y acerca de Kiehl.";
		next;
		mes "[Kiel Hyre]";
		mes "Kiehl, eh? Después de";
		mes "oir mi loca historia, estoy suponiendo";
		mes "que realmente sospechas";
		mes "de la verdad acerca de él... Él tambien";
		mes "es un robot, especificamente el primero";
		mes "de los modelos de la Second Generation.";
		next;
		mes "[Kiel Hyre]";
		mes "Su mente fue desarrollada usando";
		mes "un experimental e inestable";
		mes "forma de Condensed Magic";
		mes "Spell Scrolls. Él fue el único";
		mes "robot de la Second Generation";
		mes "que me fue permitido mantener.";
		next;
		mes "[Kiel Hyre]";
		mes "Me volví muy apegado";
		mes "a Kiehl. No es nada sorprendente,";
		mes "viendo que la robotica se ha";
		mes "vuelto mi vida. Hasta lo críe";
		mes "como a mi propio hijo, y le enseñé";
		mes "todo acerca de robotica";
		next;
		mes "[Kiel Hyre]";
		mes "Kiehl es ahora un genio,";
		mes "y hasta ha desarrollado la";
		mes "Third Generation de robots.";
		mes "Desafortunadamente, fallé";
		mes "en criarlo apropiadamente";
		mes "humanos morales y éticos.";
		next;
		select("......");
		mes "[Kiel Hyre]";
		mes "Él ha estado transformando";
		mes "a los robots de la Third Generation";
		mes "en máquinas asesinas. Por eso";
		mes "es que traté de ponerlos a todos";
		mes "dentro de la academia, así";
		mes "podrían aprender el comportamiento humano.";
		next;
		mes "[Kiel Hyre]";
		mes "Aunque la academia ha";
		mes "retrasado los planes de Kiehl,";
		mes "él ha tenidó exito al";
		mes "convertir a todos los robots";
		mes "en máquinas incontrolables";
		mes "de destrucción masiva.";
		next;
		mes "[Kiel Hyre]";
		mes "Sí, él ha estado trabajando";
		mes "estrechamente con Rekenber.";
		mes "Su verdadero objetivo es";
		mes "crear máquinas asesinas";
		mes "para el uso de Rekenber.";
		next;
		mes "[Kiel Hyre]";
		mes "Ahora conoces todos los secretos";
		mes "de mi pasado. No estoy";
		mes "enojado contigo o con algo,";
		mes "pero tengo algo que";
		mes "quiero pedirte.";
		next;
		mes "[Kiel Hyre]";
		mes "Por favor! Deten a Kiehl!";
		mes "No quiero que enloquesca";
		mes "para destruir más robots!";
		mes "Yo veo a todos y cada uno";
		mes "de ellos como a uno de mis hijos!";
		next;
		mes "[Kiel Hyre]";
		mes "Sé que debo tomar";
		mes "toda la reponsabilidad por todo";
		mes "lo que ha pasado. Prometo";
		mes "tomar cualquier castigo por";
		mes "mis acciones una vez que todo";
		mes "haya sido resuelto.";
		next;
		select("Aceptar:Okay.:No.");
		mes "[Kiel Hyre]";
		mes "Muchas Gracias!";
		mes "Puedes encontrar a Kiehl";
		mes "en los niveles subterráneos";
		mes "en ésta mansión.";
		next;
		mes "[Kiel Hyre]";
		mes "Él se queda en el viejo cuarto";
		mes "en donde fue creado, pero";
		mes "pero lo reconstruyó como algún";
		mes "tipo de cueva para mantener a todos";
		mes "alejados, incluyendome. Sí, él";
		mes "no confia en nadie nunca más...";
		next;
		mes "[Kiel Hyre]";
		mes "Cuando lo encuentres, quiero";
		mes "que quites el anillo de";
		mes "Allysia de su corazón. Si lo";
		mes "quitas, eso evitará que se";
		mes "vuelva berserk.";
		next;
		select("Allysia's Ring!?");
		mes "[Kiel Hyre]";
		mes "Sí... su anillo es el";
		mes "principio de todo.";
		mes "Yo lo pusé en su corazón así";
		mes "nunca olvidaría lo que";
		mes "Rosimiers me hizó.";
		next;
		mes "[Kiel Hyre]";
		mes "Creo que Kiehl se";
		mes "volvió tan fuerte que las";
		mes "armas normales podría no funcionar";
		mes "en el nunca más. Usa éste";
		mes "dispositivo que hará que su";
		mes "fuente de poder fluctue.";
		getitem 7504,1; //Toy_Motor
		next;
		cutin "kh_kyel03",2;
		mes "[Kiel Hyre]";
		mes "Si juntas exitosamente esto,";
		mes "al cuerpo de kiehl, entonces";
		mes "el no podrá usar todo el poder";
		mes "de su cuerpo. Mientras éste";
		mes "debilitado, abre su pecho";
		mes "y quita el anillo de su corazón.";
		next;
		mes "[Kiel Hyre]";
		mes "Permiteme saber cuando";
		mes "estés listo. Entonces, te";
		mes "guiaré al cuarto de Kiehl.";
		set KielHyreQuest,74;
	}
	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 104)) {
		mes "[Kiel Hyre]";
		mes "¿Estás listo";
		mes "ahora para";
		mes "confrontar a Kiehl?";
		next;
		switch(select("Yes:No")) {
		case 1:
			mes "[Kiel Hyre]";
			mes "Ahí.... ahora el pasaje";
			mes "pasaje secreto está abierto.";
			mes "Solo ve a mi derecha,";
			mes "pero sé cuidadoso. Kiehl";
			mes "es extremadamente peligroso.";
			close2;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			cutin "",255;
			end;
			break;
		case 2:
			mes "[Kiel Hyre]";
			mes "Por favor toma";
			mes "tu tiempo. Imagino";
			mes "que no será fácil.";
			break;
		}
	}
	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Está de vuelta...!";
		mes "¿Entonces, fuiste capaz";
		mes "de recuperar el anillo de";
		mes "Allysia del corazón de Kiehl?";
		next;
		if (countitem(7508) < 1) {
			mes "[Kiel Hyre]";
			mes "¿Quieres decir... que no lo tienes?";
			mes "Por favor, recupera el anillo de Allysia";
			mes "del corazón de Kiehl!";
			next;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			close2;
			cutin "",255;
			end;
		}
		mes "[Kiel Hyre]";
		mes "¿Qu-qué sucedió..?";
		mes "¿Kiehl desarrollo un nuevo";
		mes "cuerpo para si mismo? Es-eso";
		mes "lo haría un robot de";
		mes "Fourth Generation. No tenía";
		mes "idea de que fuera tan listo.";
		next;
		mes "[Kiel Hyre]";
		mes "Espera, ahora que lo";
		mes "pienso, ví cuerpos de robot que se";
		mes "veían como Kiehl cuando estuvé";
		mes "encerrado en la fábrica. Así que";
		mes "él estaba usando esas copias para";
		mes "desarrollar mejoras personales.";
		next;
		mes "[Kiel Hyre]";
		mes "Aquí, por favor tomar ésta";
		mes "Keycard la cual te permitirá";
		mes "entrar e investigar los";
		mes "niveles más bajos de la fábrica.";
		mes "Investigaré el cuarto de Kiehl.";
		getitem 7509,1; //Fancy_Key_Card
		set KielHyreQuest,108;
		next;
		if (sex == 0) {
			if (getpartnerid() == 0) set .@KHTitle$,"Miss";
			else set .@KHSTitle$,"Mrs";
		}
		else set .@KHTitle$,"Mr";
		mes "[Kiel Hyre]";
		mes "Kiehl es mi responsabilidad...";
		mes "Sin importar cual sea el";
		mes "costo, tengo que detenerlo! Oh,";
		mes "y aquí, por favor toma esto";
		mes "con mis agradecimientos por toda";
		mes "tu ayuda. "+.@KHTitle$+" "+strcharinfo(0)+".";
		getitem 616,1;  //Old card Album
		delitem 7508,1; //Elysia_Ring
		getexp 100000,0;
	}
	else if (KielHyreQuest >= 108) {
		mes "[Kiel Hyre]";
		mes "......";
		mes ".........";
		mes "............";
	}
	close2;
	cutin "",255;
	end;
}


//----------------------------------------------------------------------------
// Allysia
//----------------------------------------------------------------------------
kh_mansion,18,30,4	script	Allysia	894,{
	if (KielHyreQuest < 46) {
		mes "[Allysia]";
		mes "¿Quién eres tú?";
		mes "¿Comó llegaste a aquí?";
		mes "Vete";
		close;
	}
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 70) {
		mes "[Allysia]";
		mes "Debes estár sorprendido";
		mes "por todo lo que ha estado";
		mes "pasando. ¿Tal vez todo";
		mes "sería más fácil de entender";
		mes "si te explico acerca de los robots?";
		next;
		switch(select("Yes:No")) {
		case 1:
			mes "[Allysia]";
			mes "Los robots que has estado";
			mes "encontrando son marionetas";
			mes "mecánicas automatizadas que pueden";
			mes "pensar y operar independientemente.";
			mes "Muchos sages han tratado de desarrollar";
			mes "sus propios robots, pero han fallado.";
			next;
			mes "[Allysia]";
			mes "Mi maestro, Kiel Hyre, ha";
			mes "estado estudiando robotica desde";
			mes "que tenía veinte años, y ha";
			mes "desarrollado tres generaciones";
			mes "diferentes de robots, la primera,";
			mes "la segunda y la tercera generación.";
			next;
			switch(select("First Generation:Second Generation:Third Generation")) {
			case 1:
				mes "[Allysia]";
				mes "Yo soy un buen ejemplo de uno";
				mes "de los robots de la Fisrt Generation";
				mes "de Kiel Hyre. Fui contruido usando";
				mes "un pesado armazón mecánico,";
				mes "un corazón robotico, recubrimiento";
				mes "sintetizado de piel.";
				next;
				mes "[Allysia]";
				mes "Mi unidad central de procesamiento,";
				mes "equivale a tu cerebro, es";
				mes "esencialmente un Memory Scroll";
				mes "basado en el diseño de los";
				mes "Magic Spell Scrolls que ustedes";
				mes "los aventureros usan en batalla.";
				next;
				mes "[Allysia]";
				mes "Yo soy el tipo más viejo de";
				mes "robot humanoide, así que peso";
				mes "mucho, y mi mente solo puede";
				mes "procesar una cantidad limitada de";
				mes "datos. Por lo tanto, no puedo expresar";
				mes "emociones como los humanos.";
				next;
				break;
			case 2:
				mes "[Allysia]";
				mes "Los robots de la First Generation";
				mes "fueron desarrollados en su mayoría";
				mes "de partes mecánicas, pero los robots";
				mes "de la Second Generation";
				mes "incorporaron ciencia y tecnología";
				mes "de Homunculos.";
				next;
				mes "[Allysia]";
				mes "Los robots de la Second Generation";
				mes "son humanos ya que fueron";
				mes "creados con piel y carne artificiales,";
				mes "aunque todavía fueron";
				mes "creados de pesados";
				mes "armazones de metal.";
				next;
				mes "[Allysia]";
				mes "La tenconlogía del elemental scroll";
				mes "de los Sages tambien fue usada";
				mes "para desarrollar Condensed";
				mes "Memory Scroll, una unidad";
				mes "central de proceso, superior a esa";
				mes "usada en los robotos de la First Generation.";
				next;
				mes "[Allysia]";
				mes "Aunque los Condensed Memory";
				mes "Scrolls fueron 100,000 veces";
				mes "más poderosos que los";
				mes "Memory Scrolls ordinarios, fueron";
				mes "problematicos y eran propensos";
				mes "a demasiados errores.";
				next;
				mes "[Allysia]";
				mes "Los robots de la Second Generation";
				mes "eran capaces de expresar";
				mes "emociones humanas, pero su";
				mes "producción se detuvo despues de";
				mes "seis años porque fueron";
				mes "considerados imperfectos.";
				next;
				break;
			case 3:
				mes "[Allysia]";
				mes "Los robost de la Third Generation";
				mes "fueron diseñados en su mayoría por";
				mes "el hijo de Kiel Hyre, Kiehl,";
				mes "y no usan un armazón";
				mes "mecánico en lo absoluto: el cuerpo entero";
				mes "es fundamentalmente un homunculo.";
				next;
				mes "[Allysia]";
				mes "Con sus cuerpos orgánicos";
				mes "y corazones artificiales avanzados";
				mes "hechos de imitación de piezas de";
				mes "Ymir Heart, ellos pueden experimentar";
				mes "fénomenos psicologicos";
				mes "igual que humanos ordinarios.";
				next;
				mes "[Allysia]";
				mes "Kiehl fue capaz de desarrollar";
				mes "una forma más estable";
				mes "de Condensed Memory Scroll";
				mes "el cual no sufre de";
				mes "errores críticos, y puede ser";
				mes "procesado en masa por poco dinero.";
				next;
				mes "[Allysia]";
				mes "Elly es de hecho un prototipo de Third";
				mes "Third Generation. Una vez";
				mes "que optimisemos los prototipos,";
				mes "comenzaremos la producción en masa.";
				mes "De hecho, la academia es nuestro";
				mes "campo de prueba de prototipos.";
				next;
				mes "[Allysia]";
				mes "El hecho de que robots prototipo";
				mes "puedan interactuar como humanos";
				mes "reales es pruebade nuestro";
				mes "éxito en robotica.";
				next;
				break;
			}
		case 2:
			mes "[Allysia]";
			mes "Por favor permiteme saber si";
			mes "te gustaría aprender más";
			mes "acerca de los robots de  Kiel Hyre.";
			break;
		}
	}
	else {
		mes "[Allysia]";
		mes "......";
		mes ".........";
		mes "............";
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Abduction triggering NPC
//----------------------------------------------------------------------------
lighthalzen,188,200,0	script	Abduction_trigger	-1,3,1,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 50) {
		mes "^3355FFAl dejar la";
		mes "ansión, algo";
		mes "golpeó tu cabeza,";
		mes "y tu instantaneamente";
		mes "pierdes la conscienca....";
		close2;
		percentheal -99,0;
		warp "kh_mansion",30,75;
	}
	end;
}

//----------------------------------------------------------------------------
// Mysterious Woman "Mitchell Layla"
//----------------------------------------------------------------------------
kh_mansion,25,79,4	script	Mysterious Woman#kh	727,3,3,{

//OnTouch2:
OnTouch:
	if (KielHyreQuest == 50) {
		mes "^3355FFDespiertas con un";
		mes "dolor punzante en la cabeza,";
		mes "y una mujer misteriosa";
		mes "parada frente a ti.^000000";
		next;
		mes "[??????]";
		mes "Hm? Oh, has despertado";
		mes "más pronto de lo que pensé.";
		mes "Debes sentirte confundido,";
		mes "pero escucha cuidadosamente. Si no lo";
		mes "haces, entonces no puedo garantizar";
		mes "tu seguridad, okay? Bien.";
		next;
		mes "[??????]";
		mes "Todo lo que necesitas saber es";
		mes "que yo soy un agente secreto";
		mes "para el gobierno de la  República";
		mes "de Schwaltzvalt. Estámos investigando";
		mes "actividad anormal entre Kiel";
		mes "Hyre y la Corporación Rekenber.";
		next;
		mes "[??????]";
		mes "Vimos que entrasté a la";
		mes "mansión y hablaste con";
		mes "Kiel Hyre, así que basicamente";
		mes "estás aquí para interrrogarte.";
		mes "Ahora, dime la verdad. ¿Cómo";
		mes "conoces a Kiel Hyre?";
		next;
		switch(select("I'll tell you everything!:I don't know nuthin'!")) {
		case 2:
			mes "[??????]";
			mes "No...sé...nada?";
			mes "¿Estás seguro de eso? Solo";
			mes "unos cuantos seleccionados pueden";
			mes "tan siquiera hablar con Kiel Hyre en persona. Tu";
			mes "debes tener alguna conección con";
			mes "él. ¿Estoy en lo correcto, no?";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "......";
			mes ".........";
			mes "............";
			next;
			mes "[??????]";
			mes "¿Estás tratando de protegerlo?";
			mes "Creo que podrías no";
			mes "entender con que clase de";
			mes "persona estás tratando";
			mes "aquí. Te diré lo que";
			mes "he aprendido acerca de él...";
			next;
			mes "[??????]";
			mes "Kiel Hyre. CEO de la";
			mes "Fundación Kiel Hyre,";
			mes "manufacturero de varias";
			mes "máquinas. Su compañía comenzó";
			mes "como una pequeña tienda en Einbroch cuya";
			mes "tecnología lentamente se volvió famosa.";
			next;
			mes "[??????]";
			mes "La Corporación Rekenber ofreció";
			mes "una fusión con la Corporación";
			mes " Kiel Hyre. Todavía no estamos";
			mes "seguros por que ellos querían";
			mes "a Kiel Hyre en particular para reparar";
			mes "y desarrollar a sus Guardians...";
			next;
			mes "[??????]";
			mes "Tampoco estamos seguros de por que";
			mes "ellos querían de pronto";
			mes "enfocarse más en el desarrollo de los";
			mes "Guardian. Entonces, de";
			mes "repente, el hijo de Kiel Hyre";
			mes "apareció de la nada.";
			next;
			mes "[??????]";
			mes "Es muy sospechoso.";
			mes "No hay registros de su";
			mes "nacimiento o algo. Aunque, tal vez";
			mes "Kiel Hyre realmente lo tuvo";
			mes "con su secretaria, Allysia.";
			mes "Bueno, nadie está realmente seguro.";
			next;
			mes "[??????]";
			mes "En cualquier caso, el hijo de";
			mes "Kiel Hyre y heredero, Kiehl, ayudó";
			mes "a su padre estableciendo ésta";
			mes "academia especial como su";
			mes "manera de retribuir a la sociedad.";
			next;
			mes "[??????]";
			mes "Casi cada corporación y";
			mes "organización trato de hacer sus";
			mes "espias entrarán en ésta academia,";
			mes "pero todos ellos fueron rechazados.";
			mes "Es extraño. Al menos uno de ellos";
			mes "debería haberlo logrado.";
			next;
			mes "[??????]";
			mes "Y recientemente, Kiel Hyre";
			mes "ha tenido una reunion secreta con";
			mes "ejecutivos de Rekenber para anunciar";
			mes "su nuevo proyecto. Él intenta";
			mes "crear robots humanoides avanzados";
			mes "que remplazarán a los guardias!";
			next;
			mes "[??????]";
			mes "Nuestros espías reportaron que";
			mes "Kiel Hyre no fue visto";
			mes "por ninguna parte en esa reunión,";
			mes "al igual que su secretaria";
			mes "de confianza, Allysia. Él...";
			mes "!Él solo desapareció!";
			next;
			mes "[??????]";
			mes "Entonces, Kiel Hyre apareció";
			mes "en su mansión después de todo";
			mes "éste tiempo como si nada";
			mes "hubiera pasado! Al mismo tiempo,";
			mes "Kiehl desaparece, bajo la";
			mes "excusa de conducir una investigación.";
			next;
			mes "[??????]";
			mes "Rekenber está patrocinando a";
			mes "ambos Kiehl y Kiel, pero";
			mes "hay algun tipo de conflicto";
			mes "entre el padre y el";
			mes "hijo, Yo solo lo se! Ahora";
			mes "dime, ¿qué está pasando?";
			next;
			mes "[??????]";
			mes "No estoy segura de que tan bien";
			mes "conoces este país, pero el";
			mes "hecho de que Rekenber está envuelto";
			mes "debe decirte que éstas no son";
			mes "buenas personas. Dime lo";
			mes "que sabes sobre ellos!";
			next;
		case 1:
			mes "^3355FFLe dices a la mujer^000000";
			mes "^3355FFtodo lo que sabes^000000";
			mes "^3355FFacerca de Kiel Hyre. Tu^000000";
			mes "^3355FFvoz tiembla con tritesa^000000";
			mes "^3355FFsiempre que mencionas a Elly.^000000";
			next;
			mes "[??????]";
			mes "Ya veo, ya veo...";
			mes "Esa pobre chica.... Así que...";
			mes "¿Tu participación en esto";
			mes "es una coincidencia? En ese";
			mes "caso, quiero que me ayudes";
			mes "en nuestra investigación.";
			next;
			switch(select("Okay:......")) {
			case 2:
				mes "[??????]";
				mes "Si no cooperas,";
				mes "entonces no puedo garantizar";
				mes "tu seguridad, aventurero";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "Huh? Qué...?";
				mes "¿Qué significa esto?";
				mes "¿Me estás amenzando?";
				next;
				select("Solo digo lo que ellos dicen.");
			case 1:
				mes "[??????]";
				mes "Bien.";
				mes "Yo soy la agente Mitchell Layla.";
				mes "De aquí en adelantem estás trabajando";
				mes "para la República de Schwaltzvalt!";
				set KielHyreQuest,52;
				close;
			}
		}
	}
	else if (KielHyreQuest == 52) {
		mes "[Mitchell]";
		mes "Tengo algo de información";
		mes "nueva para ti.";
		mes "Hay una anciana en";
		mes "Juno que conoció a una mujer";
		mes "llamada Allysia hace 30 años.";
		next;
		mes "[Mitchell]";
		mes "El argumento es que está";
		mes "Allysia de hace 30 años";
		mes "cometió suicidio, y es";
		mes "identica a la secretaria de";
		mes "Kiel Hyre, que tambien";
		mes "se llama Allysia.";
		next;
		mes "[Mitchell]";
		mes "Esto es mucho más que";
		mes "coincidence. I want you to";
		mes "a Juno e investigues.";
		mes "Cuando hayas terminado, habla con";
		mes "el ayudante de Kiel Hyre, y";
		mes "él te enviará conmigo.";
		next;
		mes "[Mitchell]";
		mes "Yeah, Ya sé.";
		mes "En realidad ese tipo";
		mes "trabaja para mi. De cualquier forma,";
		mes "cuando estes listo para ir";
		mes "a Juno, hazmelo saber, y puedes";
		mes "abordar la federal airship.";
		set KielHyreQuest,54;
		close;
	}
	else if (KielHyreQuest == 54) {
		mes "[Mitchell]";
		mes "¿Estás listo?";
		mes "Te permitiré abordar";
		mes "la Airship federal así";
		mes "podrás ir a Juno, y";
		mes "terminar tu misión rapidamente.";
		next;
		switch(select("Yes:No")) {
		case 1:
			mes "[Mitchell]";
			mes "Buena Suerte. Una vez";
			mes "que completes tu misión,";
			mes "asegurate de reportarlo al";
			mes "ayudante de Kiel Hyre así";
			mes "el podrá enviarte conmigo.";
			close2;
			warp "yuno",54,209;
			end;
		case 2:
			mes "[Mitchell]";
			mes "Toma tu tiempo...";
			mes "Pero ten en mente que";
			mes "no soy una mujer paciente!";
			close;
		}
	}
	else if (KielHyreQuest == 64) {
		mes "[Mitchell]";
		mes "Ah, estás de regreso.";
		mes "¿Qué tienes que";
		mes "reportar de tu";
		mes "investigación?";
		next;
		mes "[Mitchell]";
		mes ".....................";
		mes "Ah, Ya veo. Buen trabajo.";
		mes "¿Porqué no hablas con Kiel";
		mes "Hyre y lo confrontas con";
		mes "lo que te has enterado de";
		mes "su pasado? Yeah, interrogalo.";
		next;
		mes "[Mitchell]";
		mes "Usa éste mic oculto,";
		mes "así podremos enviar ayudar si";
		mes "éstas en peligro. Quiero que";
		mes "descubras que es en realidad";
		mes "Kiel, cuál es su";
		mes "relación con Rekenber.";
		set KielHyreQuest,68;
		next;
		warp "kh_mansion",83,50;
		end;
	}
	else if (KielHyreQuest >= 68) {
		mes "[Mitchell]";
		mes "¿No deberías";
		mes "irte ahora?";
		next;
		warp "kh_mansion",83,50;
		end;
	}
}

//----------------------------------------------------------------------------
// Warp portal into Kiehl's 'Room'
// - Anyone can enter
// - After 30-40 seonds this NPC should be disabled.
//----------------------------------------------------------------------------
kh_mansion,29,27,0	script	Kiehl_Room_Warp	45,2,2,{
OnTouch:
	warp "kh_kiehl01",10,31;
	end;

OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Kiehl_Room_Warp";
	end;

OnInit:
	disablenpc "Kiehl_Room_Warp";
	end;
}

//============================================================================

//============================================================================
// Rosimier NPCs and other Related NPCs
//============================================================================

//----------------------------------------------------------------------------
// Odd Grandma
//----------------------------------------------------------------------------
yuno,257,140,4	script	Odd Grandma	846,{
	if (KielHyreQuest < 54) {
		mes "[Grandma]";
		mes "¿A donde fuiste,";
		mes "mi amor? ¿En donde";
		mes "estás, mi queridito?";
		close;
	}
	else if (KielHyreQuest == 54) {
		mes "[Grandma]";
		mes "Lullabye....";
		mes "Di buenas noches...";
		mes "Silencio pequeño bebe..";
		mes "Duermeeee~";
		next;
		switch(select("What are you doing?:Um, I don't see a baby...")) {
		case 1:
			mes "[Grandma]";
			mes "Oh? Mi bebe no deja";
			mes "de llorar y no parece";
			mes "dormir. Ella necesita";
			mes "descansar, así podré ir a trabajar.";
			mes "La casa está tan desordenada,";
			mes "y el jefe está molesto...";
			set KielHyreQuest,56;
			next;
			select("Um, yo no veo un bebe....");
			mes "[Grandma]";
			mes "Qué, ella tiene razón--";
			mes "Bien, Querida, qué";
			mes "estas haciendo? No te";
			mes "portes mal enfrente de";
			mes "nuestro amigo! Shhh, se";
			mes "buena, mi pequeña niña.";
			//GetHEALTHSTATE VAR_CURSE 30
			close;
		case 2:
			mes "[Grandma]";
			mes "¿Qué estás...?";
			mes "Oh, mira eso.";
			mes "Hiciste llorar a mi";
			mes "queridita! Shhh,";
			mes "silencio, pequeña ^0000FFAllysia^000000.";
			mes "Duermeeee~";
			close;
		}
	}
	else if ((KielHyreQuest >= 56) && (KielHyreQuest < 60)) {
		mes "[Grandma]";
		mes "Allysia....?!";
		mes "¿Allysia, a donde";
		mes "fuiste? Se suponía";
		mes "que regresarías a casa";
		mes "en un rato!";
		if (countitem(7500) < 1) { 
			close;
		}
		else {
			next;
			switch(select("Allysia? Isn't she...")) {
			case 1:
				cutin "kh_ellisia_port",1;
				mes "^3355FFLe muestras el retrato de";
				mes "Allysia a la anciana.^000000";
				next;
				cutin "",255;
				mes "[Grandma]";
				mes "¿Oh, conoces a";
				mes "Allysia? Ella se ha";
				mes "perdido! Ella se fue de casa";
				mes "ayer y no ha";
				mes "regresado! ¿P-puedes decirme";
				mes "en donde está?!";
				close;
			}
		}
	}
	else if (KielHyreQuest >= 60) {
		mes "[Grandma]";
		mes "No te preocupes, Allysia...";
		mes "Mami siempre estará";
		mes "aquí para ti. No hay porque";
		mes "estar triste...";
		close;
	}
}

//----------------------------------------------------------------------------
// Old Lady; gives you the key to the Rosimier Mansion
//----------------------------------------------------------------------------
yuno,250,132,0	script	Old Lady#kh	711,{
	if (KielHyreQuest < 56) {
		mes "[Old Lady]";
		mes "Oooh, mis piernas y mi espalda";
		mes "están tan adoloridas. Estos viejos";
		mes "huesos duelen por todas partes....";
		close;
	}
	else if (KielHyreQuest == 56) {
		if (checkweight(7498,1) == 0) {
			mes "^3355FFUn momento....";
			mes "Ahora mismo estás";
			mes "llevando demasiados items";
			mes "contigo, así que";
			mes "primero necesitarás liberar";
			mes "más espacio en tu inventario...^000000";
			close;
		}
		mes "[Old Lady]";
		mes "Dios, odio éste";
		mes "clima! Me recuerda";
		mes "que tan vieja me he hecho!";
		mes "Enfria mis huesos, lo hace!";
		next;
		switch(select("......:Do you know that grandma?")) {
		case 1:
			mes "[Old Lady]";
			mes "Maldición! Si tan solo no";
			mes "hubiera tenido todas esas aventuras";
			mes "en mi juventud! Entonces tal vez";
			mes "no sufriría tanto en";
			mes "mi edada avanzada!";
			close;
		case 2:
			mes "[Old Lady]";
			mes "Oh... Si. Ella era la madre";
			mes "de mi mejor";
			mes "amiga, ^3355FFAllysia^000000. Desde que";
			mes "se suicidó, las cosas";
			mes "no han sido las mismas. Su madre";
			mes "perdió la cordura....";
			next;
			select("¿Fue ^3355FFAllysia^000000...?");
			mes "[Old Lady]";
			mes "Oh, Allysia fue una chica";
			mes "tan hermosa. Muchos hombres";
			mes "la deseaban, especialmente";
			mes "ese elegante James Rosimier.";
			mes "Recuerdo haber escuchado que";
			mes "ellos se iban a casar..";
			next;
			mes "[Old Lady]";
			mes "Estoy tan feliz por ella!";
			mes "Pero entonces, de pronto";
			mes "ella se suicidó. Bueno,";
			mes "eso es lo que todos dijeron.";
			mes "Aun ahora, no estoy";
			mes "segura de lo que pasó.";
			next;
			select("¿Espera, quien es James Rosimier?");
			mes "[Old Lady]";
			mes "Oh, James pertenció a";
			mes "una de las más viejas y ricas";
			mes "familias en Juno. Todo";
			mes "iba de maravilla para ellos, pero";
			mes "algun tiempo después de que Allysia murio,";
			mes "la familia se fue a la bancarota.";
			next;
			mes "[Old Lady]";
			mes "La ciudad administra su";
			mes "vieja residencia ahora. Por";
			mes "alguna razón, ellos decidieron";
			mes "confiarme la llave maestra";
			mes "de la Mansión Rosimier.";
			next;
			select("¿Puedo tomar prestada la Llave Maestra?");
			mes "[Old Lady]";
			mes "Bueno, se supone";
			mes "que no debería darsela a";
			mes "cualquiera, pero puedo decir que";
			mes "estas por el mejor interés de";
			mes "Allysia en el corazón.";
			next;
			mes "[Old Lady]";
			mes "Sin embargo, asegurate de";
			mes "regresarmela antes";
			mes "de que las personas del";
			mes "City Hall me preguntan por ella.";
			mes "Muy bien entonces, espero que encuentres";
			mes "lo que estás buscando.";
			getitem 7498,1; //Rosimier_Key
			set KielHyreQuest,58;
			close;
		}
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) < 1) || 
		(countitem(7500) < 1) || 
		(countitem(7501) < 1) || 
		(countitem(7502) < 1)) {
		mes "[Old Lady]";
		mes "Por favor apresurate y encuentra";
		mes "lo que sea que estas buscando.";
		mes "en la Mansión Rosimier.";
		mes "Podría meterme en problemas si";
		mes "las personas del City Hall";
		mes "vienen y me preguntan por la llave..";
		close;
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) == 1) && 
		(countitem(7500) == 1) && 
		(countitem(7501) == 1) && 
		(countitem(7502) == 1)) {
		mes "[Old Lady]";
		mes "¿Oh, has terminado de";
		mes "buscar en la mansión?";
		mes "¿Deprimente, no lo es?";
		mes "Los acreedores básicamente";
		mes "saquearon todo hace";
		mes "mucho tiempo.";
		next;
		select("¿Por qué ^3355FFAllysia^000000...?");
		mes "[Old Lady]";
		mes "Bueno, sé que ese James";
		mes "y Allysia estaban enamorados,";
		mes "y él le prometió matrimonio a";
		mes "ella. Ahora, supuestamente su";
		mes "familia ya lo había prometido";
		mes "en matrimonio a otra mujer.";
		next;
		mes "[Old Lady]";
		mes "Pasó el tiempo, y él";
		mes "fue forzadó a casarse con";
		mes "su prometida. Allysia estaba muy";
		mes "devastada. Yo creo que tal vez";
		mes "por eso ella... tú sabes....";
		next;
		mes "[Old Lady]";
		mes "Escucha, si quieres enterarte de";
		mes "más acerca de lo que paso,";
		mes "entonces creo que deberías hablar";
		mes "con el ^3355FFpescador que vive^000000";
		mes "^3355FFal sur de la Academia Kiel Hyre.^000000";
		next;
		mes "[Old Lady]";
		mes "Él fue quien encontró el";
		mes "cuerpo de Allysia en el río.";
		mes "el podría tener una mejor";
		mes "idea de lo que paso.";
		delitem 7498,1; //Rosimier_Key 
		set KielHyreQuest,60;
		close;
	}
	else if (KielHyreQuest >= 60) {
		mes "[Old Lady]";
		mes "Yep, viene la lluvia.";
		mes "Puedo sentirlo en mis huesos.";
		close;
	}
}


//----------------------------------------------------------------------------
// Warp portal into Rosimier Mansion
//----------------------------------------------------------------------------
yuno,273,141,0	script	Rosimmir_Entrance	45,2,2,{
OnTouch:
	if (countitem(7498) < 1) {
		mes "Esa mansión parece haber";
		mes "sido destruida por el tiempo.";
		mes "Sin embargo, la puerta parace como";
		mes "si todabía estuviera en funcionamiento";
		mes "si tuvieras la llave correcta.";
		close;
	}
	else {
		warp "kh_rossi",20,92;
	}
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Table
//----------------------------------------------------------------------------
kh_rossi,23,23,0	script	Table#khr2	111,{
	if (checkweight(7499,1) == 0) {
		mes "^3355FFUn momento...";
		mes "Ahora mismo estas llevando";
		mes "demasiados items contigo,";
		mes "así que necesitarás";
		mes "liberar más espacio";
		mes "en tu Inventario primero...^000000";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "^3355FFAquí no hay nada de";
		mes "importancia para ti.^000000";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7499) < 1) {
			cutin "kh_family_port",1;
			mes "^3355FFExaminas la mesa,";
			mes "y encuentras un retrato";
			mes "dentro del cajón abierto.^000000";
			getitem 7499,1; //Family_Portrait
		}
		else {
			mes "^3355FFEl cajón de";
			mes "éste escritorio ahora está vacio.^000000";
		}
	}
	else{
		mes "^3355FFÉste es el escritorio en";
		mes "el cual obtuviste el";
		mes "retrato de la familia Rosimier.";
		mes "Sus cajones están vacios ahora.^000000";
		close;
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Shelf
//----------------------------------------------------------------------------
kh_rossi,92,40,0	script	Shelf#khr	111,{
	if (checkweight(7500,1) == 0) {
		mes "^3355FFUn momento...";
		mes "Ahora mismo estas llevando";
		mes "demasiados items contigo,";
		mes "así que necesitarás";
		mes "liberar más espacio";
		mes "en tu Inventario primero...^000000";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "^3355FFAquí no hay nada de";
		mes "importancia para ti.^000000";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7500) < 1) {
			mes "^3355FFHay cajas cerradas";
			mes "en estos estantes.";
			mes "Tal vez si usas ésta";
			mes "LLave Maestra de la mansión, podrás";
			mes "abrirlos.^000000";
			next;
			switch(select("Use Key:Pass")) {
			case 1:
				mes "^3355FF¿Cuál caja te gustaría";
				mes "intentar abrir?^000000";
				next;
				switch(select("First Box:Second Box")) {
				case 1:
					mes "^3355FFUsas la Llave Maestra para";
					mes "abrir la caja, y obtener";
					mes "el retrato de una mujer que";
					mes "se ve justo como la asistente de";
					mes "Kiel Hyre, Allysia.^000000";
					next;
					cutin "kh_ellisia_port",2;
					mes "^3355FFEl mensaje, ''To my love,";
					mes "Allysia. From James.'' está";
					mes "escrito en el reverso.^000000";
					getitem 7500,1; //Elysia_Portrait
					close2;
					cutin "",255;
					end;
				case 2:
					mes "^3355FFÉsta caja esta vacia.^000000";
					close;
				}
			case 2:
				mes "^3355FFÉsta caja esta vacia.^000000";
				close;
			}
		}
		else {
			mes "^3355FFHas encontrado el retrato de una mujer";
			mes "en una de las";
			mes "cajas de éste estante.^000000";
			close;
		}
	}
	else {
		mes "^3355FFHas encontrado el retrato de una mujer";
		mes "en una de las";
		mes "cajas de éste estante.";
		mes "Ésta caja ahor está vacia.^000000";
		close;
	}
}


//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Desk
//----------------------------------------------------------------------------
kh_rossi,144,286,0	script	Desk#khr3	111,{
	if (checkweight(7501,1) == 0) {
		mes "^3355FFUn momento...";
		mes "Ahora mismo estas llevando";
		mes "demasiados items contigo,";
		mes "así que necesitarás";
		mes "liberar más espacio";
		mes "en tu Inventario primero...^000000";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "^3355FFSolo es un escritorio.^000000";
		close;
	}
	else if (KielHyreQuest < 60) {
		mes "^3355FFEl escritorio tiene";
		mes "tres cajones.^000000";
		next;
		switch(select("First Drawer:Second Drawer:Third Drawer:Cancel")) {
		case 1:
			mes "^3355FFEl primer cajón está cerrado.^000000";
			close;
		case 2:
			if (countitem(7501) < 1) {
				mes "^3355FFHay una carta dentro del";
				mes "segundo cajón. Fué";
				mes "enviada por una persona";
				mes "con las iniciales, K. H.,";
				mes "y dirigida a Allysia.^000000";
				getitem 7501,1; //Kyll_Hyre_Letter2
				close;
			}
			else {
				mes "^3355FFÉste cajón está vacio ahora.^000000";
				close;
			}
		case 3:
			mes "^3355FFHay una pequeña nota";
			mes "dentro del tercer cajón.";
			mes "Está escrita por James, y";
			mes "menciona que él quiere";
			mes "casarse con Allysia, y que ella";
			mes "recibió un anillo de matrimonio.^000000";
			close;
		case 4:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}
	else{
		mes "^3355FFÉste es el cajón en donde";
		mes "encontrasté una carta escrita";
		mes "por K.H., y una nota rápidamente";
		mes "por James Rosimier. Ambas";
		mes "están dirigidas a";
		mes "la misma mujer, Allysia.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bookshelf
//----------------------------------------------------------------------------
kh_rossi,148,288,0	script	Bookshelf#khr	111,{
	if (checkweight(7502,1) == 0) {
		mes "^3355FFUn momento...";
		mes "Ahora mismo estas llevando";
		mes "demasiados items contigo,";
		mes "así que necesitarás";
		mes "liberar más espacio";
		mes "en tu Inventario primero...^000000";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "^3355FFEncuentras un estante";
		mes "polvoso lleno de";
		mes "numerosos libros.^000000";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7502) < 1) {
			mes "^3355FFEncuentras un estante";
			mes "polvoso lleno de";
			mes "numerosos libros. Encuntras";
			mes "una nota doblada entre";
			mes "los libros al examinarlos.^000000";
			getitem 7502,1; //Piece_Memo_Of_James
			close;
		}
		else {
			mes "^3355FFEncuentras un estante";
			mes "polvoso lleno de";
			mes "numerosos libros.^000000";
			close;
		}
	}
	else{
		mes "^3355FFEncuentras un estante";
		mes "polvoso lleno de";
		mes "numerosos libros.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bed
//----------------------------------------------------------------------------
kh_rossi,154,286,0	script	Bed#khr	111,{
	if (KielHyreQuest < 58) {
		mes "^3355FFEncontrasté una cama bien hecha";
		mes "que ha acumulado";
		mes "una gruesa capa de polvo";
		mes "después de años de desuso.^000000";
		close;
	}
	else if (KielHyreQuest < 60) {
		mes "^3355FFEncontrasté una cama bien hecha";
		mes "que ha acumulado";
		mes "una gruesa capa de polvo";
		mes "después de años de desuso.^000000";
		next;
		switch(select("Check Bedsheets:Check Under Bed")) {
		case 1:
			mes "^3355FFRozas la superficie de la";
			mes "cama con tu mano,";
			mes "provocando una nube de desagradable";
			mes "polvo que irrita tu nariz y";
			mes "garganta. Eww, yucky!^000000";
			percentheal -10,0;
			close;
		case 2:
			mes "^3355FFBuscas debajo";
			mes "de la cama y encuentras un estuche";
			mes "vacio de un anillo de compromiso.^000000";
			close;
		}
	}
	else {
		mes "^3355FFÉsta es una cama sucia.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Fisherman
//----------------------------------------------------------------------------
yuno_fild12,232,222,0	script	Old Fisherman	709,{
	if (KielHyreQuest < 60) {
		mes "[Fisherman]";
		mes "En estos días, es mucho más";
		mes "difícil agarrar y pescar.";
		mes "Desde que construyeron";
		mes "esa fábrica, los peces";
		mes "han comenzado a cambiar,";
		mes "y se ven diferentes...";
		close;
	}
	else if (KielHyreQuest == 60) {
		mes "[Fisherman]";
		mes "Eh? ¿Quieres algo?";
		mes "Heh, chicos! Yo sé";
		mes "cuanto aman la caridad,";
		mes "pero no están obteniendo nada.";
		mes "Ahora, si me traen algo de";
		mes "Raw Fish, sería más amigable~";
		if (countitem(544) >= 10)  {
			next;
			mes "[Fisherman]";
			mes "Oh, todo éste pescado";
			mes "es para mi? Heh, que generosidad";
			mes "de tu parte. Si vas a ser";
			mes "tan amable, entonces";
			mes "supongo que tengo que devolver";
			mes "el favor. Preguntame lo que sea~";
			next;
			select("Hace 30 años, una mujer se suicido...");
			mes "[Fisherman]";
			mes "Oh? Ohh. Oh si.";
			mes "Lo recuerdo. Si.";
			mes "Era August 20th, el";
			mes "cumpleaños de mi esposa. Ese día,";
			mes "en vez de atrapar peces.";
			mes "Atrapé una mujer.";
			next;
			mes "[Fisherman]";
			mes "Por supuesto, lo reporté";
			mes "a la policia de Juno! Ellos me dijeron";
			mes "que ella se suicido ya que";
			mes "habia sido traicionada por su amante,";
			mes "quien tambien era su";
			mes "empleado. Algo realmente trágico.";
			next;
			mes "[Fisherman]";
			mes "De cualquier forma, cuando estaban";
			mes "sacando su cuerpo del";
			mes "río, su mano solto";
			mes "un anillo. Yo lo levante,";
			mes "esperando venderlo luego por";
			mes "algo de zeny. Lo sé, lo sé...";
			next;
			mes "[Fisherman]";
			mes "Tuvé mucha suerte, la";
			mes "policia no me vió tomarlo.";
			mes "Más tarde ése día, un tipo";
			mes "vino a mi y me ofreció";
			mes "mucho dinero por el anillo.";
			mes "Supongo que era mi día de suerte!";
			next;
			mes "[Fisherman]";
			mes "Más tarde descubrí que él era";
			mes "algun técnico mecánico--";
			mes "o algo. Él vendió todo";
			mes "para comprar ese anillo, así que supongo";
			mes "que lo quería desesperadamente.";
			mes "Entonces solo desaparecio.";
			next;
			select("¿Recuerdas su nombre?");
			mes "[Fisherman]";
			mes "¿Su nombre...?";
			mes "Era algo como...";
			mes "¿Heil? ¿Hyre? De cualquier foma, fue";
			mes "hace mucho tiempo. Oh,";
			mes "su vieja casa todavía está por aquí.";
			next;
			mes "[Fisherman]";
			mes "Si vas a ser";
			mes "tan curioso, tambien podrías";
			mes "revisarla.";
			mes "Veamos, el vivió en";
			mes "una chosa cerca del noreste";
			mes "del campamento de guardia del bosque.";
			delitem 544,10; //Fish_Slice
			set KielHyreQuest,62;
			close;
		}
		else {
			close;
		}
	}
	else if (KielHyreQuest >= 62) {
		mes "[Fisherman]";
		mes "¿Recuerdas";
		mes "lo que te dijé? Ese";
		mes "tipo vivia en una chosa cerca";
		mes "del bosque del noreste del campamento";
		mes "de guardia! ¿Por qué no";
		mes "revisas ese lugar?";
		close;
	}
}

//----------------------------------------------------------------------------
// Kiel Hyre's hut; Wooden Board
//----------------------------------------------------------------------------
yuno_fild09,158,217,0	script	Wooden Board#kh	111,{
	if (checkweight(7503,1) == 0) {
		mes "^3355FFUn momento...";
		mes "Ahora mismo estas";
		mes "llevando demasiados items";
		mes "contigo, así que necesitarás";
		mes "liberar más espacio";
		mes "en tu Inventario primero...^000000";
		close;
	}
	if ((KielHyreQuest < 62) || (KielHyreQuest >= 64)) {
		mes "^3355FFEs un inútil";
		mes "tablón de madera";
		mes "en los arbustos.^000000";
		close;
	}
	else if (KielHyreQuest == 62) {
		mes "^3355FFEncontraste un largo";
		mes "tablón de madera tallado";
		mes "con las iniciales, ''K.H.''^000000";
		next;
		cutin "kh_kyel_port",2;
		mes "^3355FFEncuentras un retrato de";
		mes "un hombre joven, que se parece";
		mes "a la versión juvenil";
		mes "de Kiel Hyre, en un marco";
		mes "roto debajo";
		mes "debajo del viejo tablón de madera.^000000";
		getitem 7503,1;	//Man_Portrait
		set KielHyreQuest,64;
		next;
		cutin "",255;
		mes "^3355FFPor ahora tienes suficiente";
		mes "información,";
		mes "deberías reportaselo";
		mes "a Mitchell.^000000";
		close;
	}
}

//============================================================================
// Kiehl Hyre's Room and Boss NPCs
//============================================================================
// Beyond here the NPC for the final areas.
// Now, this area is not someplace you wanna slow down so
// you can pick up dialog. I used packet logging to pull
// what I could and for the sake of the two people with me,
// did not bother doing all the proper NPC positioning
// or some of the 'error/wrong option' dialogs.
// All the doors are kind of weird.
//============================================================================

//----------------------------------------------------------------------------
// Kiehl's Room; Receiver (Gives black keycards upon killing mobs)
//----------------------------------------------------------------------------
kh_kiehl01,17,39,0	script	Receiver#kh	111,{
	if (mobcount("kh_kiehl01","Receiver#kh::OnMyMobDead") < 1) {
		mes "^333333*BBBZZZZ*^000000";
		if (KielHyreQuest == 74) {
			next;
			mes "[????]";
			mes "^333333*Bzzzzz...*";
			mes "Nunca antes te había";
			mes "visto. ¿El Padre te mando";
			mes "para matarme? Lo";
			mes "veremos! Adelante,";
			mes "trata de encontrarme, aventurero.^000000.";
			set KielHyreQuest,76;
		}
		close2;
		monster "kh_kiehl01",16,32,"Alicel",1739,1,"Receiver#kh::OnMyMobDead";
		monster "kh_kiehl01",18,31,"Aliot",1740,1,"Receiver#kh::OnMyMobDead";
		end;
	}

	else {
		end;
	}

OnMyMobDead:
	if (mobcount("kh_kiehl01","Receiver#kh::OnMyMobDead") <1) { 
		makeitem 7506,1,"this",19,36;
	}
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Flower Vase (Gives...password...for Box)
//----------------------------------------------------------------------------
kh_kiehl01,13,40,0	script	Flower Vase#kh1	111,{
	if (KielHyreQuest < 74) {
		mes "^3355FFEncontrasté";
		mes "un florero.^000000";
		close;
	}
	if (KielHyreQuest >= 74) {
		mes "^3355FFEncontrasté";
		mes "un florero.^000000";
		next;
		switch(select("Pick Up Vase:Break Vase:Turn Vase Upside-down")) {
		case 1:
			mes "^3355FFEl jarrón está vacio.^000000";
			close;
		case 2:
			mes "^3355FFNo puedes destruir";
			mes "éste jarrón, aún";
			mes "lanzandolo con toda tu";
			mes "fuerza. Debe haber sido";
			mes "especialmente manufacturado por";
			mes "la Corporación Rekenber.^000000";
			close;
		case 3:
			mes "^3355FFLas siguientes palabras";
			mes "están escritas en el";
			mes "fondo del jarrón.^000000";
			next;
			mes "[Vase Message]";
			mes "''The rabbit often";
			mes "observes the door";
			mes "The night eats the";
			mes "pickled orange.''";
			close;
		}
	}
	else{
		mes "^3355FFLas siguientes palabras";
		mes "están escritas en el";
		mes "fondo del jarrón.^000000";
		next;
		mes "[Vase Message]";
		mes "''The rabbit often";
		mes "observes the door.";
		mes "The night eats the";
		mes "pickled orange.''";
		close;
	}
}


//----------------------------------------------------------------------------
// Kiehl's Room; Box
//----------------------------------------------------------------------------
kh_kiehl01,19,25,0	script	Box#kh1	111,{
	if (checkweight(7505,1) == 0) {
		mes "^3355FFUn momento...";
		mes "Ahora mismo estas llevando";
		mes "demasiados items contigo,";
		mes "así que necesitarás";
		mes "liberar más espacio";
		mes "en tu Inventario primero...^000000";
		close;
	}
	if (KielHyreQuest < 74) {
		mes "^3355FFEncontrasté una caja con";
		mes "un botón encima para cada letra";
		mes "del alfabeto.^000000";
		next;
		input .@KHInput$;
		mes "^3355FFNo pasó nada.^000000";
		close;
	}
	if (KielHyreQuest >= 74) {
		if (countitem(7505) < 1) {
			mes "^3355FFEncontrasté una caja con";
			mes "un botón encima para cada letra";
			mes "del alfabeto.^000000";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "open the door") {
				mes "^3355FFTan rápido como introduces el";
				mes "password, la puerta cercana";
				mes "emite un agradable sonido";
				mes "repicante, y la caja se abre";
				mes "rápido para revelar una small key.^000000";
				getitem 7505,1; //Toy_Key
				close;
			}
			else {
				mes "^3355FFNo pasó nada.^000000";
				close;
			}
		}
		else {
			mes "^3355FFAquí es en donde";
			mes "encontrasté la Toy key^000000";
			close;
		}
	}
	else{
		mes "^3355FFLa caja está";
		mes "abierta, y no hay";
		mes "nada en ella.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (First)
// - Anyone can pass through this door
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,44,33,0	script	Big Door#BigDoorKHQ1	111,{
	if (.KHDoor1Opened == 0) {
		mes "^3355FFLa puerta está cerrada,";
		mes "pero hay una estrecha";
		mes "ranura junto al picaporte.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "Black Keycard") {
			if (countitem(7506) >= 1) {
				mes "^3355FFInsertas la";
				mes "Black Keycard en la";
				mes "ranura, y exitosamente";
				mes "desbloqueas y abres la puerta.^000000";
				delitem 7506,1; //Black_Key_Card
				donpcevent "Big_Door_1_Warp::OnEnable";
				enablenpc "Big_Door_1_Warp";
				set .KHDoor1Opened,1;
				close;
			}

		}
		mes "^3355FFTratas de abrir la";
		mes "puerta empujando con";
		mes "todo tu poder, pero fallas";
		mes "al hacerla mover.^000000";
		close;
	}

	else {
		mes "^3355FFLa puerta está abierta.^000000";
		close;
	}
}

kh_kiehl01,43,33,0	script	Big_Door_1_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_1_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_1_Warp";
	set getvariableofnpc(.KHDoor1Opened,"Big Door#BigDoorKHQ1"),0;
	end;

OnTouch:
	warp "kh_kiehl01",55,33;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (second)
// - Consume Toy Key when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,174,40,0	script	Big Door#BigDoorKHQ2	111,{
	if (.KHDoor2Opened == 0) {
		mes "^3355FFLa puerta está cerrada,";
		mes "pero hay una pequeña";
		mes "cerradura junto al picaporte.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "Toy Key") {
			if (countitem(7505) >= 1) {
				mes "^3355FFInsertas la llave en la";
				mes "cerradura, y la puerta se";
				mes "abre con un click al";
				mes "girar la llave.^000000";
				delitem 7505,1; //Toy_Key
				donpcevent "Big_Door_2_Warp::OnEnable";
				enablenpc "Big_Door_2_Warp";
				set .KHDoor2Opened,1;
				close;
			}

		}
		mes "^3355FFTratas de abrir la puerta";
		mes "empujando con todo";
		mes "tu poder, pero fallas";
		mes "al hacerla mover.^000000";
		close;
	}
	else {
		mes "^3355FFLa puerta está abierta.^000000";
		close;
	}
}

kh_kiehl01,174,39,0	script	Big_Door_2_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_2_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_2_Warp";
	set getvariableofnpc(.KHDoor2Opened,"Big Door#BigDoorKHQ2"),0;
	end;

OnTouch:
	warp "kh_kiehl01",173,52;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Third)
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,77,108,0	script	Big Door#BigDoorKHQ3	111,{
	if (.KHDoor3Opened == 0) {
		mes "^3355FFLa puerta está cerrada,";
		mes "pero hay una estrecha";
		mes "ranura junto al picaporte.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "Black Keycard") {
			if (countitem(7506) >= 1) {
				mes "^3355FFInsertas la";
				mes "Black Keycard en la";
				mes "ranura, y exitosamente";
				mes "desbloqueas y abres la puerta.^000000";
				delitem 7506,1; //Black_Key_Card
				donpcevent "Big_Door_3_Warp::OnEnable";
				enablenpc "Big_Door_3_Warp";
				set .KHDoor3Opened,1;
				close;
			}

		}
		mes "^3355FFTratas de abrir la puerta";
		mes "empujando con todo";
		mes "tu poder, pero fallas";
		mes "al hacerla mover.^000000";
		close;
	}
	else {
		mes "^3355FFLa puerta está abierta.^000000";
		close;
	}
}

kh_kiehl01,78,108,0	script	Big_Door_3_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_3_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_3_Warp";
	set getvariableofnpc(.KHDoor3Opened,"Big Door#BigDoorKHQ3"),0;
	end;

OnTouch:
	warp "kh_kiehl01",68,108;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Fourth)
// - Consume TWO Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,42,177,0	script	Big Door#BigDoorKHQ4	111,{
	if (.KHDoor4Opened == 0) {
		mes "^3355FFLa puerta está cerrada,";
		mes "pero hay una estrecha";
		mes "ranura junto al picaporte.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "Black Keycard") {
			if (countitem(7506) >= 2) {
				mes "^3355FFInsertas la";
				mes "Black Keycard en la";
				mes "ranura, y exitosamente";
				mes "desbloqueas y abres la puerta.^000000";
				delitem 7506,2; //Black_Key_Card
				donpcevent "Big_Door_4_Warp::OnEnable";
				enablenpc "Big_Door_4_Warp";
				set .KHDoor4Opened,1;
				close;
			}
		}
		mes "^3355FFTratas de abrir la puerta";
		mes "empujando con todo";
		mes "tu poder, pero fallas";
		mes "al hacerla mover.^000000";
		close;
	}

	else {
		mes "^3355FFLa puerta está abierta.^000000";
		close;
	}
}

kh_kiehl01,41,177,0	script	Big_Door_4_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_4_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_4_Warp";
	set getvariableofnpc(.KHDoor4Opened,"Big Door#BigDoorKHQ4"),0;
	end;

OnTouch:
	warp "kh_kiehl01",49,177;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,179,0	script	Robots#kh1	111,{
	if (mobcount("kh_kiehl01","Robots#kh1::OnMyMobDead") < 1) {
		mes "^3355FFTan pronto";
		mes "tocas el test tube,";
		mes "un montón de robots";
		mes "aparecen de pronto.^000000.";
		close2;
		monster "kh_kiehl01",18,181,"Aliot",1740,1,"Robots#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,180,"Alicel",1739,1,"Robots#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,179,"Aliot",1740,1,"Robots#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,178,"Alicel",1739,1,"Robots#kh1::OnMyMobDead";
		end;
	}
	else  {
		end;
	}

OnMyMobDead:
	if (mobcount("kh_kiehl01","Robots#kh1::OnMyMobDead") < 1) { 
		makeitem 7506,1,"this",18,180;
		}
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Dummy Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,177,0	script	Robots#kh2::RobotsKHQ	111,{
	end;
}
kh_kiehl01,15,180,0	duplicate(RobotsKHQ)	Robots#kh3	111
kh_kiehl01,15,182,0	duplicate(RobotsKHQ)	Robots#kh4	111
kh_kiehl01,35,187,0	duplicate(RobotsKHQ)	Robots#kh5	111
kh_kiehl01,37,187,0	duplicate(RobotsKHQ)	Robots#kh6	111
kh_kiehl01,39,187,0	duplicate(RobotsKHQ)	Robots#kh7	111
kh_kiehl01,41,187,0	duplicate(RobotsKHQ)	Robots#kh8	111

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Fifth, and final)
// - Anyone can pass through this door
// - Consumes 4 Solid Iron Pieces
//----------------------------------------------------------------------------
kh_kiehl01,166,187,0	script	Big Door#BigDoorKHQ5	111,{
	if (($@KHQuestBusy == 0) && (KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		if (KielHyreQuest < 86) {
			mes "^3355FFÉsta larga puerta...";
			mes "está bien cerrada.";
			mes "Si escuchas cuidadosamente.";
			mes "puedes escuchar la";
			mes "bisagra de la puerta rechinando ligeramente.^000000";
			next;
			select("Empujar la Puerta:Patear la Puerta:Sacudir la Puerta:Jalar la Puerta:Levantar la Puerta");
			mes "^3355FFUn grupo de monstruos";
			mes "aparecen de repente tan";
			mes "pronto como aplicas";
			mes "presión a la puerta.";
			mes "Esto debe ser algun";
			mes "tipo de dispositivo de seguridad.^000000";
			close2;
			set @KHDoorPushAttempt,@KHDoorPushAttempt+1;
			monster "kh_kiehl01",163,183,"Alicel",1739,1;
			monster "kh_kiehl01",163,179,"Aliot",1740,1;
			monster "kh_kiehl01",169,183,"Alicel",1739,1;
			monster "kh_kiehl01",169,179,"Aliot",1740,1;
			if (@KHDoorPushAttempt >= 3) { 
				set KielHyreQuest,86; 
			}
			end;
		}
		else if ((KielHyreQuest > 84) && (KielHyreQuest < 94)) {
			mes "^3355FFAplicas algo";
			mes "de presión a la puerta,";
			mes "y encuentras que puedes";
			mes "moverla ligeramente, pero";
			mes "no puedes abrirla completamente.^000000";
			next;
			mes "^3355FFSi metes algo a presión";
			mes "en el espacio entre la";
			mes "puerta y su marco, y la";
			mes "apalancas completamente, entonces";
			mes "serás capaz de abrirla.^000000";
			next;
			switch(select("Steel:Rusty Iron Piece:Solid Iron Piece:Iron Piece:Screw:Cancel")) {
			case 1:
				set .@KHPryingItem$,"Steel";
				break;
			case 2:
				set .@KHPryingItem$,"Rusty Iron Piece";
				break;
			case 3:
				if (countitem(7507) >= 1) {
					if (KielHyreQuest < 92) {
						mes "^3355FFInsertas el extremo de";
						mes "un Solid Iron Piece en el";
						mes "espacio de la puerta en un vigoroso";
						mes "esfuerzo por abrirla.";
						mes "El espacio se abre un poco,";
						mes "pero rompes uno de";
						mes "tus Solid Iron Pieces.^000000";
						delitem 7507,1; //Hard_Piece_of_Steel
						set KielHyreQuest,KielHyreQuest+2;
						close;
					}
					else if (KielHyreQuest == 92) {
						mes "^3355FFCon un fuerte empujón,";
						mes "insertas un Solid Iron";
						mes "Piece en un lado de la puerta,";
						mes "y abrirla rápidamente.";
						mes "Incapaz de resistir el";
						mes "asombroso poder, éste Solid";
						mes "Iron Piece se hace polvo.^000000";
						delitem 7507,1; //Hard_Piece_of_Steel
						set KielHyreQuest,94;
						close;
					}
				}
				else {
					mes "^3355FFSi tan sólo tuvieras un Solid";
					mes "Iron Piece podrías usarlo para";
					mes "para abrir ésta puerta.^000000";
					close;
				}
			case 4:
				set .@KHPryingItem$,"Iron Piece";
				break;
			case 5:
				set .@KHPryingItem$,"Screw";
				break;
			case 6:
				mes "^3355FFBusquemos algo";
				mes "pesado que podamos usar para";
				mes "abrir ésta puerta.^000000";
				close;
			}

			mes "^3355FFEsto "+.@KHPryingItem$+" es muy";
			mes "débil para lo que lo estas usando";
			mes "y se rompe.^000000";
			close;
		}
		else if ((KielHyreQuest >= 94) && (KielHyreQuest <= 104)) {
			if (.KHDoor5Opened == 0) {
				mes "^3355FFLa puerta larga";
				mes "está abierta, y";
				mes "ahora puedes entrar.^000000";
				next;
				switch(select("Yes:No")) {
				case 1:
					close2;
					donpcevent "Big_Door_5_Warp::OnEnable";
					enablenpc "Big_Door_5_Warp";
					set .KHDoor5Opened,1;
					end;
				case 2:
					mes "^3355FFQuien sabe lo que hay en el";
					mes "otro lado de esta puerta. Pensemos";
					mes "al respecto antes de entrar..^000000";
					close;
				}
			}
			else {
				mes "^3355FFLa puerta está abierta.^000000";
				close;
			}
		}
		else {
			mes "^3355FFÉsta larga puerta..";
			mes "está bien cerrada.";
			mes "Si escuchas cuidadosamente,";
			mes "puedes oir la bisagra de la puerta";
			mes "rechinando ligeramente.^000000";
			close;
		}
	}
	else {
		mes "^3355FFÉsta larga puerta..";
		mes "está bien cerrada.";
		mes "Si escuchas cuidadosamente,";
		mes "puedes oir la bisagra de la puerta";
		mes "rechinando ligeramente.^000000";
		close;
	}
}

kh_kiehl01,166,186,0	script	Big_Door_5_Warp	45,1,1,{
	end;

OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_5_Warp";
	set getvariableofnpc(.KHDoor5Opened,"Big Door#BigDoorKHQ5"),0;
	end;

OnInit:
	disablenpc "Big_Door_5_Warp";
	end;

OnTouch:
	if (KielHyreQuest >= 46)
		warp "kh_kiehl02",50,7;
	else
		warp "kh_kiehl01",166,183;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl_Room_Trap (Entry way trap)
//----------------------------------------------------------------------------
kh_kiehl02,49,10,0	script	Kiehl_Room_Trap	-1,5,3,{
	end;

OnTouch:
	if (.KHTrapSprung < 1) {
		set .KHTrapSprung,1;
		set $@KHQuestBusy,1;
		initnpctimer;
		monster "kh_kiehl02",47,13,"Aliot",1740,1;
		monster "kh_kiehl02",45,13,"Alicel",1739,1;
		monster "kh_kiehl02",49,13,"Constant",1745,1;
		monster "kh_kiehl02",51,13,"Aliot",1740,1;
		monster "kh_kiehl02",53,13,"Alicel",1739,1;
		monster "kh_kiehl02",49,13,"Constant",1745,1;
	}
	end;

OnTimer300000:
OnTimer600000:
OnTimer900000:
	if (getmapusers("kh_kiehl02") == 0) {
		donpcevent "KiehlRoom::OnReset";
		stopnpctimer;
	}
	end;

OnTimer1200000:
	donpcevent "KiehlRoom::OnReset";
	stopnpctimer;
	end;

OnGlobalTimerOff:
	stopnpctimer;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl
// - Timer will drop to 3 minutes once Kiehl is defeated.
//----------------------------------------------------------------------------
kh_kiehl02,50,52,4	script	Kiehl#Original	902,{
	if (checkweight(908,200) == 0) {
		mes "^3355FFEspera un momento...";
		mes "Ahora mismo estas llevando";
		mes "demasiados items contigo,";
		mes "así que necesitarás";
		mes "liberar más espacio en tu";
		mes "Inventario primero...^000000";
		close;
	}
	cutin "kh_kiel01",2;
	if ((KielHyreQuest < 94) || (KielHyreQuest >= 106)) {
		mes "[Kiehl]";
		mes "......";
		mes ".........";
		mes "............";
		close2;
		cutin "",255;
		end;
	}
	if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") < 5)) {
		mes "[Kiehl]";
		mes "Estoy sorprendido de que hayas";
		mes "llegado tan lejos, aventurero~";
		mes "Te doy la bienvenida a mi";
		mes "humilde habitación. Supongo que";
		mes "has venido por el Condensed";
		mes "Memory Scroll... mi mente.";
		next;
		mes "[Kiehl]";
		mes "Puedes entender";
		mes "por que no puedo dejarte tenerlo,";
		mes "así que si realmente quieres el";
		mes "Condensed Memory Scroll";
		mes "entonces muestrame lo que tienes!";
		close2;
		cutin "",255;
		set getvariableofnpc(.KHKilled,"KiehlRoom"),0;
		monster "kh_kiehl02",50,52,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"Alicel",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"Constant",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"Alicel",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"Constant",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		hideonnpc "Kiehl#Original";
		end;
	}
	else if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") >= 5)) {
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "Hmpf! Eres muy bueno.";
		mes "Padre debe haber gastado";
		mes "mucho dinero para";
		mes "contratarte. ¿Así que te ha enviado";
		mes "a matarme?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Kiel Hyre me envió a pedirte";
		mes "que te dejes de convertir a todos los";
		mes "Robots de la Third Generation";
		mes "en máquinas asesinas! ¿Cómo";
		mes "puedo hacer algo como";
		mes "los otros robots iguales a ti?";
		next;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "¡Por qué no? Se dice que el hombre";
		mes "fue hecho a la imagen de Dios.";
		mes "Bueno, los robots fueron hechos a";
		mes "imagen del hombre. Ustedes humanos se";
		mes "matan unos a otros tanto como";
		mes "quieren, hasta donde puedo decir.";
		next;
		mes "[Kiehl]";
		mes "Podría no ser ético";
		mes "para mi proveer de armas";
		mes "a humanos que las necesitan...";
		mes "Pero eso es lo que hacen.";
		mes "Armas. Es más humano";
		mes "para los robots pelear que para los humanos.";
		next;
		mes "[Kiehl]";
		mes "Los robotos no sienten dolor";
		mes "o emociones naturalmente..";
		mes "No a menos que sean especialmente";
		mes "programados. Lo siento, pero no";
		mes "planeo detener lo que estoy haciendo.";
		next;
		cutin "kh_kiel04",2;
		mes "[Kiehl]";
		mes "Lo siento, pero no tengo planeado detener lo que estoy haciendo.";
		mes "Aparte de eso, mi padre me dio un gran ejemplo de";
		mes "lo lejos que puede llegar un humano por su egoismo al destruir una familia.";
		mes "Por lo tanto no creo que él pudiera crear mejores robots que los mios.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "La humanidad puede no ser";
		mes "perfecta, pero pienso acerca";
		mes "de con quien estas trabajando!";
		mes "Rekenber es la personificación de la";
		mes "maldad humana! ¿Cómo puedes";
		mes "respaldarlos así?";
		next;
		cutin "kh_kiel02",2;
		mes "[Kiehl]";
		mes "He tenidó una larga relación";
		mes "con Rekenber. Estoy completamente consciente";
		mes "de sus habilidades. ¿Recuerdas";
		mes "el primer cuarto que";
		mes "pasaste en tu camino a aquí, el que";
		mes "tenía muchos juguetes?";
		next;
		mes "[Kiehl]";
		mes "Apuesto a que no sabías que ahí";
		mes "habían 5 robots de la Second";
		mes "Generation. Yo, y mi otros cuatro";
		mes "hermanos y hermanas. Padre";
		mes "construyó esa habitación así nostros";
		mes "cinco podríamos vivir juntos.";
		next;
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "Yo fuí el único que";
		mes "sobrevivio. Regresé al";
		mes "Padre y hasta obtuve un";
		mes "nombre. Pero claro, yo sé";
		mes "cuan malo Rekenber es realmente...";
		next;
		mes "[Kiehl]";
		mes "No... No quiero";
		mes "hablar acerca de esto nunca más.";
		mes "Tu me has creado... Sólo dejame.";
		mes "Creo que te dejaré vivir.";
		next;
		cutin "",255;
		mes "[Mitchell]";
		mes "Quieto!";
		mes "Kiehl Hyre, estas";
		mes "bajo arresto por crear e";
		mes "intercambiar armas ilegales!";
		set KielHyreQuest,100;
		hideoffnpc "Mitchell#KiehlRoom";
		hideoffnpc "Agent#KHAgent1";
		hideoffnpc "Agent#KHAgent2";
		hideoffnpc "Agent#KHAgent3";
		hideoffnpc "Agent#KHAgent4";
		next;
	}
	if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") < 1)) {
		set getvariableofnpc(.KHKilledBoss,"KiehlRoom"),0;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "Ah, agentes de la República";
		mes "de Schwaltzvalt. Heh. No he tenido";
		mes "tanto invitados antes.";
		mes "Bueno, supongo que esto significa";
		mes "que tendremos que pelear después";
		mes "de todo, tú y yo. *Suspiro* Lástima.";
		next;
		mes "[Kiehl]";
		mes "Primero, con toda equidad,";
		mes "permiteme deshacerme de estas";
		mes "molestias. Ellos sólo están";
		mes "haciendo estupidamente su";
		mes "trabajo--como algun tipo de robotos-- érp";
		mes "no te preocupe, ellos no serán lastimados.";
		next;
		donpcevent "::OnKHSpiderWeb";
		mes "[Mitchell]";
		mes "Nooooo!!!";
		next;
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "Y ahora, tú y yo podemos";
		mes "tener un duelo apropiado, humano.";
		mes "Sólo estoy interesado en ver";
		mes "cuan fuerte eres realmente~";
		close2;
		cutin "",255;
		monster "kh_kiehl02",50,52,"Kiehl",1733,1,"KiehlRoom::OnKiehlDead";
		hideonnpc "Kiehl#Original";
		end;
	}
	else if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") == 1)) {
		cutin "kh_kiel02",2;
		mes "[Kiehl]";
		mes "M-maldición...!";
		mes "Bien jugado, aventurero.";
		mes "Bien jugado. Debería haber";
		mes "sabido que Padre enviaría";
		mes "al mejor tras de mi. Aunque,";
		mes "has fallado al vencerme completamente.";
		next;
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "Todavía me quedan algunas";
		mes "cardas de triunfo.";
		mes "Creo...que te llevaré";
		mes "al infierno conmigo... Bien,";
		mes "si lo robots no pueden ir ahí~";
		next;
		mapannounce "kh_kiehl02","*Jeeeezzzgggg~ Geezzz~ Grrrr~ Clank~*",bc_map,"0xFF0000";
		mes "[Mitchell]";
		mes "No...! Estamos atrapados";
		mes "en la habitación! Estamos...";
		mes "Estamos atrapados aquí!";
		next;
		mes "[Kiehl]";
		mes "Yay~ Quememos";
		mes "todo~";
		next;
		mes "[Mitchell]";
		mes "Rápido, "+strcharinfo(0)+",";
		mes "usa el power divice de";
		mes "Kiel Hyre, el que se";
		mes "supone estropee la";
		mes "fuente de poder de Kiehl!";
		mes "Apresurate, usalo ahora mismo!";
		next;
		mapannounce "kh_kiehl02","*Gzzzz~ Gzzzz~*",bc_map,"0xFF0000";
		mes "[Kiehl]";
		mes "¿Q-qué? No p-puedo";
		mes "moverme! Éste dia está lleno";
		mes "de sorpresas. Oh, bien.";
		mes "Supongo que es tiempo de";
		mes "usar mi otra carta de triunfo.";
		next;
		mes "[Mitchell]";
		mes "¿Qué...?";
		mes "¿Cuántas cartas del";
		mes "triunfo tienes?";
		next;
		mes "[????]";
		mes "Estoy tan decepcionado..";
		mes "No puedo creer que ninguno";
		mes "de ustedes penso en esto.";
		next;
		mes "[Mitchell]";
		mes "¿Quién eres tu?";
		mes "Muestrate!";
		next;
		mes "[????]";
		mes "Por favor.";
		mes "No me insultes.";
		mes "Tu conoces ésta voz.";
		mes "Ha estado hablandote";
		mes "todo éste tiempo~";
		next;
		mes "[Mitchell]";
		mes "Imposible...";
		mes "¿Cómo puede haber";
		mes "dos de ustedes...?!";
		next;
		hideoffnpc "Kiehl#Copy";
		next;
		cutin "kh_kiel01",0;
		mes "[Kiehl]";
		mes "Hahahahaha!!!";
		mes "Yo soy un robot!";
		mes "Y puedo hacer cuerpos";
		mes "extras, cambiar cerebros";
		mes "con ellos. Dejame decirte";
		mes "que es, terriblemente conveniente.";
		next;
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "De cualquier forma, no quiero presumir,";
		mes "pero supuse que mejor";
		mes "te revelaba mi carta final del";
		mes "triunfo. Primero que todo, yo sé todo";
		mes "acerca de ti, Ms. Mitchell Layla~";
		next;
		mes "[Mitchell]";
		mes "¿Quét? ¿Cómo es que";
		mes "sabes mi nombre?";
		next;
		mes "[Kiehl]";
		mes "Bueno, tengo algunos";
		mes "espías propios...";
		mes "Le permitiré explicarles...";
		next;
		mes "[Masked Man]";
		mes "Mitchell....";
		mes "Siento mucho";
		mes "que hayas tenido que";
		mes "involucrarte en todo esto..";
		next;
		mes "[Mitchell]";
		mes "¿Wolkeus? ¿Wolkeus Kaiser?!";
		mes "¿Tú eres el spía?! Pero arriesgaste";
		mes "tu vida para salvar a nuestro presidente!";
		mes "No! Oh, Dios! ¿Cómo puede estar";
		mes "pasando esto?! Todo sólo...";
		mes "Todo esto es una locura! Todo!";
		next;
		mes "[Wolkeus]";
		mes "Todo esto es el resultado";
		mes "de elaborados planes que";
		mes "fueron hechos hace años. No esperé";
		mes "que estuvieras asé de sorprendida,";
		mes "Mitchell. Ésta es la forma en que el juego";
		mes "es jugado. Tu lo sabes.";
		next;
		mes "[Mitchell]";
		mes "Mister President....";
		mes "Le fallé... Lo siento...";
		next;
		mes "[Kiehl]";
		mes "Bueno Kaiser, ella lo tomó";
		mes "muy mal, pero por lo menos";
		mes "has sido gentil";
		mes "al respecto. Bueno, me gustaría para";
		mes "todos nosotros estar mejor";
		mes "informados, pero..";
		next;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "Mejor nosotros decimos nuestra";
		mes "despedida aquí. Éste";
		mes "lugar se habra ido en";
		mes "cinco minutos. Ah, y";
		mes "Ms. Layla, usted viene";
		mes "con nosotros. Tenemos preguntas~";
		next;
		mes "[Kiehl]";
		mes "Tengo curiosidad de que";
		mes "planes tiene el presidente.";
		mes "Mister Kaiser, si bien usted";
		mes "escoltará a Ms. Layla, por favor...";
		next;
		mes "[Wolkeus Kaiser]";
		mes "...............................";
		mes "Lo siento, Mitchell.";
		mes "Tengo que hacerlo.";
		next;
		mes "[Mitchell]";
		mes "No, vete! Dejame ir!";
		mes "Dejame ir, Wolkeus!";
		hideonnpc "Mitchell#KiehlRoom";
		hideonnpc "Agent#KHAgent1";
		hideonnpc "Agent#KHAgent2";
		hideonnpc "Agent#KHAgent3";
		hideonnpc "Agent#KHAgent4";
		next;
		cutin "kh_kiel02",2;
		mes "[Kiehl]";
		mes "Bien, ya terminamos con";
		mes "ese feo asunto. Ahora,";
		mes "en donde estaba? Ah, bien.";
		mes "Si, lo siento, No tenemos";
		mes "más tiempo para jugar.";
		next;
		mes "[Kiehl]";
		mes "Aquí, aventurero.";
		mes "Estoy consciente de que mi padre";
		mes "te envio aquí por esto.";
		mes "Consideralo mi regalo final";
		mes "para él. Me sorprendio que él dejara";
		mes "éste anillo dentro de mi, creo....";
		next;
		cutin "kh_kiel04",2;
		mes "[Kiehl]";
		mes "Imagino que debe";
		mes "ser preciado para él. Pero";
		mes "me pregunto por que lo pusó";
		mes "dentro de mi? Bueno, de cualquier modo,";
		mes "tengo un mensaje que me gustaría";
		mes "le entregues.";
		next;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "Primero... Supongo que";
		mes "deberiamos deshacernos de ésta";
		mes "cosa vieja. Fue un buen";
		mes "cuerpo, y me sirvió bien";
		mes "por 23 años. Lo extrañaré.";
		mes "Descansa bien, viejo Kiehl.";
		next;
		specialeffect EF_DEVIL;
		next;
		mes "[Kiehl]";
		mes "Ahora, éste fué el cuerpo";
		mes "que mi padre hizó.";
		mes "Por favor dile que";
		mes "esto significa que no";
		mes "estamos emparentados";
		mes "el uno al otro en lo absoluto.";
		next;
		mes "[Kiehl]";
		mes "¿El cuerpo que estoy usando ahora mismo?";
		mes "Lo hicé yo mismo con la más";
		mes "avanzada tecnología. Consideralo..";
		mes "un cuerpo de robot de la Fourth";
		mes "Generation si quieres. Padre";
		mes "entenderá lo que quiero decir.";
		next;
		mes "[Kiehl]";
		mes "De cualquier forma, por favor dile";
		mes "eso, y toma el viejo anillo";
		mes "de mi viejo cuerpo de robot,";
		mes "y daselo a él. Por";
		mes "ahora, largemonos de aquí: sólo";
		mes "tenemos 3 minutos para evacuar.";
		next;
		mes "[Kiehl]";
		mes "Eres un digno oponente,";
		mes "y un humano que respeto.";
		mes "No sé si nos volveremos a ver,";
		mes "pero quién sabe?";
		mes "De cualquier forma, abriré la";
		mes "salida para ti. Adiós~";
		delitem 7504,1; //Toy_Motor
		set KielHyreQuest,104;
		hideonnpc "Kiehl#Copy";
		donpcevent "Kiehl_Room_Exit::OnEnable";			
		enablenpc "Kiehl_Room_Exit";
		initnpctimer;
		cutin "",255;
		close;
	}
	if (KielHyreQuest == 104) {
		cutin "kh_kiel02",2;
		mes "^3355FFRecuperas el";
		mes "anillo del corazón del";
		mes "viejo cuerpo robotico de Kiehl.^000000";
		getitem 7508,1; //Elysia_Ring
		set KielHyreQuest,106;
		close2;
		cutin "",255;
		end;
	}
	else{
		cutin "kh_kiel02",2;
		mes "^3355FFEl viejo";
		mes "cuerpo robotico de Kiehl";
		mes "permanece solitario,";
		mes "sin vida y en silencio.^000000";
		close2;
		cutin "",255;
		end;
	}


OnTimer180000:
	stopnpctimer;
	mapannounce "kh_kiehl02","Beeeeeeeeeeeeep~",bc_npc,0xFF0000;
	donpcevent "KiehlRoom::OnReset";
	end;

OnTimer179000:
	mapannounce "kh_kiehl02","1 second remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer178000:
	mapannounce "kh_kiehl02","2 seconds remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer177000:
	mapannounce "kh_kiehl02","3 seconds remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer176000:
	mapannounce "kh_kiehl02","4 seconds remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer175000:
	mapannounce "kh_kiehl02","5 seconds remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer170000:
	mapannounce "kh_kiehl02","10 seconds remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer160000:
	mapannounce "kh_kiehl02","20 seconds remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer150000:
	mapannounce "kh_kiehl02","30 seconds remaining until detonation",bc_npc,0xFF0000;
	end;

OnTimer120000:
	mapannounce "kh_kiehl02","1 minute remaining until detonation.",bc_npc,0xFF0000;
	end;

OnTimer60000:
	mapannounce "kh_kiehl02","2 minutes remaining until detonation.",bc_npc,0xFF0000;
	end;

OnTimer1000:
	mapannounce "kh_kiehl02","3 minutes remaining until detonation.",bc_npc,0xFF0000;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; NPC for mob control, timers, and other junk.
//----------------------------------------------------------------------------
kh_kiehl02,1,1,0	script	KiehlRoom	-1,{
	end;

OnKiehlMobDead:
	set .KHKilled,.KHKilled+1;
	if (.KHKilled == 5) { 
		hideoffnpc "Kiehl#Original"; 
	}
	end;

OnKiehlDead:
	set .KHKilledBoss,1;
	hideoffnpc "Kiehl#Original";
	end;
	
OnReset:
	donpcevent "Kiehl_Room_Trap::OnGlobalTimerOff";
	if (getmapusers("kh_kiehl02") > 0)
		mapwarp "kh_kiehl02","lighthalzen",192,200;
	killmonsterall "kh_kiehl02";
	disablenpc "Kiehl_Room_Exit";
	hideonnpc "Mitchell#KiehlRoom";
	hideonnpc "Agent#KHAgent1";
	hideonnpc "Agent#KHAgent2";
	hideonnpc "Agent#KHAgent3";
	hideonnpc "Agent#KHAgent4";
	hideonnpc "Kiehl#Copy";
	hideoffnpc "Kiehl#Original"; 
	set .KHKilledBoss,0;
	set .KHKilled,0;
	set getvariableofnpc(.KHTrapSprung,"Kiehl_Room_Trap"),0;
	set $@KHQuestBusy,0;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Mitchell and Agents. (Floating NPC + Duplicates)
//----------------------------------------------------------------------------
kh_kiehl02,49,55,6	script	Mitchell#KiehlRoom	727,{
	end;
OnInit:
	hideonnpc "Mitchell#KiehlRoom";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,53,52,4	script	Agent#KHAgent1	880,{
	end;
OnInit:
	hideonnpc "Agent#KHAgent1";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,51,49,1	script	Agent#KHAgent2	880,{
	end;
OnInit:
	hideonnpc "Agent#KHAgent2";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,47,50,0	script	Agent#KHAgent3	880,{
	end;
OnInit:
	hideonnpc "Agent#KHAgent3";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,46,53,6	script	Agent#KHAgent4	880,{
	end;
OnInit:
	hideonnpc "Agent#KHAgent4";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}


//----------------------------------------------------------------------------
// Kiehl's Room; Copy of Kiehl.
//----------------------------------------------------------------------------
kh_kiehl02,48,53,6	script	Kiehl#Copy	902,{
	end;

OnInit:
	hideonnpc "Kiehl#Copy";
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl_Room_Exit
//----------------------------------------------------------------------------
kh_kiehl02,50,59,0	script	Kiehl_Room_Exit	45,1,1,{
OnTouch:
	if (getmapusers("kh_kiehl02") < 1)
		donpcevent "KiehlRoom::OnReset";
	warp "lighthalzen",193,202;
	end;

OnEnable:
	misceffect 215;
	end;

OnInit:
	disablenpc "Kiehl_Room_Exit";
	end;
}

//============================================================================
